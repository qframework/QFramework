function utf8_decode(j){var o=[],p=0,n=0,m=0,l=0,k=0;for(j+="";p<j.length;){m=j.charCodeAt(p),m<128?(o[n++]=String.fromCharCode(m),p++):m>191&&m<224?(l=j.charCodeAt(p+1),o[n++]=String.fromCharCode((m&31)<<6|l&63),p+=2):(l=j.charCodeAt(p+1),k=j.charCodeAt(p+2),o[n++]=String.fromCharCode((m&15)<<12|(l&63)<<6|k&63),p+=3)}return o.join("")}function base64_decode(t){var r,s,q,p,o,n=0,m=0;p="";var k=[];if(!t){return t}t+="";do{r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)),q=r<<18|s<<12|p<<6|o,r=q>>16&255,s=q>>8&255,q&=255,p==64?k[m++]=String.fromCharCode(r):o==64?k[m++]=String.fromCharCode(r,s):k[m++]=String.fromCharCode(r,s,q)}while(n<t.length);p=k.join("");return p=utf8_decode(p)}function utf8_encode(k){if(k===null||typeof k==="undefined"){return""}k+="";var q="",r,p,o=0;r=p=0;for(var o=k.length,n=0;n<o;n++){var m=k.charCodeAt(n),l=null;m<128?p++:l=m>127&&m<2048?String.fromCharCode(m>>6|192)+String.fromCharCode(m&63|128):String.fromCharCode(m>>12|224)+String.fromCharCode(m>>6&63|128)+String.fromCharCode(m&63|128);l!==null&&(p>r&&(q+=k.slice(r,p)),q+=l,r=p=n+1)}p>r&&(q+=k.slice(r,o));return q}function base64_encode(k){var q,r,p,o,n=0,m=0,l="",l=[];if(!k){return k}k=utf8_encode(k+"");do{q=k.charCodeAt(n++),r=k.charCodeAt(n++),p=k.charCodeAt(n++),o=q<<16|r<<8|p,q=o>>18&63,r=o>>12&63,p=o>>6&63,o&=63,l[m++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(q)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)}while(n<k.length);l=l.join("");k=k.length%3;return(k?l.slice(0,k-3):l)+"===".slice(k||3)}function GameonWorld(c){this.mModelList=[];this.mVisibleModelList=[];this.mModelList2=[];this.mVisibleModelList2=[];this.mNewModels=[];this.mTexts=new TextRender;this.mTextsHud=new TextRender;this.mInDraw=!1;this.mSplashModel=void 0;this.mAmbientLight=[1,1,1,1];this.mAmbientLightChanged=!1;this.mApp=c;GameonWorld.mWorld=this}GameonWorld_Display={WORLD:0,HUD:1};GameonWorld.prototype.initSplash=function(f,h){var j=new GameonModel("splash",this.mApp);j.createPlane(-1.5,-1,0,1.5,1,0,this.mApp.colors().white);this.mApp.textures().newTexture(f,"q_splash",h,!0);j.setTexture(this.mApp.textures().getTexture("q_splash"));var g=new GameonModelRef(void 0,this);g.mLoc=GameonWorld_Display.HUD;j.addref(g);this.mSplashModel=j;j.generate(f);j.mEnabled=!0};GameonWorld.prototype.add=function(c){c.isValid()&&(this.mNewModels.indexOf(c)>=0&&console.error(" model alerady in "),this.mNewModels.push(c))};GameonWorld.prototype.remove=function(c){var e=this.mModelList.indexOf(c);e>=0&&this.mModelList.splice(e,1);e=this.mModelList2.indexOf(c);e>=0&&this.mModelList2.splice(e,1);this.remVisible(c)};GameonWorld.prototype.addModels=function(f){for(var h=0;h<this.mNewModels.length;h++){var j=this.mNewModels[h];if(j.mIsModel){var g=this.mModelList2.indexOf(j);g>=0&&console.error(" model alerady in 1");j.generate(f);this.mModelList2.push(j)}else{g=this.mModelList.indexOf(j),g>=0&&console.error(" model alerady in 2"),j.generate(f),this.mModelList.push(j)}}this.mNewModels=[]};GameonWorld.prototype.draw=function(f){if(!this.mLockedDraw){if(this.mAmbientLightChanged){this.mAmbientLightChanged=!1,f.uniform4f(f.getUniformLocation(f.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3])}for(var h=this.mVisibleModelList.length,j=0;j<h;j++){var g=this.mVisibleModelList[j];g.mHasAlpha||g.draw(f,GameonWorld_Display.WORLD)}for(j=0;j<h;j++){g=this.mVisibleModelList[j],g.mHasAlpha&&g.draw(f,GameonWorld_Display.WORLD)}h=this.mVisibleModelList2.length;for(j=0;j<h;j++){g=this.mVisibleModelList2[j],g.mHasAlpha||g.draw(f,GameonWorld_Display.WORLD)}for(j=0;j<h;j++){g=this.mVisibleModelList2[j],g.mHasAlpha&&g.draw(f,GameonWorld_Display.WORLD)}this.mTexts.render(f)}};GameonWorld.prototype.drawHud=function(e){if(!this.mLockedDraw){var f=this.mVisibleModelList.length;for(f-=1;f>=0;f--){var g=this.mVisibleModelList[f];g.draw(e,GameonWorld_Display.HUD);if(this.mLockedDraw){return}}f=this.mVisibleModelList2.length;for(f-=1;f>=0;f--){g=this.mVisibleModelList2[f],g.draw(e,GameonWorld_Display.HUD)}this.mTextsHud.render(e)}};GameonWorld.prototype.prepare=function(c){c.enable(c.CULL_FACE);c.frontFace(c.CCW);c.hint(c.PERSPECTIVE_CORRECTION_HINT,c.NICEST);c.clearColor(0,0,0,1);c.disable(c.STENCIL_TEST);c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);console.log(" DEPTH_TEST "+c.getParameter(c.DEPTH_TEST));console.log(" DEPTH_RANGE "+c.getParameter(c.DEPTH_RANGE)[0]);console.log(" DEPTH_RANGE "+c.getParameter(c.DEPTH_RANGE)[1]);console.log(" DEPTH_FUNC "+c.getParameter(c.DEPTH_FUNC));console.log(" DEPTH_BITS "+c.getParameter(c.DEPTH_BITS));c.enable(c.BLEND);c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);c.uniform4f(c.getUniformLocation(c.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3])};GameonWorld.prototype.clear=function(){this.mLockedDraw=!0;this.mModelList.clear();this.mNewModels.clear();this.mTexts.clear();this.mTextsHud.clear();this.mLockedDraw=this.mLocked=!1};GameonWorld.prototype.reinit=function(){this.mLockedDraw=!0;for(var c=this.mModelList.length,e=0;e<c;e++){this.mModelList[e].reset()}this.mLockedDraw=!1};GameonWorld.prototype.setVisible=function(c){if(c.mIsModel){if(this.mVisibleModelList2.indexOf(c)<0){for(var e=0;e<this.mVisibleModelList2.length;e++){if(this.mVisibleModelList2[e].mTextureID==c.mTextureID){this.mVisibleModelList2.splice(e,0,c);return}}this.mVisibleModelList2.push(c)}}else{if(this.mVisibleModelList.indexOf(c)<0){for(e=0;e<this.mVisibleModelList.length;e++){if(this.mVisibleModelList[e].mTextureID==c.mTextureID){this.mVisibleModelList.splice(e,0,c);return}}this.mVisibleModelList.push(c)}}};GameonWorld.prototype.remVisible=function(c){c.mIsModel?(c=this.mVisibleModelList2.indexOf(c),c>=0&&this.mVisibleModelList2.splice(c,1)):(c=this.mVisibleModelList.indexOf(c),c>=0&&this.mVisibleModelList.splice(c,1))};GameonWorld.prototype.drawSplash=function(c){if(this.mSplashModel!=void 0){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);if(this.mAmbientLightChanged){this.mAmbientLightChanged=!1,c.uniform4f(c.getUniformLocation(c.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3])}this.mSplashModel.setState(LayoutArea_State.VISIBLE);this.mSplashModel.draw(c,GameonWorld_Display.HUD);this.mSplashModel.setState(LayoutArea_State.HIDDEN)}};GameonWorld.prototype.setAmbientLight=function(f,h,j,g){this.mAmbientLight[0]=f;this.mAmbientLight[1]=h;this.mAmbientLight[2]=j;this.mAmbientLight[3]=g;this.mAmbientLightChanged=!0};GameonWorld.prototype.getAmbientLight=function(){var c=Array(4);c[0]=this.mAmbientLight[0];c[1]=this.mAmbientLight[1];c[2]=this.mAmbientLight[2];c[3]=this.mAmbientLight[3];return c};GameonWorld.prototype.setAmbientLightGl=function(g,k,l,j,h){this.mAmbientLight[0]=g;this.mAmbientLight[1]=k;this.mAmbientLight[2]=l;this.mAmbientLight[3]=j;this.mAmbientLightChanged=!0;h.uniform4f(h.getUniformLocation(h.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3])};GameonWorld.prototype.texts=function(){return this.mTexts};GameonWorld.prototype.textsHud=function(){return this.mTextsHud};function GameonModelRef(c){this.mStaticBounds=[-0.5,-0.5,0,1,0.5,-0.5,0,1,-0.5,0.5,0,1,0.5,0.5,0,1];this.mBounds=Array(16);this.mAreaPosition=[0,0,0];this.mAreaRotation=[0,0,0];this.mPosition=[0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mScaleAdd=[1,1,1];this.mTransformOwner=!1;this.mOwnerMax=this.mOwner=0;this.mParent=c;this.mVisible=this.mAdded=!1;this.mEnabled=!0;this.mLoc=GameonWorld_Display.WORLD;this.mMatrix=new J3DIMatrix4;this.mAnimating=!1;this.mAnimData=void 0}GameonModelRef.prototype.clear=function(){this.mPosition[0]=0;this.mPosition[1]=0;this.mPosition[2]=0;this.mRotation[0]=0;this.mRotation[1]=0;this.mRotation[2]=0;this.mScale[0]=1;this.mScale[1]=1;this.mScale[2]=1;this.mAreaPosition[0]=0;this.mAreaPosition[1]=0;this.mAreaPosition[2]=0;this.mAreaRotation[0]=0;this.mAreaRotation[1]=0;this.mAreaRotation[2]=0;this.mScaleAdd[0]=1;this.mScaleAdd[1]=1;this.mScaleAdd[2]=1;this.mTransformOwner=!1;this.mOwner=0};GameonModelRef.prototype.setOwner=function(c,e){this.mOwner=c;this.mOwnerMax=e;this.mTransformOwner=!0};GameonModelRef.prototype.setPosition=function(e,f,g){f==void 0?(this.mPosition[0]=e[0],this.mPosition[1]=e[1],this.mPosition[2]=e[2]):(this.mPosition[0]=e,this.mPosition[1]=f,this.mPosition[2]=g)};GameonModelRef.prototype.setAreaPosition=function(e,f,g){f==void 0?(this.mAreaPosition[0]=e[0],this.mAreaPosition[1]=e[1],this.mAreaPosition[2]=e[2]):(this.mAreaPosition[0]=e,this.mAreaPosition[1]=f,this.mAreaPosition[2]=g)};GameonModelRef.prototype.addPosition=function(e,f,g){f==void 0?(this.mPosition[0]+=e[0],this.mPosition[1]+=e[1],this.mPosition[2]+=e[2]):(this.mPosition[0]+=e,this.mPosition[1]+=f,this.mPosition[2]+=g)};GameonModelRef.prototype.addAreaPosition=function(e,f,g){f==void 0?(this.mAreaPosition[0]+=e[0],this.mAreaPosition[1]+=e[1],this.mAreaPosition[2]+=e[2]):(this.mAreaPosition[0]+=e,this.mAreaPosition[1]+=f,this.mAreaPosition[2]+=g)};GameonModelRef.prototype.setScale=function(e,f,g){f==void 0?(this.mScale[0]=e[0],this.mScale[1]=e[1],this.mScale[2]=e[2]):(this.mScale[0]=e,this.mScale[1]=f,this.mScale[2]=g)};GameonModelRef.prototype.setRotate=function(e,f,g){f==void 0?(this.mRotation[0]=e[0],this.mRotation[1]=e[1],this.mRotation[2]=e[2]):(this.mRotation[0]=e,this.mRotation[1]=f,this.mRotation[2]=g)};GameonModelRef.prototype.setAreaRotate=function(e,f,g){f==void 0?(this.mAreaRotation[0]=e[0],this.mAreaRotation[1]=e[1],this.mAreaRotation[2]=e[2]):(this.mAreaRotation[0]=e,this.mAreaRotation[1]=f,this.mAreaRotation[2]=g)};GameonModelRef.prototype.addRotation=function(e,f,g){this.mRotation[0]+=e;this.mRotation[1]+=f;this.mRotation[2]+=g};GameonModelRef.prototype.addAreaRotation=function(e,f,g){this.mAreaRotation[0]+=e;this.mAreaRotation[1]+=f;this.mAreaRotation[2]+=g};GameonModelRef.prototype.apply=function(){if(!this.mAdded){this.mAdded=!0,this.mParent.addref(this)}};GameonModelRef.prototype.remove=function(){this.mParent.removeref(this);this.mAdded=!1;this.setVisible(!1)};GameonModelRef.prototype.copy=function(c){this.mPosition[0]=c.mPosition[0];this.mPosition[1]=c.mPosition[1];this.mPosition[2]=c.mPosition[2];this.mScale[0]=c.mScale[0];this.mScale[1]=c.mScale[1];this.mScale[2]=c.mScale[2];this.mScaleAdd[0]=c.mScaleAdd[0];this.mScaleAdd[1]=c.mScaleAdd[1];this.mScaleAdd[2]=c.mScaleAdd[2];this.mRotation[0]=c.mRotation[0];this.mRotation[1]=c.mRotation[1];this.mRotation[2]=c.mRotation[2];this.mAreaPosition[0]=c.mAreaPosition[0];this.mAreaPosition[1]=c.mAreaPosition[1];this.mAreaPosition[2]=c.mAreaPosition[2];this.mAreaRotation[0]=c.mAreaRotation[0];this.mAreaRotation[1]=c.mAreaRotation[1];this.mAreaRotation[2]=c.mAreaRotation[2];this.mLoc=c.mLoc};GameonModelRef.prototype.setScaleRef=function(c){this.mScale[0]=c.mScale[0];this.mScale[1]=c.mScale[1];this.mScale[2]=c.mScale[2]};GameonModelRef.prototype.setRotation=function(c){this.mRotation[0]=c.mRotation[0];this.mRotation[1]=c.mRotation[1];this.mRotation[2]=c.mRotation[2]};GameonModelRef.prototype.distxy=function(c){return Math.sqrt((c.mPosition[0]-this.mPosition[0])*(c.mPosition[0]-this.mPosition[0])+(c.mPosition[1]-this.mPosition[1])*(c.mPosition[1]-this.mPosition[1]))};GameonModelRef.prototype.distxyMat=function(c){return Math.sqrt((c.mMatrix[12]-this.mMatrix[12])*(c.mMatrix[12]-this.mMatrix[12])+(c.mMatrix[13]-this.mMatrix[13])*(c.mMatrix[13]-this.mMatrix[13]))};GameonModelRef.prototype.set=function(){this.mMatrix.makeIdentity();(this.mAreaPosition[0]!=0||this.mAreaPosition[1]!=0||this.mAreaPosition[2]!=0)&&this.mMatrix.translate(this.mAreaPosition[0],this.mAreaPosition[1],this.mAreaPosition[2]);if(this.mAreaRotation[0]!=0||this.mAreaRotation[1]!=0||this.mAreaRotation[2]!=0){this.mMatrix.rotate(this.mAreaRotation[0],1,0,0),this.mMatrix.rotate(this.mAreaRotation[1],0,1,0),this.mMatrix.rotate(this.mAreaRotation[2],0,0,1)}(this.mPosition[0]!=0||this.mPosition[1]!=0||this.mPosition[2]!=0)&&this.mMatrix.translate(this.mPosition[0],this.mPosition[1],this.mPosition[2]);if(this.mRotation[0]!=0||this.mRotation[1]!=0||this.mRotation[2]!=0){this.mMatrix.rotate(this.mRotation[0],1,0,0),this.mMatrix.rotate(this.mRotation[1],0,1,0),this.mMatrix.rotate(this.mRotation[2],0,0,1)}(this.mScale[0]!=1||this.mScale[1]!=1||this.mScale[2]!=1||this.mScaleAdd[0]!=1||this.mScaleAdd[1]!=1||this.mScaleAdd[2]!=1)&&this.mMatrix.scale(this.mScale[0]*this.mScaleAdd[0],this.mScale[1]*this.mScaleAdd[1],this.mScale[2]*this.mScaleAdd[2]);var c=this.mMatrix.getAsArray();GMath.matrixVecMultiply2(c,this.mStaticBounds,0,this.mBounds,0);GMath.matrixVecMultiply2(c,this.mStaticBounds,4,this.mBounds,4);GMath.matrixVecMultiply2(c,this.mStaticBounds,8,this.mBounds,8);GMath.matrixVecMultiply2(c,this.mStaticBounds,12,this.mBounds,12)};GameonModelRef.prototype.translate=function(e,f,g){this.mMatrix.translate(e,f,g)};GameonModelRef.prototype.setVisible=function(c){this.mVisible=c;this.mEnabled=!0;if(c){this.mParent!=void 0&&this.mParent.addVisibleRef(this)}else{if(this.mParent!=void 0&&this.mParent.remVisibleRef(this),this.mAnimating&&this.mAnimData!=void 0){this.mAnimData.cancelAnimation(this),this.mAnimating=!1}}};GameonModelRef.prototype.getVisible=function(){return this.mVisible};GameonModelRef.prototype.setParent=function(c){this.mParent=c};GameonModelRef.prototype.copyMat=function(c){this.mMatrix.load(c.mMatrix)};GameonModelRef.prototype.setAddScale=function(e,f,g){f==void 0?(this.mScaleAdd[0]=e[0],this.mScaleAdd[1]=e[1],this.mScaleAdd[2]=e[2]):(this.mScaleAdd[0]=e,this.mScaleAdd[1]=f,this.mScaleAdd[2]=g)};GameonModelRef.prototype.mulScale=function(e,f,g){f==void 0?(this.mScale[0]*=e[0],this.mScale[1]*=e[1],this.mScale[2]*=e[2]):(this.mScale[0]*=e,this.mScale[1]*=f,this.mScale[2]*=g)};GameonModelRef.prototype.intersectsRay=function(e,f){var g=GMath.rayIntersectsBounds(e,f,this.mBounds,[0,0,0]);return g>=0?g:1000000};GameonModelRef.prototype.getAnimData=function(c){if(this.mAnimData==void 0){this.mAnimData=new AnimData(-1,c)}return this.mAnimData};GameonModelRef.prototype.activateAnim=function(){if(this.mAnimData!=void 0){this.mAnimating=!0,this.mAnimData.activate()}};GameonModelRef.prototype.animate=function(c){if(this.mAnimData!=void 0&&this.mAnimData.process2(this,c)){this.mAnimating=!1}};GameonModelRef.prototype.animating=function(){return this.mAnimating};GameonModelRef.prototype.matrix=function(){return this.mMatrix};function TextRender(c){this.mTexts=[];this.mVisibleTexts=[];this.mWorld=c}TextRender.prototype.remove=function(c){var e=this.mTexts.indexOf(c);e>=0&&(this.mTexts.splice(e,1),this.removeVisible(c))};TextRender.prototype.add=function(c,e){this.mTexts.indexOf(c)<0&&(this.mTexts.push(c),e&&this.addVisible(c))};TextRender.prototype.render=function(f){var h=this.mVisibleTexts.length;if(h!=0){for(var j=0;j<h;j++){var g=this.mVisibleTexts[j];g.getVisible()&&g.draw(f,j)}}};TextRender.prototype.clear=function(){this.mTexts=[];this.mVisibleTexts=[]};TextRender.prototype.addVisible=function(c){this.mVisibleTexts.indexOf(c)<0&&this.mVisibleTexts.push(c)};TextRender.prototype.removeVisible=function(c){c=this.mVisibleTexts.indexOf(c);c>=0&&this.mVisibleTexts.splice(c,1)};function TextItem(B,z,A,w,v,u,t,s,q,p,r,n){this.mApp=B;this.mX=z;this.mY=A;this.mZ=u;this.mW=w;this.mH=v;this.mText=t;this.mNum=s;this.mOffset=q;this.mLoc=p;this.mColors=n;this.mCentered=!1;this.mVisible=!0;this.mDirX=1;this.mDirY=0;this.mOffset=q;this.mRef=new GameonModelRef(void 0);this.mRef.mLoc=p;this.mParent=this.mModel=void 0;this.setOrientation(r);this.set(!0)}TextItem.prototype.updateText=function(e,f){var g=!1;this.mText.length!=e.length&&this.mNum<0&&(g=!0);this.mText=e;this.mLoc=f;this.mRef.mLoc=f;this.set(g);return g};TextItem.prototype.setOrientation=function(c){if(c==LayoutArea_Layout.WEST_EAST||c==LayoutArea_Layout.NONE||c==LayoutArea_Layout.HORIZONTAL){this.mDirX=1,this.mDirY=0}else{if(c==LayoutArea_Layout.EAST_WEST){this.mDirX=-1,this.mDirY=0}else{if(c==LayoutArea_Layout.NORTH_SOUTH||c==LayoutArea_Layout.VERTICAL){this.mDirX=0,this.mDirY=-1}else{if(c==LayoutArea_Layout.SOUTH_NORTH){this.mDirX=0,this.mDirY=1}}}}if(c==LayoutArea_Layout.HORIZONTAL||c==LayoutArea_Layout.VERTICAL){this.mCentered=!0}};TextItem.prototype.setOffset=function(c){this.mOffset=c};TextItem.prototype.set=function(t){this.mRef.setVisible(!0);if(this.mText!=void 0){this.mModel=new GameonModel("letter",this.mApp);this.mModel.mWorld=void 0;this.mModel.mLoc=this.mLoc;this.mModel.addref(this.mRef);if(this.mDirX!=0){var r=this.mText.length;if(r==0){return}var s=this.mNum;s<=0&&(s=r);if(t){this.mRef.mPosition[0]=this.mX,this.mRef.mPosition[1]=this.mY,this.mRef.mPosition[2]=this.mZ,this.mRef.mScale[0]=this.mW/s,this.mRef.mScale[1]=this.mH}t=-s/2+0.5;this.mCentered&&this.mNum>0&&(t=-r/2+0.5);for(var q=0.0625,p=0;p<r&&p<s;p++){var o=this.getVal(this.mText.charCodeAt(p)),n=q*(o%16),o=q*Math.floor(o/16),m=n+q,k=o+q;n+=this.mApp.mTextures.mU1;o+=this.mApp.mTextures.mV1;m-=this.mApp.mTextures.mU2;k-=this.mApp.mTextures.mV2;this.mDirX>0?this.mModel.createPlaneTex2(t-0.48,-0.48,0,t+0.48+this.mApp.mTextures.mCp,0.48,0,n,o,m,k,this.mColors,p,1/Math.max(r,s)):this.mModel.createPlaneTex2(s-1-t-0.48-this.mApp.mTextures.mCp,-0.48,0,s-1-t+0.48,0.48,0,n,o,m,k,this.mColors,p,1/Math.max(r,s));t+=1}}else{r=this.mText.length;if(r==0){return}s=this.mNum;s<=0&&(s=r);if(t){this.mRef.mPosition[0]=this.mX,this.mRef.mPosition[1]=this.mY,this.mRef.mPosition[2]=this.mZ,this.mRef.mScale[0]=this.mW,this.mRef.mScale[1]=this.mH/s}t=s/2-0.5;this.mCentered&&this.mNum>0&&(t=r/2-0.5);q=0.0625;for(p=0;p<r&&p<s;p++){o=this.getVal(this.mText.charCodeAt(p)),n=q*(o%16),o=q*Math.floor(o/16),m=n+q,k=o+q,n+=this.mApp.mTextures.mU1,o+=this.mApp.mTextures.mV1,m-=this.mApp.mTextures.mU2,k-=this.mApp.mTextures.mV2,this.mDirY>0?this.mModel.createPlaneTex(-0.48,t-0.48,0,0.48,t+0.48+this.mApp.mTextures.mCp,0,n,o,m,k,this.mColors,p,1/Math.max(r,s)):this.mModel.createPlaneTex(-0.48,s-1-t-0.48-this.mApp.mTextures.mCp,0,0.48,s-1-t+0.48,0,n,o,m,k,this.mColors,p,1/Math.max(r,s)),t+=1}}this.mModel.setTexture(this.mApp.mTextures.get(TextureFactory_Type.FONT));this.mModel.generate(this.mApp.gl);this.mModel.mEnabled=!0}};TextItem.prototype.draw=function(e){if(!(this.mModel==void 0||this.mText==void 0||this.mText.length==0)){if(this.mModel.setupRef(e),this.mOffset>0){var f=this.mApp.mColors.getColorId(this.mOffset),g=this.mApp.mWorld.getAmbientLight();this.mApp.mWorld.setAmbientLightGl(g[0]*f.red,g[1]*f.green,g[2]*f.blue,g[3]*f.alpha,e);this.mModel.setupRef(e);this.mModel.drawRef(e,this.mRef);this.mApp.mWorld.setAmbientLightGl(g[0],g[1],g[2],g[3],e)}else{this.mModel.drawRef(e,this.mRef)}}};TextItem.prototype.getVal=function(c){var e=32;if(c<0||c>255){switch(c){case 268:e=0;break;case 269:e=1;break;case 262:e=2;break;case 263:e=3;break;case 272:e=208;break;case 273:e=240;break;case 352:e=138;break;case 353:e=154;break;case 381:e=142;break;case 382:e=158;break;default:e=38}}else{e=c}return e};TextItem.prototype.setParent=function(c){this.mParent=c};TextItem.prototype.setVisible=function(c){(this.mVisible=c)?this.mParent.addVisible(this):this.mParent.removeVisible(this);this.mRef!=void 0&&this.mRef.setVisible(c)};TextItem.prototype.getVisible=function(){return this.mVisible};TextItem.prototype.setPosition=function(g,k,l,j,h){this.mX=g;this.mY=k;this.mZ=l;this.mW=j;this.mH=h;this.set(!0)};TextItem.prototype.setRef=function(){if(this.mRef!=void 0){if(this.mDirX!=0){var c=this.mNum;if(c<=0){c=this.mText.length}this.mRef.mPosition[0]=this.mX;this.mRef.mPosition[1]=this.mY;this.mRef.mPosition[2]=this.mZ;this.mRef.mScale[0]=this.mW/c;this.mRef.mScale[1]=this.mH}else{c=this.mNum;if(c<=0){c=this.mText.length}this.mRef.mPosition[0]=this.mX;this.mRef.mPosition[1]=this.mY;this.mRef.mPosition[2]=this.mZ;this.mRef.mScale[0]=this.mW;this.mRef.mScale[1]=this.mH/c}}};function AnimData_AnimFrame(){this.mScale=void 0;this.mScaleAnim=!1;this.mRotate=void 0;this.mRotateAnim=!1;this.mTranslate=void 0;this.mTranslateAnim=!1;this.mRotate2=void 0;this.mRotate2Anim=!1;this.mTranslate2=void 0;this.mTranslate2Anim=!1}AnimData_Type={NONE:0,REF:1,COLOR:2};AnimData.prototype.reset=function(){this.mTimeStep=this.mSteps=this.mRefCount=0;this.mActive=!1;this.mRepeat=1;this.mToFinish=!1;this.mType=AnimData_Type.REF;this.mCallback=void 0;this.restore();if(this.mSavedRef!=void 0){this.mSavedRef.set(),this.mSavedRef=void 0}this.mApp.anims().decCount()};AnimData.prototype.restore=function(){this.mType==AnimData_Type.COLOR&&this.setColorEnd()};AnimData.prototype.setColorStart=function(){var c=this.mColorPool[0];this.mApp.world().setAmbientLight(c.red,c.green,c.blue,c.alpha)};AnimData.prototype.setColorEnd=function(){var c=this.mColorPool[this.mRefCount-1];this.mApp.world().setAmbientLight(c.red,c.green,c.blue,c.alpha)};AnimData.prototype.setRef=function(c){c==0&&(c=1);perct=c/this.mAnimDelay;var e=Math.floor(perct*this.mSteps);e>this.mSteps-1&&(e=this.mSteps-1);if(e>this.mMaxFrames-1||e<0){return this.reset(),1}if(this.mType==AnimData_Type.COLOR){this.mCurrSourceCol=this.mColorPool[e],this.mCurrDestCol=this.mColorPool[e+1]}return rest=(c-e*this.mTimeStep)/this.mTimeStep};AnimData.prototype.calcLinearColor=function(h,m,n,l){var k=m.red,h=m.blue,j=m.green,m=m.alpha;k+=(n.red-k)*l;j+=(n.green-j)*l;h+=(n.blue-h)*l;n=m+(n.alpha-m)*l;this.mApp.world().setAmbientLight(k,j,h,n)};AnimData.prototype.copyColor=function(c,e){e.alpha=c.alpha;e.red=c.red;e.blue=c.blue;e.green=c.green};AnimData.prototype.setCallback=function(c){this.mCallback=c};AnimData.prototype.addFrameColor=function(c){if(this.mColorPool==void 0){this.mColorPool=[];for(var e=0;e<this.mMaxFrames;e++){this.mColorPool.push(new GLColor(0))}}this.mRefCount<this.mMaxFrames&&(e=this.mColorPool[this.mRefCount++],this.copyColor(c,e))};AnimData.prototype.copyColor=function(c,e){e.alpha=c.alpha;e.red=c.red;e.blue=c.blue;e.green=c.green};AnimData.prototype.storeArrays=function(e,f,g){if(e.mTranslateAnim==!0){if(e.mTranslate==void 0){e.mTranslate=[0,0,0]}e.mTranslate[0]=g.mPosition[0];e.mTranslate[1]=g.mPosition[1];e.mTranslate[2]=g.mPosition[2]}if(e.mRotateAnim==!0){if(e.mRotate==void 0){e.mRotate=[0,0,0]}e.mRotate[0]=g.mRotation[0];e.mRotate[1]=g.mRotation[1];e.mRotate[2]=g.mRotation[2]}if(e.mScaleAnim==!0){if(e.mScale==void 0){e.mScale=[0,0,0]}e.mScale[0]=g.mScale[0];e.mScale[1]=g.mScale[1];e.mScale[2]=g.mScale[2]}if(e.mTranslate2Anim==!0){if(e.mTranslate2==void 0){e.mTranslate2=[0,0,0]}e.mTranslate2[0]=g.mAreaPosition[0];e.mTranslate2[1]=g.mAreaPosition[1];e.mTranslate2[2]=g.mAreaPosition[2]}if(e.mRotate2Anim==!0){if(e.mRotate2==void 0){e.mRotate2=[0,0,0]}e.mRotate2[0]=g.mAreaRotation[0];e.mRotate2[1]=g.mAreaRotation[1];e.mRotate2[2]=g.mAreaRotation[2]}};AnimData.prototype.storeArrays3=function(g,k,l,j,h){if(g.mTranslateAnim==!0){if(g.mTranslate==void 0){g.mTranslate=[0,0,0]}g.mTranslate[0]=(j.mPosition[0]-l.mPosition[0])*h+l.mPosition[0];g.mTranslate[1]=(j.mPosition[1]-l.mPosition[1])*h+l.mPosition[1];g.mTranslate[2]=(j.mPosition[2]-l.mPosition[2])*h+l.mPosition[2]}if(g.mRotateAnim==!0){if(g.mRotate==void 0){g.mRotate=[0,0,0]}g.mRotate[0]=(j.mRotation[0]-l.mRotation[0])*h+l.mRotation[0];g.mRotate[1]=(j.mRotation[1]-l.mRotation[1])*h+l.mRotation[1];g.mRotate[2]=(j.mRotation[2]-l.mRotation[2])*h+l.mRotation[2]}if(g.mScaleAnim==!0){if(g.mScale==void 0){g.mScale=[0,0,0]}g.mScale[0]=(j.mScale[0]-l.mScale[0])*h+l.mScale[0];g.mScale[1]=(j.mScale[1]-l.mScale[1])*h+l.mScale[1];g.mScale[2]=(j.mScale[2]-l.mScale[2])*h+l.mScale[2]}if(g.mTranslate2Anim==!0){if(g.mTranslate2==void 0){g.mTranslate2=[0,0,0]}g.mTranslate2[0]=(j.mAreaPosition[0]-l.mAreaPosition[0])*h+l.mAreaPosition[0];g.mTranslate2[1]=(j.mAreaPosition[1]-l.mAreaPosition[1])*h+l.mAreaPosition[1];g.mTranslate2[2]=(j.mAreaPosition[2]-l.mAreaPosition[2])*h+l.mAreaPosition[2]}if(g.mRotate2Anim==!0){if(g.mRotate2==void 0){g.mRotate2=[0,0,0]}g.mRotate2[0]=(j.mAreaRotation[0]-l.mAreaRotation[0])*h+l.mAreaRotation[0];g.mRotate2[1]=(j.mAreaRotation[1]-l.mAreaRotation[1])*h+l.mAreaRotation[1];g.mRotate2[2]=(j.mAreaRotation[2]-l.mAreaRotation[2])*h+l.mAreaRotation[2]}};AnimData.prototype.storeArrays2=function(e,f,g){f=0;if(e.mTranslateAnim==!0){if(e.mTranslate==void 0){e.mTranslate=[0,0,0]}e.mTranslate[0]=g[f++];e.mTranslate[1]=g[f++];e.mTranslate[2]=g[f++]}if(e.mRotateAnim==!0){if(e.mRotate==void 0){e.mRotate=[0,0,0]}e.mRotate[0]=g[f++];e.mRotate[1]=g[f++];e.mRotate[2]=g[f++]}if(e.mScaleAnim==!0){if(e.mScale==void 0){e.mScale=[0,0,0]}e.mScale[0]=g[f++];e.mScale[1]=g[f++];e.mScale[2]=g[f++]}if(e.mTranslate2Anim==!0){if(e.mTranslate2==void 0){e.mTranslate2=[0,0,0]}e.mTranslate2[0]=g[f++];e.mTranslate2[1]=g[f++];e.mTranslate2[2]=g[f++]}if(e.mRotate2Anim==!0){if(e.mRotate2==void 0){e.mRotate2=[0,0,0]}e.mRotate2[0]=g[f++];e.mRotate2[1]=g[f++];e.mRotate2[2]=g[f++]}};AnimData.prototype.addArrays=function(e,f,g){if(e.mTranslateAnim==!0){if(e.mTranslate==void 0){e.mTranslate=[0,0,0]}e.mTranslate[0]+=g.mPosition[0];e.mTranslate[1]+=g.mPosition[1];e.mTranslate[2]+=g.mPosition[2]}if(e.mRotateAnim==!0){if(e.mRotate==void 0){e.mRotate=[0,0,0]}e.mRotate[0]+=g.mRotation[0];e.mRotate[1]+=g.mRotation[1];e.mRotate[2]+=g.mRotation[2]}if(e.mScaleAnim==!0){if(e.mScale==void 0){e.mScale=[0,0,0]}e.mScale[0]*=g.mScale[0];e.mScale[1]*=g.mScale[1];e.mScale[2]*=g.mScale[2]}if(e.mTranslate2Anim==!0){if(e.mTranslate2==void 0){e.mTranslate2=[0,0,0]}e.mTranslate2[0]+=g.mAreaPosition[0];e.mTranslate2[1]+=g.mAreaPosition[1];e.mTranslate2[2]+=g.mAreaPosition[2]}if(e.mRotate2Anim==!0){if(e.mRotate2==void 0){e.mRotate2=[0,0,0]}e.mRotate2[0]+=g.mAreaRotation[0];e.mRotate2[1]+=g.mAreaRotation[1];e.mRotate2[2]+=g.mAreaRotation[2]}};AnimData.prototype.perctArrays=function(f,h,j,g){j=GMath.dist(j,g);if(f.mTranslateAnim==!0&&h.translateActive==!0){if(f.mTranslate==void 0){f.mTranslate=[0,0,0]}f.mTranslate[0]+=h.translate[0]*j;f.mTranslate[1]+=h.translate[1]*j;f.mTranslate[2]+=h.translate[2]*j}if(f.mRotateAnim==!0&&h.rotateActive==!0){if(f.mRotate==void 0){f.mRotate=[0,0,0]}f.mRotate[0]+=h.rotate[0]*j;f.mRotate[1]+=h.rotate[1]*j;f.mRotate[2]+=h.rotate[2]*j}if(f.mScaleAnim==!0&&h.scaleActive==!0){if(f.mScale==void 0){f.mScale=[0,0,0]}f.mScale[0]*=h.scale[0]*j;f.mScale[1]*=h.scale[1]*j;f.mScale[2]*=h.scale[2]*j}if(f.mTranslate2Anim==!0&&h.translate2Active==!0){if(f.mTranslate2==void 0){f.mTranslate2=[0,0,0]}f.mTranslate2[0]+=h.translate2[0]*j;f.mTranslate2[1]+=h.translate2[1]*j;f.mTranslate2[2]+=h.translate2[2]*j}if(f.mRotate2Anim==!0&&h.rotate2Active==!0){if(f.mRotate2==void 0){f.mRotate2=[0,0,0]}f.mRotate2[0]+=h.rotate2[0]*j;f.mRotate2[1]+=h.rotate2[1]*j;f.mRotate2[2]+=h.rotate2[2]*j}};AnimData.prototype.clearArrays=function(c){if(c.mTranslateAnim==!0){if(c.mTranslate==void 0){c.mTranslate=[0,0,0]}c.mTranslate[0]=0;c.mTranslate[1]=0;c.mTranslate[2]=0}if(c.mRotateAnim==!0){if(c.mRotate==void 0){c.mRotate=[0,0,0]}c.mRotate[0]=0;c.mRotate[1]=0;c.mRotate[2]=0}if(c.mScaleAnim==!0){if(c.mScale==void 0){c.mScale=[0,0,0]}c.mScale[0]=1;c.mScale[1]=1;c.mScale[2]=1}if(c.mTranslate2Anim==!0){if(c.mTranslate2==void 0){c.mTranslate2=[0,0,0]}c.mTranslate2[0]=0;c.mTranslate2[1]=0;c.mTranslate2[2]=0}if(c.mRotate2Anim==!0){if(c.mRotate2==void 0){c.mRotate2=[0,0,0]}c.mRotate2[0]=0;c.mRotate2[1]=0;c.mRotate2[2]=0}};AnimData.prototype.fillFrameEnd=function(g,k,l,j,h){g=k.frames[k.frames.length-1];this.storeArrays2(this.mEnd,g,l,j);g.operation!=void 0&&g.operation=="add"&&this.addArrays(this.mEnd,g,h)};AnimData.prototype.fillFrameEnd2=function(e,f,g){e=f.frames[f.frames.length-1];this.clearArrays(this.mEnd,e);this.addArrays(this.mEnd,e,g)};AnimData.prototype.fillFrameStart=function(e,f,g){this.storeArrays(this.mStart,f.frames[0],g)};AnimData.prototype.setup=function(f,h,j,g){if(this.mStart==void 0){this.mStart=new AnimData_AnimFrame}if(this.mEnd==void 0){this.mEnd=new AnimData_AnimFrame}this.maskFrames2(this.mStart,f.frames[0]);this.maskFrames2(this.mEnd,f.frames[f.frames.length-1]);this.fillFrameStart(this.mStart,f,g);this.fillFrameEnd(this.mEnd,f,h,j,g)};AnimData.prototype.setup2=function(e,f,g){if(this.mStart==void 0){this.mStart=new AnimData_AnimFrame}if(this.mEnd==void 0){this.mEnd=new AnimData_AnimFrame}this.maskFrames(this.mStart,this.mEnd,f,g);this.maskFrame(this.mStart,f,g);this.fillFrameStart(this.mStart,e,f);this.fillFrameEnd2(this.mEnd,e,g);e.frames.length>2&&this.fillFrames(e,f,g)};AnimData.prototype.maskFrames2=function(c,e){c.mRotate2Anim=e.rotate2Active==!0?!0:!1;c.mRotateAnim=e.rotateActive==!0?!0:!1;c.mScaleAnim=e.scaleActive==!0?!0:!1;c.mTranslate2Anim=e.translate2Active==!0?!0:!1;c.mTranslateAnim=e.translateActive==!0?!0:!1};AnimData.prototype.maskFrames=function(f,h,j,g){j.mPosition[0]!=g.mPosition[0]||j.mPosition[1]!=g.mPosition[1]||j.mPosition[2]!=g.mPosition[2]?(f.mTranslateAnim=!0,h.mTranslateAnim=!0):(f.mTranslateAnim=!1,h.mTranslateAnim=!1);j.mAreaPosition[0]!=g.mAreaPosition[0]||j.mAreaPosition[1]!=g.mAreaPosition[1]||j.mAreaPosition[2]!=g.mAreaPosition[2]?(f.mTranslate2Anim=!0,h.mTranslate2Anim=!0):(f.mTranslate2Anim=!1,h.mTranslate2Anim=!1);j.mRotation[0]!=g.mRotation[0]||j.mRotation[1]!=g.mRotation[1]||j.mRotation[2]!=g.mRotation[2]?(f.mRotateAnim=!0,h.mRotateAnim=!0):(f.mRotateAnim=!1,h.mRotateAnim=!1);j.mAreaRotation[0]!=g.mAreaRotation[0]||j.mAreaRotation[1]!=g.mAreaRotation[1]||j.mAreaRotation[2]!=g.mAreaRotation[2]?(f.mRotate2Anim=!0,h.mRotate2Anim=!0):(f.mRotate2Anim=!1,h.mRotate2Anim=!1);j.mScale[0]!=g.mScale[0]||j.mScale[1]!=g.mScale[1]||j.mScale[2]!=g.mScale[2]?(f.mScaleAnim=!0,h.mScaleAnim=!0):(f.mScaleAnim=!1,h.mScaleAnim=!1)};AnimData.prototype.maskFrame=function(e,f,g){e.mTranslateAnim=f.mPosition[0]!=g.mPosition[0]||f.mPosition[1]!=g.mPosition[1]||f.mPosition[2]!=g.mPosition[2]?!0:!1;e.mTranslate2Anim=f.mAreaPosition[0]!=g.mAreaPosition[0]||f.mAreaPosition[1]!=g.mAreaPosition[1]||f.mAreaPosition[2]!=g.mAreaPosition[2]?!0:!1;e.mRotateAnim=f.mRotation[0]!=g.mRotation[0]||f.mRotation[1]!=g.mRotation[1]||f.mRotation[2]!=g.mRotation[2]?!0:!1;e.mRotate2Anim=f.mAreaRotation[0]!=g.mAreaRotation[0]||f.mAreaRotation[1]!=g.mAreaRotation[1]||f.mAreaRotation[2]!=g.mAreaRotation[2]?!0:!1;e.mScaleAnim=f.mScale[0]!=g.mScale[0]||f.mScale[1]!=g.mScale[1]||f.mScale[2]!=g.mScale[2]?!0:!1};AnimData.prototype.fillFrames=function(k,q,r){for(var p=1/(k.frames.length-1),o=p,n=1;n<k.frames.length-1;n++){var m=n-1,l=void 0;if(this.mFrames==void 0){this.mFrames=[]}m<this.mFrames.length?l=this.mFrames[m]:(l=new AnimData_AnimFrame,this.mFrames.push(l));m=k.frames[n];this.clearArrays(l,m);this.maskFrame(l,q,r);m.operation=="add"?(this.clearArrays(l,m),this.storeArrays3(l,m,q,r,o),this.addArrays(l,m,r)):m.operation=="pdist"?(this.clearArrays(l,m),this.storeArrays3(l,m,q,r,o),this.perctArrays(l,m,q,r,o)):this.storeArrays(l,m,r);o+=p;this.mActiveFrames++}};AnimData.prototype.activate=function(){this.mDifftime=0;this.mApp.anims().incCount()};AnimData.prototype.process2=function(g,k){this.mDifftime+=k;if(this.mDifftime>=this.mAnimDelay){this.mAnimRepeat--;if(this.mAnimRepeat>0){this.mDifftime=0;if(this.mRepeatDir==1){var l=this.mStart;this.mStart=this.mEnd;this.mEnd=l;this.mRepeatDir=-1}else{if(this.mRepeatDir==-1){l=this.mStart,this.mStart=this.mEnd,this.mEnd=l,this.mRepeatDir=1}}return !1}this.mDifftime=0;this.endAnimation(g);this.mCallback!=void 0&&this.mCallback.length>0&&this.mApp.execScript(this.mCallback);return !0}var j=this.mDifftime/this.mAnimDelay;if(this.mActiveFrames==0){this.calcLinearData(this.mStart,this.mEnd,j,g)}else{var l=this.mActiveFrames+1,j=Math.floor(j*l),h=this.mAnimDelay/l,h=(this.mDifftime-j*h)/h;j==0?this.calcLinearData(this.mStart,this.mFrames[0],h,g):j>=l-1?this.calcLinearData(this.mFrames[this.mFrames.length-1],this.mEnd,h,g):j<this.mFrames.length&&this.calcLinearData(this.mFrames[j-1],this.mFrames[j],h,g)}return !1};AnimData.prototype.endAnimation=function(c){this.mBackupSaved==!0?(c.copy(this.mSavedRef),c.copyMat(this.mSavedRef)):(this.mEnd.mTranslateAnim==!0&&(c.mPosition[0]=this.mEnd.mTranslate[0],c.mPosition[1]=this.mEnd.mTranslate[1],c.mPosition[2]=this.mEnd.mTranslate[2]),this.mEnd.mTranslate2Anim==!0&&(c.mAreaPosition[0]=this.mEnd.mTranslate2[0],c.mAreaPosition[1]=this.mEnd.mTranslate2[1],c.mAreaPosition[2]=this.mEnd.mTranslate2[2]),this.mEnd.mRotate2Anim==!0&&(c.mAreaRotation[0]=this.mEnd.mRotate2[0],c.mAreaRotation[1]=this.mEnd.mRotate2[1],c.mAreaRotation[2]=this.mEnd.mRotate2[2]),this.mEnd.mRotateAnim==!0&&(c.mRotation[0]=this.mEnd.mRotate[0],c.mRotation[1]=this.mEnd.mRotate[1],c.mRotation[2]=this.mEnd.mRotate[2]),this.mEnd.mScaleAnim==!0&&(c.mScale[0]=this.mEnd.mScale[0],c.mScale[1]=this.mEnd.mScale[1],c.mScale[2]=this.mEnd.mScale[2]));c.set();if(this.mOnEndHide==!0){c.mEnabled=!1}this.mAnimDelay=-1;this.mRepeatDir=0;this.mAnimRepeat=1;this.mCallback="";this.mActiveFrames=0;this.mOnEndHide=this.mBackupSaved=!1;this.mApp.anims().decCount()};AnimData.prototype.calcLinearData=function(f,h,j,g){f.mTranslateAnim==!0&&(g.mPosition[0]=(h.mTranslate[0]-f.mTranslate[0])*j+f.mTranslate[0],g.mPosition[1]=(h.mTranslate[1]-f.mTranslate[1])*j+f.mTranslate[1],g.mPosition[2]=(h.mTranslate[2]-f.mTranslate[2])*j+f.mTranslate[2]);f.mTranslate2Anim==!0&&(g.mAreaPosition[0]=(h.mTranslate2[0]-f.mTranslate2[0])*j+f.mTranslate2[0],g.mAreaPosition[1]=(h.mTranslate2[1]-f.mTranslate2[1])*j+f.mTranslate2[1],g.mAreaPosition[2]=(h.mTranslate2[2]-f.mTranslate2[2])*j+f.mTranslate2[2]);f.mRotate2Anim==!0&&(g.mAreaRotation[0]=(h.mRotate2[0]-f.mRotate2[0])*j+f.mRotate2[0],g.mAreaRotation[1]=(h.mRotate2[1]-f.mRotate2[1])*j+f.mRotate2[1],g.mAreaRotation[2]=(h.mRotate2[2]-f.mRotate2[2])*j+f.mRotate2[2]);f.mRotateAnim==!0&&(g.mRotation[0]=(h.mRotate[0]-f.mRotate[0])*j+f.mRotate[0],g.mRotation[1]=(h.mRotate[1]-f.mRotate[1])*j+f.mRotate[1],g.mRotation[2]=(h.mRotate[2]-f.mRotate[2])*j+f.mRotate[2]);f.mScaleAnim==!0&&(g.mScale[0]=(h.mScale[0]-f.mScale[0])*j+f.mScale[0],g.mScale[1]=(h.mScale[1]-f.mScale[1])*j+f.mScale[1],g.mScale[2]=(h.mScale[2]-f.mScale[2])*j+f.mScale[2]);g.set()};function AnimData(c,e){this.mDifftime=0;this.mAnimDelay=1;this.mRepeatDir=0;this.mAnimRepeat=1;this.mActiveFrames=0;this.mSavedRef=void 0;this.mOnEndHide=this.mBackupSaved=!1;this.mCurrDestCol=this.mCurrSourceCol=this.mCurrSourceRef=void 0;this.mTimeStep=this.mSteps=0;this.mColorPool=void 0;this.mRefCount=0;this.mActive=!1;this.mId=0;this.mMaxFrames=16;this.mRepeat=1;this.mToFinish=!1;this.mType=AnimData_Type.REF;this.mId=c;this.mApp=e}AnimData.prototype.setDelay=function(c,e){this.mAnimDelay=c;e<0?(this.mAnimRepeat=e*-1,this.mRepeatDir=1):this.mAnimRepeat=e;if(this.mAnimDelay!=-1){this.mAnimDelay=this.mAnimDelay}};AnimData.prototype.saveBackup=function(c,e){if(this.mSavedRef==void 0){this.mSavedRef=new GameonModelRef(void 0)}this.mSavedRef.copy(c);this.mSavedRef.copyMat(c);this.mBackupSaved=!0;this.mOnEndHide=e};AnimData.prototype.setActive=function(){this.mActive=active};AnimData.prototype.finish=function(){this.mRepeat=1;this.mToFinish=!0};AnimData.prototype.apply=function(){this.mSteps=this.mRefCount-1;this.mSteps<=0?reset():(this.mTimeStep=diff=this.mAnimDelay/this.mSteps,this.mActive=!0,this.mDifftime=0)};AnimData.prototype.process=function(c){this.mDifftime+=c;if(this.mToFinish||this.mDifftime>=this.mAnimDelay){if(this.mRepeat--,this.mRepeat<=0){return this.mType==AnimData_Type.COLOR&&this.setColorEnd(gl),this.reset(),!1}else{this.mDifftime=0}}perct=this.setRef(this.mDifftime);this.mType==AnimData_Type.COLOR&&this.calcLinearColor(gl,this.mCurrSourceCol,this.mCurrDestCol,perct);return !0};AnimData.prototype.addFrameColor=function(c){if(this.mColorPool==void 0){this.mColorPool=[];for(var e=0;e<this.mMaxFrames;e++){this.mColorPool.push(new GLColor(0))}}this.mRefCount<this.mMaxFrames&&(e=this.mColorPool[this.mRefCount++],this.copyColor(c,e));this.mType=AnimData_Type.COLOR};AnimData.prototype.cancelAnimation=function(c){this.endAnimation(c)};function AnimFactory_AnimFrame(){this.operation=this.translate2=this.rotate2=this.translate=this.scale=this.rotate=void 0;this.translate2Active=this.translateActive=this.scaleActive=this.rotate2Active=this.rotateActive=!1}function AnimFactory_AnimType(){this.frames=this.id=void 0;this.repeat=1;this.delay=1000}AnimFactory.prototype.processAnimFrame=function(e,f){var g=0;if(e.rotate!=void 0){g=e.rotate,f.rotate=[0,0,0],g=ServerkoParse.parseFloatArray(f.rotate,g),f.rotateActive=g>0}if(e.scale!=void 0){g=e.scale,f.scale=[0,0,0],g=ServerkoParse.parseFloatArray(f.scale,g),f.scaleActive=g>0}if(e.translate!=void 0){g=e.translate,f.translate=[0,0,0],g=ServerkoParse.parseFloatArray(f.translate,g),f.translateActive=g>0}if(e.rotate2!=void 0){g=e.rotate2,f.rotate2=[0,0,0],g=ServerkoParse.parseFloatArray(f.rotate2,g),f.rotate2Active=g>0}if(e.translate2!=void 0){g=e.translate2,f.translate2=[0,0,0],g=ServerkoParse.parseFloatArray(f.translate2,g),f.translate2Active=g>0}if(e.operation!=void 0){g=e.operation,f.operation=g}};AnimFactory.prototype.buildObjectAdata=function(k,q,r,p,o,n){var m=k.getAnimData(this.mApp),l=Array(32),o=ServerkoParse.parseFloatArray(l,o);m.setDelay(r,p);m.setup(q,l,o,k);m.setCallback(n);k.activateAnim()};function AnimFactory(c){this.mApp=c;this.mFallback=new AnimData(255,c);this.mAnimPool=[];for(c=0;c<4;c++){this.mAnimPool.push(new AnimData(c,this.mApp))}this.mCount=0;this.mAnimations={}}AnimFactory.prototype.get=function(c){if(c!=void 0&&c.mCurrentAnim!=void 0){c.mCurrentAnim.process(void 0,c.mCurrentAnim.mEndtime,!1),c.mCurrentAnim=void 0}for(var e=0;e<this.mAnimPool.length;e++){if(this.mAnimPool[e].mActive==!1){this.mAnimPool[e].mActive=!0;this.mCount++;this.mAnimPool[e].mOwner=c;if(c!=void 0){c.mCurrentAnim=this.mAnimPool[e]}return this.mAnimPool[e]}}return this.mFallback};AnimFactory.prototype.process=function(c){for(var e=0;e<this.mAnimPool.length;e++){this.mAnimPool[e].mActive==!0&&this.mAnimPool[e].process(c,!0)}};AnimFactory.prototype.add=function(c){c.mActive=!0};AnimFactory.prototype.createAnimColor=function(g,k,l,j){var h=this.get(void 0);h.setDelay(g,1);h.addFrameColor(k);h.addFrameColor(l);j!=void 0&&h.addFrameColor(j);h.apply()};AnimFactory.prototype.move=function(f,h,j,g){this.animObject("move",f,h,j,g)};AnimFactory.prototype.rotate=function(f,h,j,g){this.animObject("rotate",f,h,j,g)};AnimFactory.prototype.initAnimation=function(g){var k;k=g.frames;var l=new AnimFactory_AnimType;l.frames=[];if(g.id!=void 0){l.id=g.id}if(g.delay!=void 0){l.delay=parseInt(g.delay)}if(g.repeat!=void 0){l.repeat=parseInt(g.repeat)}for(g=0;g<k.length;g++){var j=k[g],h=new AnimFactory_AnimFrame;this.processAnimFrame(j,h);l.frames.push(h)}this.mAnimations[l.id]=l};AnimFactory.prototype.animObject=function(k,q,r,p,o){if(this.mAnimations[k]!=void 0){var q=this.mApp.mObjectsFact.mItems[q].mModelRef,n=[0,0],p=ServerkoParse.parseIntArray(n,p),k=this.mAnimations[k],m=k.repeat,l=k.delay;p>=1&&(l=n[0]);p==2&&(m=n[1]);this.buildObjectAdata(q,k,l,m,r,o)}};AnimFactory.prototype.animRef=function(k,q,r,p){if(this.mAnimations[k]!=void 0){var o=[0,0],k=this.mAnimations[k],n=r.getAnimData(this.mApp),m=k.repeat,l=k.delay,p=ServerkoParse.parseIntArray(o,p);p>=1&&(l=o[0]);p==2&&(m=o[1]);n.setDelay(l,m);n.setup2(k,q,r);r.activateAnim()}};AnimFactory.prototype.createAnim=function(k,q,r,p,o,n,m,l){o=r.getAnimData(this.mApp);n=this.mAnimations.transform;o.setDelay(p,m);o.setup2(n,k,q);o.saveBackup(r,l);r.activateAnim()};AnimFactory.prototype.getCount=function(){return this.mCount};AnimFactory.prototype.decCount=function(){this.mCount--};AnimFactory.prototype.incCount=function(){this.mCount++};function AreaIndexPair(){this.mArea="";this.mIndex=0;this.mOnFocusGain=this.mOnFocusLost=this.mOnclick="";this.mIntData=this.mDist=0}function GLColor(f,h,j,g){this.alpha=this.blue=this.green=this.red=1;if(arguments.length==1){this.red=(f>>16&255)/255,this.green=(f>>8&255)/255,this.blue=(f&255)/255,this.alpha=(f>>24&255)/255}else{if(arguments.length==3){this.red=f,this.green=h,this.blue=j,this.alpha=1}else{if(arguments.length==4){this.red=f,this.green=h,this.blue=j,this.alpha=g}}}}GLColor.prototype.equals=function(){return red==color.red&&green==color.green&&blue==color.blue&&alpha==color.alpha};function GLVertex(h,m,n,l,k,j){this.tv=this.tu=this.z=this.y=this.x=0;this.index=-1;this.alpha=this.blue=this.green=this.red=1;if(arguments.length==6){this.x=h,this.y=m,this.z=n,this.tu=l,this.tv=k,this.index=j}}GLVertex.prototype.equals=function(c){return this.x==c.x&&this.y==c.y&&this.z==c.z&&c.tu==tu&&c.tv==tv&&alpha==c.alpha&&red==c.red&&green==c.green&&blue==c.blue};GLVertex.prototype.put=function(e,f,g){e.push(this.x);e.push(this.y);e.push(this.z);f.push(this.red);f.push(this.green);f.push(this.blue);f.push(this.alpha);g.push(this.tu);g.push(this.tv)};GLVertex.prototype.put2=function(c,e){c.push(this.x);c.push(this.y);c.push(this.z);e.push(this.red);e.push(this.green);e.push(this.blue);e.push(this.alpha)};GLVertex.prototype.putText=function(g,k,l,j,h){tu1=this.tu/j+k/j;tv1=this.tv/h+l/h;g.push(tu1);g.push(tv1)};GLVertex.prototype.putTextHalf=function(g,k,l,j,h){tu1=this.tu/j+k/j+1;tv1=this.tv/h+l/h+1;g.push(tu1);g.push(tv1)};function GLShape(c){this.mWorld=c;this.mFaceList=[];this.mVertexList=[]}GLShape.prototype.addFace=function(c){this.mFaceList.push(c)};GLShape.prototype.setFaceColor=function(c,e){this.mFaceList[c].setColor(e)};GLShape.prototype.putIndices=function(c){for(var e=0;e<this.mFaceList.length;e++){this.mFaceList[e].putIndices(c)}};GLShape.prototype.getIndexCount=function(){for(var c=0,e=0;e<this.mFaceList.length;e++){c+=this.mFaceList[e].getIndexCount()}return c};GLShape.prototype.addVertex=function(k,q,r,p,o,n){for(var m=0;m<this.mVertexList.length;m++){var l=this.mVertexList[m];if(l.x==k&&l.y==q&&l.z==r&&l.tu==p&&l.tv==o&&l.red==n.red&&l.green==n.green&&l.blue==n.blue&&l.alpha==n.alpha){return l}}l=this.mWorld.addVertex(k,q,r,p,o);l.red=n.red;l.green=n.green;l.blue=n.blue;l.alpha=n.alpha;this.mVertexList.push(l);return l};function GLFace(f,h,j,g){this.mVertexList=[];this.mColor=new GLColor;arguments.length==3?(this.addVertex(f),this.addVertex(h),this.addVertex(j)):arguments.length==4&&(this.addVertex(f),this.addVertex(h),this.addVertex(j),this.addVertex(g))}GLFace.prototype.addVertex=function(c){this.mVertexList.push(c)};GLFace.prototype.setColor=function(c){var e=this.mVertexList.length-1;if(!(e<2)){e=this.mVertexList[e],e.red=c.red,e.green=c.green,e.blue=c.blue,e.alpha=c.alpha}this.mColor=c};GLFace.prototype.getIndexCount=function(){return(this.mVertexList.length-2)*3};GLFace.prototype.putIndices=function(h){for(var m=this.mVertexList.length-1,n=this.mVertexList[0],l=this.mVertexList[m],k=1;k<m;k++){var j=this.mVertexList[k];h.push(n.index);h.push(j.index);h.push(l.index);n=j}};glModelLastText=void 0;Function.prototype.inheritsFrom=function(c){c.constructor==Function?(this.prototype=new c,this.prototype.constructor=this,this.prototype.parent=c.prototype):(this.prototype=c,this.prototype.constructor=this,this.prototype.parent=c);return this};GLModel={isValid:function(){return this.mVertexList.length>0},addShape:function(c){this.mShapeList.push(c);this.mIndexCount+=c.getIndexCount()},generate:function(f){if(this.mGenerated!=!0){this.mGenerated=!0;this.vertexBuffer=[];this.colorBuffer=[];this.textureBuffer=[];this.indexBuffer=[];this.mTextureWDiv=1/this.mTextureW;this.mTextureHDiv=1/this.mTextureH;if(this.mTextureW==1&&this.mTextureH==1){for(var h=0;h<this.mVertexList.length;h++){var j=this.mVertexList[h];j.put(this.vertexBuffer,this.colorBuffer,this.textureBuffer)}}else{for(h=0;h<this.mVertexList.length;h++){j=this.mVertexList[h],j.put2(this.vertexBuffer,this.colorBuffer)}for(var g=this.mVertexList.length/2,h=0;h<this.mVertexList.length;h++){j=this.mVertexList[h],this.mForceHalfTexturing&&h>=g?j.putTextHalf(this.textureBuffer,0,0,this.mTextureW,this.mTextureH):j.putText(this.textureBuffer,0,0,this.mTextureW,this.mTextureH)}}for(h=0;h<this.mShapeList.length;h++){this.mShapeList[h].putIndices(this.indexBuffer)}this.mColorBuffer=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.mColorBuffer);f.bufferData(f.ARRAY_BUFFER,new Float32Array(this.colorBuffer),f.STATIC_DRAW);this.mColorBuffer.itemSize=4;this.mColorBuffer.numItems=this.vertexBuffer.length/4;this.mVertexBuffer=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.mVertexBuffer);f.bufferData(f.ARRAY_BUFFER,new Float32Array(this.vertexBuffer),f.STATIC_DRAW);this.mVertexBuffer.itemSize=3;this.mVertexBuffer.numItems=this.vertexBuffer.length/3;this.mIndexBuffer=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.mIndexBuffer);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indexBuffer),f.STREAM_DRAW);this.mIndexBuffer.itemSize=1;this.mIndexBuffer.numItems=this.indexBuffer.length;this.mTextureBuffer=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,this.mTextureBuffer);f.bufferData(f.ARRAY_BUFFER,new Float32Array(this.textureBuffer),f.STATIC_DRAW);this.mTextureBuffer.itemSize=2;this.mTextureBuffer.numItems=this.textureBuffer.length/2;this.mEnabled=!0;if(this.mTextureID==void 0){this.mTextureID=this.mApp.textures().get(TextureFactory_Type.DEFAULT)}}},addVertex:function(g,k,l,j,h){j=new GLVertex(g,k,l,j,h,this.mVertexList.length);this.mVertexList.push(j);g<this.mBBoxMin[0]&&(this.mBBoxMin[0]=g);k<this.mBBoxMin[1]&&(this.mBBoxMin[1]=k);l<this.mBBoxMin[2]&&(this.mBBoxMin[2]=l);g>this.mBBoxMax[0]&&(this.mBBoxMax[0]=g);k>this.mBBoxMax[1]&&(this.mBBoxMax[1]=k);l>this.mBBoxMax[2]&&(this.mBBoxMax[2]=l);return j},setupRef:function(e){if(this.mTextureID!=void 0){e.bindTexture(e.TEXTURE_2D,this.mTextureID),glModelLastText=this.mTextureID}e.bindBuffer(e.ARRAY_BUFFER,this.mVertexBuffer);e.vertexAttribPointer(2,3,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.mTextureBuffer);e.vertexAttribPointer(1,2,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.mColorBuffer);e.vertexAttribPointer(0,4,e.FLOAT,!1,0,0);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.mIndexBuffer);var f=Math.floor(this.mForcedOwner/this.mTextureW)*this.mTextureHDiv,g=Math.floor(this.mForcedOwner%this.mTextureW)*this.mTextureWDiv;e.uniform2f(e.getUniformLocation(e.program,"texOffsetF"),g,f)},drawRef:function(f,h){if(this.mEnabled){h.animating()==!0&&h.animate(this.mApp.mFrameDeltaTime);if(!h.getVisible()||h.mEnabled==!1){return !0}h!=void 0&&h.mMatrix.setUniform(f,f.u_modelViewMatrixLoc,!1);if(h.mTransformOwner){if(h.mOwner>=0&&h.mOwner<h.mOwnerMax){var j=Math.floor(h.mOwner/this.mTextureW)*this.mTextureHDiv,g=Math.floor(h.mOwner%this.mTextureW)*this.mTextureWDiv;f.uniform2f(f.getUniformLocation(f.program,"texOffset"),g,j)}}else{f.uniform2f(f.getUniformLocation(f.program,"texOffset"),0,0)}f.drawElements(f.TRIANGLES,this.mIndexCount,f.UNSIGNED_SHORT,0)}},setPosition:function(e,f,g){this.mPosition[0]=e;this.mPosition[1]=f;this.mPosition[2]=g;this.mTransform=!0},setScale:function(e,f,g){this.mScale[0]=e;this.mScale[1]=f;this.mScale[2]=g;this.mTransform=!0},setTextureOffset:function(c,e){this.mTextureW=parseFloat(c);this.mTextureH=parseFloat(e);this.mTextureOffset=0},reset:function(){generate()},setupOffset:function(c){this.mVertexOffset=c*12;this.mColorOffset=c*16},forceIndexCount:function(c){this.mIndexCount=c}};function StringString(){this.b=this.a=""}TextureFactory_Type={DEFAULT:0,FONT:1};function TextureFactory(c){this.mTextureFont=this.mTextureDefault=1;this.mTextures={};this.mTextureIds=[];this.mInfos=[];this.mApp=c;this.mCp=this.mV2=this.mU2=this.mV1=this.mU1=0}TextureFactory.prototype.init=function(e){this.clear();this.mTextureDefault=this.loadTextureFromFile(e,"whitesys.png",!0);this.mTextureFont=this.loadTextureFromFile(e,"fontsys.png",!0);for(var f=0;f<this.mInfos.length;f++){var g=this.mInfos.get(f);this.newTexture(e,g.b,g.a,!1)}};TextureFactory.prototype.handleLoadedTexture=function(c){gl.bindTexture(gl.TEXTURE_2D,c);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,c.image);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.bindTexture(gl.TEXTURE_2D,null)};TextureFactory.prototype.loadTextureFromFile=function(f,h,j){var g=f.createTexture();g.image=new Image;g.image.callback=this;g.image.onload=function(){this.callback.mApp.mDataChange=!0;this.callback.handleLoadedTexture(g)};g.image.src=j==!0?"qres/"+h:"res/"+h;return g};TextureFactory.prototype.get=function(c){switch(c){case TextureFactory_Type.FONT:return this.mTextureFont}return this.mTextureDefault};TextureFactory.prototype.getTexture=function(c){return this.mTextures[c]!=void 0?this.mTextures[c]:this.mTextureDefault};TextureFactory.prototype.clear=function(){this.mTextures={};this.mInfos=[]};TextureFactory.prototype.newTexture=function(f,h,j,g){f=this.loadTextureFromFile(f,j,!1);if(f!=void 0){this.mTextures[h]=f;if(g){g=new StringString,g.a=j,g.b=h,this.mInfos.push(g)}if(h=="font"){this.mTextureFont=f}}};TextureFactory.prototype.setParam=function(g,k,l,j,h){this.mU1=g;this.mU2=l;this.mV1=k;this.mV2=j;this.mCp=h};TextureFactory.prototype.initTextures=function(c){for(var c=c.texture,e=0;e<c.length;e++){this.processTexture(c[e])}};TextureFactory.prototype.processTexture=function(c){this.newTexture(gl,c.name,c.file,!0)};function ColorFactory(){var c=200/255;this.red=new GLColor(1,0,0);this.green=new GLColor(0,1,0);this.blue=new GLColor(0,0,1);this.yellow=new GLColor(1,1,0);this.transparent=new GLColor(1,1,1,1);this.redL=new GLColor(1,c,c,0.5);this.greenL=new GLColor(c,1,c,0.5);this.blueL=new GLColor(c,c,1,0.5);this.yellowL=new GLColor(1,1,c,0.5);this.orange=new GLColor(1,0.5,0);this.white=new GLColor(1,1,1);this.gray=new GLColor(c,c,c);this.black=new GLColor(0,0,0);this.grayL=new GLColor(0.5,0.5,0.5);this.magnentaL=new GLColor(c,0.5,c);this.brownL=new GLColor(c,0.5,0);this.magnenta=new GLColor(1,0.5,1);this.brown=new GLColor(1,0.5,0)}ColorFactory.prototype.getPlayerColor=function(c){switch(c){case 0:return this.gray;case 1:return this.red;case 4:return this.blue;case 2:return this.green;case 3:return this.orange}return this.white};ColorFactory.prototype.getColor=function(j){if(j.search("player")==0){var o=j.substr(6);return this.getPlayerColorFore(parseInt(o))}try{var p=parseInt(j.substring(0,2),16)/255,n=parseInt(j.substring(2,4),16)/255,m=parseInt(j.substring(4,6),16)/255,l=parseInt(j.substring(6,8),16)/255;return o=new GLColor(n,m,l,p)}catch(k){return this.white}};ColorFactory.prototype.getPlayerColorFore=function(c){switch(c){case 1:return this.redL;case 4:return this.blueL;case 2:return this.greenL;case 3:return this.yellowL}return this.white};ColorFactory.prototype.getColorId=function(c){switch(c){case 1:return this.red;case 2:return this.green;case 3:return this.blue;case 4:return this.yellow;case 5:return this.magnenta;case 6:return this.brown;case 7:return this.black;case 8:return this.gray;case 9:return this.redL;case 10:return this.greenL;case 11:return this.blueL;case 12:return this.yellowL;case 13:return this.magnentaL;case 14:return this.brownL;case 15:return this.grayL}return this.white};function SoundFactory(){this.mSoundPoolMap={};this.mContext=void 0;this.mMute=this.mLastStream=0;this.mInit=!1;this.mVolume=50}SoundFactory.prototype.init=function(c){this.mInit=!1;this.mLastStream=0;this.mContext=c.context();this.mInit=!0;this.mApp=c};SoundFactory.prototype.playSound=function(c){if(this.mInit&&this.mMute!=1&&this.mVolume>0&&(c=this.mSoundPoolMap[c],c!=void 0)){c.pause(),c.volume=this.mVolume,c.play()}};SoundFactory.prototype.stop=function(){if(this.mLastStream>0){this.mLastStream=0}};SoundFactory.prototype.loadFromFile=function(e,f){var g=new Audio("res/"+f);g!=void 0&&(this.mSoundPoolMap[e]=g)};SoundFactory.prototype.onPlaySound=function(c,e){this.playSound(e)};SoundFactory.prototype.setVolume=function(c){this.mVolume=c/100};SoundFactory.prototype.newSound=function(c,e){this.loadFromFile(c,e+".mp3")};SoundFactory.prototype.setMute=function(c){this.mMute=c};function GameonModelData(){}GameonModelData_Type={NONE:0,CUBE:1,SPHERE:2,CARD52:4,CYLINDER:5,BACKGROUND:6,BACKIMAGE:7};GameonModelData.modelSphere=[[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.232541,0.92427],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.750464,0.30714],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.797912,0.244005],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.750464,0.30714],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.232541,0.92427],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.841254,0.153111],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.797912,0.244005],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,0.049127],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.841254,0.153111],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,0.049127],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,0.049127],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,0.049127],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.105629,0.153111],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.05324,0.049127],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.105629,0.153111],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.062287,0.244005],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.105629,0.153111],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.062287,0.244005],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.13227,0.876859],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.13227,0.876859],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.232541,0.92427],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.090344,0.783541],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.090344,0.783541],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.13227,0.876859],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.068651,0.675514],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.068651,0.675514],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.090344,0.783541],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.052794,0.558604],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.052794,0.558604],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.068651,0.675514],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.037002,0.434655],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.037002,0.434655],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.052794,0.558604],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.014839,0.30714],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.062287,0.244005],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.014839,0.30714],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.037002,0.434655],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.750464,0.30714],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.772627,0.434655],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.772627,0.434655],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.772627,0.434655],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.788419,0.558604],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.788419,0.558604],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.788419,0.558604],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.804276,0.675514],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.804276,0.675514],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.804276,0.675514],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.825969,0.783541],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.825969,0.783541],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.825969,0.783541],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.867895,0.876859],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.867895,0.876859],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.867895,0.876859],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.968166,0.92427],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.968166,0.92427],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759]];GameonModelData.modelCube=[[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[0,0],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[1,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[0,1],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[1,0],[-0.5,0.5,-0.5],[-0.577349,0.577349,-0.577349],[1,1],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[0,1],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[0,0],[-0.5,-0.5,0.5],[-0.408246,-0.408246,0.816492],[1,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[1,1],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[0,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[1,1],[-0.5,0.5,-0.5],[-0.577349,0.577349,-0.577349],[0,1],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[0,0],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[1,0],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[0,1],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[1,0],[-0.5,-0.5,0.5],[-0.408246,-0.408246,0.816492],[1,1],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[0,1],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[0,0],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[1,0],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[0,1],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[1,0],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[1,1],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[0,1],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[0,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[1,0],[-0.5,-0.5,0.5],[-0.408246,-0.408246,0.816492],[1,1],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[0,0],[-0.5,-0.5,0.5],[-0.408246,-0.408246,0.816492],[1,1],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[0,1],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[0,0],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[1,0],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[1,1],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[0,0],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[1,1],[-0.5,0.5,-0.5],[-0.577349,0.577349,-0.577349],[0,1]];GameonModelData.modelCyl=[[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,0.851614],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.967106,0.688332],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.967106,0.688332],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.858005,0.851614],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.967106,0.688332],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[1.005417,0.495729],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.5,-0.000001,0.05],[0.82577,-0.05475,0.561296],[1.005417,0.495728],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.967106,0.688332],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[1.005417,0.495729],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.967106,0.303125],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.967106,0.303124],[0.5,-0.000001,0.05],[0.82577,-0.05475,0.561296],[1.005417,0.495728],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.967106,0.303125],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.858005,0.139843],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,0.139843],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.967106,0.303124],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.858005,0.139843],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,0.030742],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,0.030742],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,0.139843],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,0.030742],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.007569],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.000001,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,-0.007569],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,0.030742],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.007569],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,0.030742],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,0.030742],[-0.000001,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,-0.007569],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,0.030742],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,0.139843],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.146233,0.139844],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,0.030742],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,0.139843],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.037133,0.303125],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.037132,0.303126],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.146233,0.139844],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.037133,0.303125],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[-0.001179,0.495729],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.5,0.000001,0.05],[-0.82577,0.05475,0.561296],[-0.001179,0.49573],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.037132,0.303126],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[-0.001179,0.495729],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.037133,0.688332],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.037133,0.688334],[-0.5,0.000001,0.05],[-0.82577,0.05475,0.561296],[-0.001179,0.49573],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.037133,0.688332],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.146234,0.851614],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,0.851615],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.037133,0.688334],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.146234,0.851614],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,0.960716],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,0.960716],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,0.851615],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,0.960716],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,0.999027],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.000002,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,0.999027],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,0.960716],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,0.999027],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,0.960715],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,0.960715],[0.000002,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,0.999027],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,0.960715],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,0.851614],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.858005,0.851614],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,0.960715],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.858005,1.001],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,-0.005596],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,1.001],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,-0.005596],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,-0.005596],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,1.001],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,-0.005596],[0.000002,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,1.001],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,-0.005596],[0.000002,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,1.001],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,1.001],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,-0.005596],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,-0.005596],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,1.001],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,-0.005596],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,1.001],[0.000002,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,1.001],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,-0.005596],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.146234,-0.005596],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,1.001],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,-0.005596],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,1.001],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,1.001],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,-0.005596],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.682857,-0.005596],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.682858,1.001],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.846139,-0.005596],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.682858,1.001],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.84614,1.001],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.846139,-0.005596],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[0.490253,-0.005596],[-0.5,0.000001,0.05],[-0.82577,0.05475,0.561296],[0.490255,1.001],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.682857,-0.005596],[-0.5,0.000001,0.05],[-0.82577,0.05475,0.561296],[0.490255,1.001],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.682858,1.001],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.682857,-0.005596],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.29765,-0.005596],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.297651,1.001],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[0.490253,-0.005596],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.297651,1.001],[-0.5,0.000001,0.05],[-0.82577,0.05475,0.561296],[0.490255,1.001],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[0.490253,-0.005596],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.134368,-0.005596],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.134369,1.001],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.29765,-0.005596],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.134369,1.001],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.297651,1.001],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.29765,-0.005596],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,-0.005596],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,1.001],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,-0.005596],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,1.001],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.146233,1.001],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,-0.005596],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.005596],[-0.000001,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,1.001],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,-0.005596],[-0.000001,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,1.001],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,1.001],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,-0.005596],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,-0.005596],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,1.001],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.005596],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,1.001],[-0.000001,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,1.001],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.005596],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.858005,-0.005596],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,1.001],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,-0.005596],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,1.001],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,1.001],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,-0.005596],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.29765,-0.005596],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.297649,1.001],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.134368,-0.005596],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.297649,1.001],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.134367,1.001],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.134368,-0.005596],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[0.490253,-0.005596],[0.5,-0.000001,0.05],[0.82577,-0.05475,0.561296],[0.490253,1.001],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.29765,-0.005596],[0.5,-0.000001,0.05],[0.82577,-0.05475,0.561296],[0.490253,1.001],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.297649,1.001],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.29765,-0.005596],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.682857,-0.005596],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.682857,1.001],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[0.490253,-0.005596],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.682857,1.001],[0.5,-0.000001,0.05],[0.82577,-0.05475,0.561296],[0.490253,1.001],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[0.490253,-0.005596],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.846139,-0.005596],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.846138,1.001],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.682857,-0.005596],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.846138,1.001],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.682857,1.001],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.682857,-0.005596]];GameonModelData.getData=function(c){switch(c){case GameonModelData_Type.CUBE:return GameonModelData.modelCube;case GameonModelData_Type.CYLINDER:return GameonModelData.modelCyl;case GameonModelData_Type.SPHERE:return GameonModelData.modelSphere}};function ItemFactory(c){this.mApp=c;this.mInitialized=!1;this.mModels={};this.mWorld=c.mWorld}ItemFactory.prototype.create=function(){};ItemFactory.prototype.createItem=function(g,k){var l=g.split("."),j=this.mModels[l[0]];if(j!=void 0){var h=-1;l.length>1&&(h=parseInt(l[1]));return this.createItemFromModel(j,h,k)}};ItemFactory.prototype.createItemFromModel=function(e,f,g){g==void 0&&(g=new LayoutItem(this.mApp));g.mType=e.mModelTemplate;g.mModel=e;g.mItemID=f;g.mOwner=f;g.mOwnerMax=e.mSubmodels;return g};ItemFactory.prototype.createCard52=function(e,f,g){f=g;f==void 0&&(f=new LayoutItem);f.mType=GameonModelData_Type.CARD52;f.mModel=this.mCard52;f.mItemID=e;f.mOwner=e;f.mOwnerMax=64;return f};ItemFactory.prototype.newFromTemplate=function(e,f){var g=this.getFromTemplate(e,f);g!=void 0&&(this.mModels[e]=g)};ItemFactory.prototype.getFromTemplate=function(e,f){var g=new GameonModel(f,this.mApp);if(f=="cube"){return g=this.createFromType(GameonModelData_Type.CUBE,this.mApp.mColors.white,this.mApp.mTextures.mTextureDefault),g.mModelTemplate=GameonModelData_Type.CUBE,g.mIsModel=!0,g}else{if(f=="sphere"){return g=this.createFromType(GameonModelData_Type.SPHERE,this.mApp.mColors.white,this.mApp.mTextures.mTextureDefault),g.mModelTemplate=GameonModelData_Type.SPHERE,g.mIsModel=!0,g}}if(f=="cylinder"){g.createModel(GameonModelData_Type.CYLINDER,TextureFactory.mTextureDefault),g.mModelTemplate=GameonModelData_Type.SFIGURE,g.mIsModel=!0}else{if(f=="plane"){g.createPlane(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.white),g.mModelTemplate=GameonModelData_Type.SFIGURE,g.mIsModel=!0}else{if(f=="dicemodel"){g.createModel(GameonModelData_Type.DICE,TextureFactory.mTextureDefault),g.mModelTemplate=GameonModelData_Type.DICE,g.mIsModel=!0}else{if(f=="card52"){g.createCard2(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.transparent),g.mModelTemplate=GameonModelData_Type.CARD52,g.mForceHalfTexturing=!0,g.mForcedOwner=32,g.mHasAlpha=!0,g.mIsModel=!0}else{if(f=="cardbela"){g.createCard(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.transparent),g.mModelTemplate=GameonModelData_Type.CARD52,g.mForceHalfTexturing=!0,g.mForcedOwner=32,g.mHasAlpha=!0,g.mIsModel=!0}else{if(f=="background"){g.createPlane(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.white),g.mModelTemplate=GameonModelData_Type.BACKGROUND,g.mHasAlpha=!0,g.mIsModel=!1}else{return}}}}}}return g};ItemFactory.prototype.setTexture=function(j,o){var p=this.mModels[j];if(p!=void 0){var n=0,m=0,l=void 0,k=o.split(";");k.length==1?l=o:(l=k[0],m=k[1].split(","),n=m[0],m=m[1]);p.mTextureID=this.mApp.mTextures.getTexture(l);p.setTextureOffset(n,m)}};ItemFactory.prototype.createModel=function(c){c=this.mModels[c];if(c!=void 0){c.mIsModel=!0,this.mWorld.add(c)}};ItemFactory.prototype.setSubmodels=function(f,h){var j=this.mModels[f];if(j!=void 0){var g=[0,0];ServerkoParse.parseIntArray(g,h)==1?j.mSubmodels=g[0]:(j.mSubmodels=g[0],j.mForcedOwner=g[1])}};ItemFactory.prototype.createFromType=function(f,h,j){var g=new GameonModel("template",this.mApp);if(f==GameonModelData_Type.SFIGURE){g.createModel(GameonModelData_Type.CYLINDER,TextureFactory.mTextureDefault),g.mModelTemplate=GameonModelData_Type.SFIGURE,g.mIsModel=!0}else{if(f==GameonModelData_Type.CUBE){g.createModel(GameonModelData_Type.CUBE,TextureFactory.mTextureDefault),g.mModelTemplate=GameonModelData_Type.CUBE,g.mIsModel=!0}else{if(f==GameonModelData_Type.SPHERE){g.createModel(GameonModelData_Type.SPHERE,TextureFactory.mTextureDefault),g.mModelTemplate=GameonModelData_Type.SPHERE,g.mIsModel=!0}else{if(f==GameonModelData_Type.CARD52){g.createCard2(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.transparent),g.mModelTemplate=GameonModelData_Type.CARD52,g.mForceHalfTexturing=!0,g.mForcedOwner=32,g.mHasAlpha=!0,g.mIsModel=!0}else{if(f==GameonModelData_Type.BACKGROUND){g.createPlane(-0.5,-0.5,0,0.5,0.5,0,h),g.mModelTemplate=GameonModelData_Type.BACKGROUND,g.mForceHalfTexturing=!1,g.mHasAlpha=!1,g.setTexture(j)}else{if(f==GameonModelData_Type.BACKIMAGE){g.createPlane2(-0.5,-0.5,0,0.5,0.5,0,h),g.mModelTemplate=GameonModelData_Type.BACKGROUND,g.mForceHalfTexturing=!1,g.mHasAlpha=!1,g.setTexture(j)}}}}}}return g};ItemFactory.prototype.initModels=function(c){for(var c=c.model,e=0;e<c.length;e++){this.processObject(c[e])}};ItemFactory.prototype.processObject=function(e){var f=e.name;this.newFromTemplate(f,e.template);if(e.texture!=void 0){var g=e.texture;this.setTexture(f,g)}if(e.texture!=void 0){g=e.texture,this.setTexture(f,g)}if(e.submodels!=void 0){g=e.submodels,this.setSubmodels(f,g)}this.createModel(f,"")};function ObjectsFactory(c){this.mApp=c;this.mItems={}}ObjectsFactory.prototype.get=function(c){return this.mItems[c]};ObjectsFactory.prototype.addModel=function(c,e){if(this.mItems[c]==void 0){this.mApp.mWorld.add(e.mModel),e.mModel.mEnabled=!0,this.mItems[c]=e}};ObjectsFactory.prototype.removeModel=function(c){if(this.mItems[c]!=void 0){var e=this.mItems[c].mModel;e.setVisible(!1);delete this.mItems[c];this.mApp.mWorld.remove(e)}};ObjectsFactory.prototype.create=function(f,h){if(this.mItems[f]==void 0){var j=this.mApp.mItems.getFromTemplate(f,h);if(j!=void 0){var g=new LayoutItem(this.mApp);g.mModel=j;this.addModel(f,g)}}};ObjectsFactory.prototype.place=function(j,o){var p=this.mItems[j];if(p!=void 0){var n=p.mModel;if(n.mRefs.length==0){var m=new GameonModelRef(n);n.addref(m);p.mModelRef=m}var n=o.split(","),l=m=0,k=0;o.length>0&&(m=parseFloat(n[0]));o.length>1&&(l=parseFloat(n[1]));o.length>2&&(k=parseFloat(n[2]));p.setPosition2(m,l,k)}};ObjectsFactory.prototype.scale=function(j,o){var p=this.mItems[j];if(p!=void 0){p=p.mModel;if(p.mRefs.length==0){var n=new GameonModelRef(p);p.addref(n)}var m=o.split(","),l=n=0,k=0;o.length>0&&(n=parseFloat(m[0]));o.length>1&&(l=parseFloat(m[1]));o.length>2&&(k=parseFloat(m[2]));p=p.ref(0);p.setScale(n,l,k);p.set()}};ObjectsFactory.prototype.texture=function(f,h){var j=this.mItems[f];if(j!=void 0){var j=j.mModel,g=this.mApp.mTextures.getTexture(h);j.setTexture(g)}};ObjectsFactory.prototype.state=function(f,h){var j=this.mItems[f];if(j!=void 0){var j=j.mModel,g=!1;h=="visible"&&(g=!0);j.mRefs.length==0&&this.place(f,"0,0,0");j.ref(0).setVisible(g);j.setVisible(g)}};ObjectsFactory.prototype.remove=function(c){this.mItems[c]!=void 0&&this.removeModel(c)};ObjectsFactory.prototype.initObjects=function(c){for(var c=c.object,e=0;e<c.length;e++){this.processObject(c[e])}};ObjectsFactory.prototype.processObject=function(e){var f=e.name;this.create(f,e.template);if(e.location!=void 0){var g=e.location;this.place(f,g)}if(e.bounds!=void 0){g=e.bounds,this.scale(f,g)}if(e.texture!=void 0){g=e.texture,this.texture(f,g)}if(e.state!=void 0){g=e.state,this.state(f,g)}};function LayoutField(c){this.mParent=c;this.mItemRotZ=this.mItemRotY=this.mItemRotX=this.mRandRotZ=this.mRandY=this.mRandX=this.mMarginY=this.mMarginX=this.mH=this.mW=this.mZ=this.mY=this.mX=this.mID=0;this.mText=this.mItem=void 0;this.mGridy=this.mGridx=-1;this.mGridSzY=this.mGridSzX=1;this.mFieldType=LayoutField_FieldType.NONE;this.mOwner=0;this.mApp=c.mApp;this.mRef=new GameonModelRef}LayoutField_FieldType={NONE:0,PLAYER_START:1,PLAYER_END:2,PLAY_FIELD:3,NORM_FIELD:4,EMPTY:8,EMPTY2:9};LayoutField.prototype.getLoc=function(c){c.setPosition(this.mX,this.mY,this.mZ)};LayoutField.prototype.setItem=function(e,f,g){e[0]=="["&&(e=e.substring(3));if(this.mItem!=void 0){this.mItem.remove(),this.mItem=void 0}this.mItem=this.mApp.mItems.createItem(e,void 0);this.mItem!=void 0&&this.setItem2(this.mItem,f,g)};LayoutField.prototype.removeFigure=function(){if(this.mItem!=void 0){this.mItem.remove(),this.mItem=void 0}};LayoutField.prototype.clear=function(){this.removeFigure();this.mOwner=0;if(this.mText!=void 0){(this.mParent.mDisplay==GameonWorld_Display.HUD?this.mApp.mWorld.mTextsHud:this.mApp.mWorld.mTexts).remove(this.mText),this.mText=void 0}};LayoutField.prototype.setItem2=function(f,h){if(this.mItem!=void 0){this.mItem.remove(),this.mItem=void 0}this.mItem=f;if(this.mItem!=void 0){var j=this.mW*this.mParent.mBounds[0],g=this.mH*this.mParent.mBounds[1];j==0||g==0||(this.mItem.setPosition(this.mParent.mDisplay,this.mX,this.mY,this.mZ+0.001,j,g,h),this.mItem.setRand(this.mRandX,this.mRandY,0,0,0,this.mRandRotZ),this.mItem.setParentLoc(this.mParent),this.mItem.addRotation(this.mItemRotX,this.mItemRotY,this.mItemRotZ),this.mItem.mModelRef.set(),this.setState(this.mParent.mState))}};LayoutField.prototype.setText=function(h,m){var n=this.mW,l=this.mH,k=this.mX,j=this.mY;if(h==void 0||h.length==0){if(this.mText!=void 0){this.mApp.mWorld.mTextsHud.remove(this.mText),this.mApp.mWorld.mTexts.remove(this.mText),this.mText=void 0}}else{this.mText!=void 0?(this.mText.updateText(h,this.mParent.mDisplay),this.mText.setRef()):this.mParent.mDisplay==GameonWorld_Display.HUD?(this.mText=m>0?new TextItem(this.mApp,k,j,n-this.mMarginX,l-this.mMarginY,this.mZ+0.002,h,m,this.mOwner,this.mParent.mDisplay,this.mParent.mLayout,this.mParent.mColors):new TextItem(this.mApp,k,j,n-this.mMarginX,l-this.mMarginY,this.mZ+0.002,h,-1,this.mOwner,this.mParent.mDisplay,this.mParent.mLayout,this.mParent.mColors),this.mApp.mWorld.mTextsHud.add(this.mText,this.mParent.mState==LayoutArea_State.VISIBLE&&this.mParent.mPageVisible),this.mText.setParent(this.mApp.mWorld.mTextsHud)):(this.mText=m>0?new TextItem(this.mApp,k,j,n-this.mMarginX,l-this.mMarginY,this.mZ+0.002,h,m,this.mOwner,this.mParent.mDisplay,this.mParent.mLayout,this.mParent.mColors):new TextItem(this.mApp,k,j,n-this.mMarginX,l-this.mMarginY,this.mZ+0.002,h,-1,this.mOwner,this.mParent.mDisplay,this.mParent.mLayout,this.mParent.mColors),this.mApp.mWorld.mTexts.add(this.mText,this.mParent.mState==LayoutArea_State.VISIBLE&&this.mParent.mPageVisible),this.mText.setParent(this.mApp.mWorld.mTexts)),n=this.mText.mRef,n.setAreaPosition(this.mParent.mLocation),n.setAreaRotate(this.mParent.mRotation),n.mulScale(this.mParent.mBounds),n.set()}};LayoutField.prototype.setState=function(c){if(!this.mParent.mPageVisible){c=LayoutArea_State.HIDDEN}c==LayoutArea_State.VISIBLE?(this.mText!=void 0&&this.mText.setVisible(!0),this.mItem!=void 0&&this.mItem.mModelRef.setVisible(!0)):(this.mText!=void 0&&this.mText.setVisible(!1),this.mItem!=void 0&&this.mItem.mModelRef.setVisible(!1))};LayoutField.prototype.setOwner=function(c){this.mOwner=c;this.mText!=void 0&&this.mText.setOffset(c)};LayoutField.prototype.invertItem=function(){this.mOwner=this.mOwner==0?4:0;this.mText!=void 0&&this.mText.setOffset(this.mOwner)};LayoutField.prototype.updateLocation=function(){var c=this.mW,e=this.mH;if(this.mItem!=void 0){if(c==0||e==0){return}else{this.mItem.setPosition(this.mParent.mDisplay,this.mX,this.mY,this.mZ+0.001,c,e,!1),this.mItem.setRand(this.mRandX,this.mRandY,0,0,0,this.mRandRotZ),this.mItem.setParentLoc(this.mParent),this.mItem.addRotation(this.mItemRotX,this.mItemRotY,this.mItemRotZ),this.mItem.mModelRef.set()}}this.mText!=void 0&&this.mText.setPosition(this.mX,this.mY,this.mZ+0.001,c-this.mMarginX,e-this.mMarginY)};LayoutField.prototype.createAnimTrans=function(f,h,j){this.mText!=void 0&&this.mText.mModel!=void 0&&this.mText.mModel.createAnimTrans(f,h,j);if(this.mItem!=void 0){var g=this.mItem.mModel.mRefs.indexOf(this.mItem.mModelRef);this.mItem.mModel.createAnimTrans(f,h,j,g)}};LayoutField.prototype.setScale=function(){this.mItem!=void 0&&this.mItem.mModelRef!=void 0&&this.mItem.mModelRef.setScale(this.mW,this.mH,1);this.mText!=void 0&&this.mText.setRef();this.mRef!=void 0&&this.mRef.setScale(this.mW,this.mH,1)};function LayoutItem(c){this.mApp=c;this.mType=GameonModelData_Type.NONE;this.mModelRef=this.mModel=void 0;this.mModelRefOld=new GameonModelRef(void 0);this.mOwnerMax=this.mOwner=0}LayoutItem.prototype.remove=function(){this.mItemID=-1;this.mModelRef!=void 0&&this.mModelRef.remove();return !0};LayoutItem.prototype.setEffect=function(c){this.mEffect=c};LayoutItem.prototype.setRotation=function(e,f,g){this.mModelRef.setRotate(e,f,g)};LayoutItem.prototype.addRotation=function(e,f,g){this.mModelRef.addRotation(e,f,g)};LayoutItem.prototype.setRotation2=function(e,f,g){this.mModelRef!=void 0&&(this.mModelRefOld.copy(this.mModelRef),this.mModelRef.setRotate(e,f,g),this.mModelRef.set())};LayoutItem.prototype.setPosition2=function(e,f,g){this.mModelRef!=void 0&&(this.mModelRefOld.copy(this.mModelRef),this.mModelRef.setPosition(e,f,g),this.mModelRef.set())};LayoutItem.prototype.setPosition=function(j,o,p,n,m,l){var k=!1;this.mModelRef==void 0?(this.mModelRef=new GameonModelRef(this.mModel),this.mModelRef.mLoc=j,k=!0):(this.mModelRefOld.copy(this.mModelRef),this.mModelRefOld.copyMat(this.mModelRef));this.mModelRef.setPosition(o,p,n+0.01);this.mModelRef.setScale(m,l,1);this.mModelRef.setRotate(0,0,0);this.mModelRef.apply();k&&(this.mModelRefOld.copy(this.mModelRef),this.mModelRefOld.copyMat(this.mModelRef));this.mOwnerMax>0&&this.mModelRef.setOwner(this.mOwner,this.mOwnerMax)};LayoutItem.prototype.setRand=function(h,m,n,l,k,j){h>0&&(h=Math.random()*h-h/2,this.mModelRef.mPosition[0]+=h);m>0&&(h=Math.random()*m-m/2,this.mModelRef.mPosition[1]+=h);n>0&&(h=Math.random()*n-n/2,this.mModelRef.mPosition[2]+=h);l>0&&(h=Math.random()*l-l/2,this.mModelRef.mRotation[0]+=h);k>0&&(h=Math.random()*k-k/2,this.mModelRef.mRotation[1]+=h);j>0&&(h=Math.random()*j-j/2,this.mModelRef.mRotation[2]+=h)};LayoutItem.prototype.setParentLoc=function(c){this.mModelRef!=void 0&&(this.mModelRef.setAreaPosition(c.mLocation),this.mModelRef.setAreaRotate(c.mRotation),this.mModelRef.set())};Function.prototype.inheritsFrom=function(c){c.constructor==Function?(this.prototype=new c,this.prototype.constructor=this,this.prototype.parent=c.prototype):(this.prototype=c,this.prototype.constructor=this,this.prototype.parent=c);return this};var LayoutArea_Border={NONE:0,THINRECT:1},LayoutArea_Type={NONE:0,TEXT:1,LABEL:2,TABLE:3,BUTTON:4,LAYOUT:5,CARDS:6};LayoutArea_State={NONE:0,VISIBLE:1,HIDDEN:2};LayoutArea_Layout={NONE:0,HORIZONTAL:1,VERTICAL:2,NORTH_WEST:3,NORTH_EAST:4,SOUTH_WEST:5,SOUTH_EAST:6,DIAMOND:7,CIRCLE:8,SQUARE:9,NORTH_SOUTH:10,EAST_WEST:11,SOUTH_NORTH:12,WEST_EAST:13};LayoutArea_TextAlign={NONE:0,NORTH:1,SOUTH:2,WEST:3,EAST:4,NORTH_WEST:5,NORTH_EAST:6,SOUTH_WEST:7,SOUTH_EAST:8,CENTER:9};LayoutArea_FieldItemType={ITEM:0,TEXT:1,TEXTH:2};function LayoutArea(){}LayoutArea.prototype.removeFigure=function(c){c>=0&&c<this.mItemFields.length&&this.mItemFields[c].removeFigure()};LayoutArea.prototype.updateData=function(){};LayoutArea.prototype.setDisplay=function(c){this.mDisplay=c};LayoutArea.prototype.setTextColor=function(e){for(var f=0;f<this.mItemFields.length;f++){var g=this.mItemFields[f];g.mText!=void 0&&g.mText.setOffset(parseInt(e))}};LayoutArea.prototype.setText_impl=function(c){this.mText=c.indexOf("#64#")==0?base64_decode(c.substring(4)):c};LayoutArea.prototype.setText=function(c){this.setText_impl(c)};LayoutArea.prototype.setText_S=function(c){this.setText_impl(c)};LayoutArea.prototype.fieldSetItem=function(c,e){c>=0&&c<this.mSize&&(this.setField(c),this.mItemFields[c].setItem(e,!1,!1))};LayoutArea.prototype.updateDisplay=function(c){this.mDisplay=c=="hud"?GameonWorld_Display.HUD:GameonWorld_Display.WORLD};LayoutArea.prototype.onKey=function(){return !1};LayoutArea.prototype.findField=function(e,f){for(var g=0;g<this.mItemFields.length;g++){if(this.mItemFields[g].isInside(e,f)==!0){return g}}return -1};LayoutArea.prototype.clear=function(c){if(this.mModelBack!=void 0&&c==!0){this.mApp.world().remove(this.mModelBack),this.mModelBack=void 0}if(this.mModel!=void 0&&c==!0){this.mApp.world().remove(this.mModel),this.mModel=void 0}this.mData=this.mText="";for(a=0;a<this.mItemFields.length;a++){this.mItemFields[a].clear()}this.mOwner=[]};LayoutArea.prototype.updateForeground=function(c){if(c=="none"){this.mColorForeground=void 0}else{c=c.split(",");if(c.length>0){this.mColorForeground=this.mApp.colors().getColor(c[0])}if(c.length>1&&(this.mColorForeground2=this.mApp.textures().getTexture(c[1]),this.mModel!=void 0)){this.mModel.mTextureID=this.mColorForeground2}}};LayoutArea.prototype.updateBackground=function(h,m){if(h=="none"){this.mColorBackground=void 0}else{var n=h.split(",");if(n.length>0){this.mColorBackground=this.mApp.colors().getColor(n[0])}if(n.length>1&&(this.mColorBackground2=this.mApp.textures().getTexture(n[1]),this.mStrColorBackground2=n[1],this.mModelBack!=void 0)){this.mModelBack.mTextureID=this.mColorBackground2}}if(m&&this.mStrColorBackground2!=void 0&&this.mModelBack!=void 0){var n=this.mStrColorBackground2.split("."),l=n[0];if(n.length>1){var k=mApp.textures().getTexture(l),l=parseInt(n[1]),j=parseInt(n[2]),n=parseInt(n[3]);this.mModelBack.setTexture(k);k=mModelBack.ref(0);k.mOwner=l;k.mTransformOwner=!0;this.mModelBack.setTextureOffset(j,n);k.mOwnerMax=j*n;this.mModelBack.mSubmodels=j*n}}};LayoutArea.prototype.updateLayout=function(c){if(c=="hor"){this.mLayout=LayoutArea_Layout.HORIZONTAL}else{if(c=="ver"){this.mLayout=LayoutArea_Layout.VERTICAL}else{if(c=="south-east"){this.mLayout=LayoutArea_Layout.SOUTH_EAST}else{if(c=="south-west"){this.mLayout=LayoutArea_Layout.SOUTH_WEST}else{if(c=="north-east"){this.mLayout=LayoutArea_Layout.NORTH_EAST}else{if(c=="north-west"){this.mLayout=LayoutArea_Layout.NORTH_WEST}else{if(c=="circle"){this.mLayout=LayoutArea_Layout.CIRCLE}else{if(c=="square"){this.mLayout=LayoutArea_Layout.SQUARE}else{if(c=="diamond"){this.mLayout=LayoutArea_Layout.DIAMOND}else{if(c=="north-south"){this.mLayout=LayoutArea_Layout.NORTH_SOUTH}else{if(c=="east-west"){this.mLayout=LayoutArea_Layout.EAST_WEST}else{if(c=="south-north"){this.mLayout=LayoutArea_Layout.SOUTH_NORTH}else{if(c=="west-east"){this.mLayout=LayoutArea_Layout.WEST_EAST}}}}}}}}}}}}}};LayoutArea.prototype.setInitState=function(){this.mPageVisible&&this.mState==LayoutArea_State.VISIBLE?this.mParent.setVisibleArea(this,!0):this.mParent.setVisibleArea(this,!1);this.updateModelState(this.mState)};LayoutArea.prototype.getX=function(e,f,g){return g*(e/f)};LayoutArea.prototype.getY=function(e,f,g){return g*(e/f)};LayoutArea.prototype.getDivX=function(c,e){return e/c};LayoutArea.prototype.getDivY=function(c,e){return e/c};LayoutArea.prototype.updateInitState=function(c,e){this.mState==LayoutArea_State.VISIBLE?this.mParent.setVisibleArea(this,!0):this.mState==LayoutArea_State.HIDDEN&&this.mParent.setVisibleArea(this,!1);if(e){this.mInitState=this.mState}this.updateModelState(this.mState)};LayoutArea.prototype.updateState=function(c,e){if(c=="visible"){this.mState=LayoutArea_State.VISIBLE,this.mParent.setVisibleArea(this,!0)}else{if(c=="hidden"){this.mState=LayoutArea_State.HIDDEN,this.mParent.setVisibleArea(this,!1)}}if(e){this.mInitState=this.mState}this.updateModelState(this.mState)};LayoutArea.prototype.updateModelState=function(c){if(!this.mPageVisible){c=LayoutArea_State.HIDDEN}this.mModelBack!=void 0&&this.mModelBack.setState(c);this.mModel!=void 0&&this.mModel.setState(c);for(a=0;a<this.mItemFields.length;a++){this.mItemFields[a].setState(c)}};LayoutArea.prototype.updateLocation=function(c){c=ServerkoParse.parseFloatArray(this.mLocation,c);c==5?(this.mBounds[0]=this.mLocation[2],this.mBounds[1]=this.mLocation[3],this.mLocation[2]=this.mLocation[4]):c==4&&(this.mBounds[0]=this.mLocation[2],this.mBounds[1]=this.mLocation[3],this.mLocation[2]=0);this.updateModelsTransformation()};LayoutArea.prototype.updateBounds=function(c){ServerkoParse.parseFloatArray(this.mBounds,c);this.updateModelsTransformation()};LayoutArea.prototype.setRotation=function(c){ServerkoParse.parseFloatArray(this.mRotation,c);this.updateModelsTransformation()};LayoutArea.prototype.setScale=function(c){ServerkoParse.parseFloatArray(this.mScale,c);this.updateModelsTransformation()};LayoutArea.prototype.setItemScale=function(e){var f=e.split(","),g=parseInt(f[0]);g<0||g>=this.mItemFields.length||this.mItemFields[g]==void 0||(f=[1,1,1],ServerkoParse.parseFloatArray(f,e),e=this.mItemFields[g],e.mItem!=void 0&&(e.mItem.mModelRef.setAddScale(f),e.mItem.mModelRef.set()))};LayoutArea.prototype.setSize=function(c){c=c.split(",");if(c.length>0){this.mSizeW=this.mSize=parseInt(c[0])}if(c.length>1){this.mSizeW=parseInt(c[1])}if(c.length>2){this.mSizeH=parseInt(c[2])}};LayoutArea.prototype.setField=function(c){if(!(c<this.mItemFields.length)){for(;c>=this.mItemFields.length;){var e=new LayoutField(this);e.mID=c;this.mItemFields.push(e)}}};LayoutArea.prototype.getData=function(c){var e=c.indexOf("]");return e==-1?c:c.substring(e+1)};LayoutArea.prototype.getType=function(c){return c[0]!="["?LayoutArea_FieldItemType.ITEM:c[1]=="i"?LayoutArea_FieldItemType.ITEM:c[1]=="t"?LayoutArea_FieldItemType.TEXT:c[1]=="T"?LayoutArea_FieldItemType.TEXTH:LayoutArea_FieldItemType.ITEM};LayoutArea.prototype.pushFrontItem=function(f){for(var h=this.mItemFields.length-1;h>0;h--){var j=this.mItemFields[h];if(h>=this.mSize){j.clear()}else{var g=this.mItemFields[h-1];g.mText!=void 0&&g.mText.mText!=void 0&&j.setText(g.mText.mText,this.mSizeW)}}this.createItem(0,f,!1)};LayoutArea.prototype.updateItems=function(c){this.createItems(c,!1)};LayoutArea.prototype.updateItem=function(e,f){var g=e.split(",");this.createItem(parseInt(g[0]),g[1],f)};LayoutArea.prototype.createItem=function(g,k,l){var j=LayoutArea_FieldItemType.TEXT,h=void 0,j=this.getType(k),k=this.getData(k);if(!(g<0||g>this.mSize)){if(this.setField(g),h=this.mItemFields[g],j==LayoutArea_FieldItemType.ITEM){h.mW>0&&h.setItem(k,!1,l),h.mText=void 0}else{if(j==LayoutArea_FieldItemType.TEXT){h.setText(k,this.mSizeW),h.mItem=void 0}else{if(j==LayoutArea_FieldItemType.TEXTH){h.setText(k,this.mSizeW),h.mItem=void 0}}}}};LayoutArea.prototype.createItems=function(k,q){if(k!=void 0){for(var r=k.split(","),p,o=LayoutArea_FieldItemType.TEXT,n=void 0,m=0,l=0;l<r.length;l++){if(p=r[l],o=this.getType(p),p=this.getData(p),this.setField(m),n=this.mItemFields[m++],o==LayoutArea_FieldItemType.ITEM){n.mW>0&&n.setItem(p,q,!1),n.mItemID=p,n.mText=void 0}else{if(o==LayoutArea_FieldItemType.TEXT){n.setText(p,this.mSizeW),n.mItem=void 0}}}}};LayoutArea.prototype.updateFields=function(c){this.createFields(c)};LayoutArea.prototype.getFinfo=function(h,m){var n,l,k=0;l=m.split(",");n=l[0];h[0]=0;h[1]=0;h[2]=1;h[3]=0;h[4]=0;h[5]=1;for(var j=h[6]=1;j<l.length&&k<6;j++){h[k++]=parseInt(l[j])}return n};LayoutArea.prototype.createFields=function(D){if(D!=void 0){for(var B=Array(7),C=0,A=new String,D=D.split(";"),z=0,w=0,v=0,u=0,s=0,r=0,t=0,q=0;q<D.length;q++){A=this.getFinfo(B,D[q]);u=B[0];s=B[1];w=B[2];r=B[5];t=B[5];for(z=0;z<w;z++){this.setField(v);var n=this.mItemFields[v++];n.mGridx=u;n.mGridy=s;n.mGridSzX=r;n.mGridSzY=t;if(A=="empty"){n.mFieldType=LayoutField_FieldType.EMPTY}else{if(A=="empty2"){n.mFieldType=LayoutField_FieldType.EMPTY2}else{if(A=="norm"){n.mFieldType=LayoutField_FieldType.NORM_FIELD}else{if(A=="play"){n.mFieldType=LayoutField_FieldType.PLAY_FIELD}else{if(A=="norm"){n.mFieldType=LayoutField_FieldType.NORM_FIELD}else{if(A=="start"){n.mFieldType=LayoutField_FieldType.PLAYER_START}else{if(A=="end"){n.mFieldType=LayoutField_FieldType.PLAYER_END}}}}}}}n.mID=C;u+=B[3];s+=B[4];C++}}}};LayoutArea.prototype.getItem=function(c){if(c<this.mItemFields.length){return this.mItemFields[c].mItem}};LayoutArea.prototype.placeFigure=function(e,f,g){e<this.mItemFields.length&&(e=this.mItemFields[e],e.removeFigure(),e.setItem2(f,!1,g))};LayoutArea.prototype.updateOnclick=function(c){this.mOnclick=c};LayoutArea.prototype.updateOnFocusLost=function(c){this.mOnFocusLost=c};LayoutArea.prototype.updateOnFocusGain=function(c){this.mOnFocusGain=c};LayoutArea.prototype.updateItemsA=function(c){this.createItems(c,!0)};LayoutArea.prototype.createWorldModel=function(){if(this.mModelBack==void 0&&this.mColorBackground!=void 0){var g=new GameonModelRef(void 0,this.mParent.getWorld());if(this.mStrColorBackground2!=void 0){var k=this.mStrColorBackground2.split(".");back=k[0];if(k.length>1){var l=this.mApp.textures().getTexture(back),j=parseInt(k[1]),h=parseInt(k[2]),k=parseInt(k[3]);this.mModelBack=this.mType==LayoutArea_Type.LAYOUT?this.mApp.items().createFromType(GameonModelData_Type.BACKIMAGE,this.mColorBackground,l):this.mApp.items().createFromType(GameonModelData_Type.BACKGROUND,this.mColorBackground,l);g.mOwner=j;g.mTransformOwner=!0;this.mModelBack.setTextureOffset(h,k);g.mOwnerMax=h*k;this.mModelBack.mSubmodels=h*k}else{this.mModelBack=this.mType==LayoutArea_Type.LAYOUT?this.mApp.items().createFromType(GameonModelData_Type.BACKIMAGE,this.mColorBackground,this.mColorBackground2):this.mApp.items().createFromType(GameonModelData_Type.BACKGROUND,this.mColorBackground,this.mColorBackground2)}}else{this.mModelBack=this.mType==LayoutArea_Type.LAYOUT?this.mApp.items().createFromType(GameonModelData_Type.BACKIMAGE,this.mColorBackground,this.mColorBackground2):this.mApp.items().createFromType(GameonModelData_Type.BACKGROUND,this.mColorBackground,this.mColorBackground2)}this.mModelBack.mLoc=this.mDisplay;this.mModelBack.mEnabled=!0;if(this.mColorBackground.alpha<255){this.mModelBack.mHasAlpha=!0}this.mBorder==LayoutArea_Border.THINRECT&&this.mModelBack.createFrame(-0.5,-0.5,0.001,0.5,0.5,0.001,0.03/this.mBounds[0],0.03/this.mBounds[1],this.mColorForeground);g.mLoc=this.mDisplay;g.setAreaPosition(this.mLocation);this.mModelBack.addref(g);this.mModelBack.mName="back "+this.mID;this.mApp.world().add(this.mModelBack)}(this.mType==LayoutArea_Type.LABEL||this.mType==LayoutArea_Type.TABLE)&&this.createWorldModelItems()};LayoutArea.prototype.createWorldModelItems=function(){if(!(this.mItemFields.length==0||this.mModel!=null)){for(var z=0,v=0;v<this.mItemFields.length;v++){var w=this.mItemFields[v];(w.mFieldType==LayoutField_FieldType.NONE||w.mFieldType==LayoutField_FieldType.EMPTY||w.mFieldType==LayoutField_FieldType.EMPTY2)&&z++}if(z!=this.mItemFields.length){for(var z=this.mModel=new GameonModel("area"+this.mID,this.mApp),v=0;v<this.mItemFields.length;v++){var w=this.mItemFields[v],u=w.mW,t=w.mH,s=w.mX/this.mBounds[0]-u/2,r=w.mY/this.mBounds[1]-t/2,q=w.mZ,o=u/80,n=t/80,p=void 0,p=this.mColorForeground!=void 0?this.mColorForeground:this.mApp.colors().white;switch(w.mFieldType){case LayoutField_FieldType.NORM_FIELD:this.mColorForeground!=void 0?z.createPlane(s,r,q+0.001,s+u,r+t,q+0.001,p):z.createPlane4(s,r,q+0.001,s+u,r+t,q+0.001,p,p);w.mZ=this.mZ;break;case LayoutField_FieldType.PLAY_FIELD:z.createOctogon(s+o,r+n,q+0.001,s+u-o-o,r+t-n-n,q+0.001,p);w.mZ=this.mZ;break;case LayoutField_FieldType.PLAYER_START:z.createPlane(s+o,r+n,q+0.001,s+u-o-o,r+t-n-n,q+0.001,p);w.mZ=this.mZ;break;case LayoutField_FieldType.PLAYER_END:z.createPlane3(s,r,q+0.001,s+u,r+t,q+0.001,p);w.mZ=this.mZ;break;case EMPTY:w.mZ=this.mZ}w.mRef.setPosition(w.mX,w.mY,w.mZ);w.mRef.setScale(u,t,1)}w=new GameonModelRef(void 0);w.mLoc=this.mDisplay;w.setScale(this.mBounds);z.addref(w);z.mEnabled=!0;z.mIsModel=!1;this.mColorForeground2!=void 0&&this.mModel.setTexture(this.mColorForeground2);this.mApp.world().add(z)}}};LayoutArea.prototype.fieldClicked=function(h,m){if(this.hasTouchEvent()){if(this.mPageVisible==!1||this.mState!=LayoutArea_State.VISIBLE){return null}for(var n=1000000,l=0,k=0;k<this.mItemFields.length;k++){var j=this.mItemFields[k];if(j.mText!=void 0||j.mItem!=void 0){j=j.mRef,j=j.intersectsRay(h,m),j<=n&&(n=j,l=k)}}if(n!=1000000){return n=new AreaIndexPair,n.mArea=this.mID,n.mOnclick=this.mOnclick,n.mOnFocusLost=this.mOnFocusLost,n.mOnFocusGain=this.mOnFocusGain,n.mIndex=l,n}for(k=0;k<this.mItemFields.length;k++){j=this.mItemFields[k],j=j.mRef,j=j.intersectsRay(h,m),j<n&&(n=j,l=k)}if(n!=1000000){return n=new AreaIndexPair,n.mArea=this.mID,n.mOnclick=this.mOnclick,n.mOnFocusLost=this.mOnFocusLost,n.mOnFocusGain=this.mOnFocusGain,n.mIndex=l,n}this.mModelBack!=void 0&&(j=this.mModelBack.ref(0),j=j.intersectsRay(h,m),j<=n&&(n=j,l=0));this.mModel!=void 0&&(j=this.mModel.ref(0),j=j.intersectsRay(h,m),j<=n&&(n=j,l=0));if(n!=1000000){return n=new AreaIndexPair,n.mArea=this.mID,n.mOnclick=this.mOnclick,n.mOnFocusLost=this.mOnFocusLost,n.mOnFocusGain=this.mOnFocusGain,n.mIndex=l,n}}};LayoutArea.prototype.itemsRemoveAnim=function(e){var f=e.split("|"),e=f[0],f=f[1].split(",");parseInt(f[1]);e=e.split(",");for(f=0;f<e.length;f++){var g=this.mItemFields[parseInt(e[f])];g.mItem!=void 0&&g.removeFigure()}};LayoutArea.prototype.itemsAnim=function(f){var h=f.split(","),f=h[0],j=h[1];h.length>2&&(j+=",",j+=h[2]);for(var h=void 0,g=0;g<this.mItemFields.length;g++){h=this.mItemFields[g].mItem,this.mApp.mAnims.animRef(f,h.mModelRef,h.mModelRef,j)}};LayoutArea.prototype.itemAnim=function(j,o){var p=o.split(","),n=p[0],m=p[1];p.length>2&&(m+=",",m+=p[2]);for(var p=void 0,l=j.split(","),k=0;k<l.length;k++){p=this.mItemFields[parseInt(l[k])].mItem,p!=void 0&&this.mApp.mAnims.animRef(n,p.mModelRef,p.mModelRef,m)}};LayoutArea.prototype.invertItem=function(c){var c=parseInt(c),e=void 0;this.setField(c);e=this.mItemFields[c];e.invertItem()};LayoutArea.prototype.updateBorder=function(c){if(c=="thinrect"){this.mBorder=LayoutArea_Border.THINRECT}};LayoutArea.prototype.initAnim=function(g,k){var l=g.split(","),j=l[0],l=parseInt(l[1]);this.mModel!=void 0&&this.mModel.createAnimTrans(j,l,k,0);this.mModelBack!=void 0&&this.mModelBack.createAnimTrans(j,l,k,0);for(var h=0;h<this.mItemFields.length;h++){this.mItemFields[h].createAnimTrans(j,l,k)}return l};LayoutArea.prototype.updateModels=function(){if(this.mModelBack!=void 0){var c=this.mModelBack.ref(0);c.setScale(this.mScale);c.setPosition(this.mLocation);c.set()}};LayoutArea.prototype.hasTouchEvent=function(){return this.mOnclick!=void 0&&this.mOnclick.length>0||this.mOnFocusLost!=void 0&&this.mOnFocusLost.length>0||this.mOnFocusGain!=void 0&&this.mOnFocusGain.length>0?!0:!1};LayoutArea.prototype.updateColors=function(c){c=c.split(",");c.length>0&&(this.mColors[0]=this.mApp.colors().getColor(c[0]));c.length>1&&(this.mColors[1]=this.mApp.colors().getColor(c[1]));c.length>2&&(this.mColors[2]=this.mApp.colors().getColor(c[2]));c.length>3&&(this.mColors[3]=this.mApp.colors().getColor(c[3]))};LayoutArea.prototype.updateModelsTransformation=function(){if(this.mModelBack!=void 0){var e=this.mModelBack.ref(0);e.setAreaPosition(this.mLocation);e.setAreaRotate(this.mRotation);e.setScale(this.mBounds);e.setAddScale(this.mScale);e.set()}this.mModel!=void 0&&(e=this.mModel.ref(0),e.setAreaPosition(this.mLocation),e.addAreaPosition(0,0,0.001),e.setAreaRotate(this.mRotation),e.setScale(this.mBounds),e.setAddScale(this.mScale),e.set());for(var f=0;f<this.mItemFields.length;f++){var g=this.mItemFields[f];g.setScale();if(g.mItem!=void 0&&g.mItem.mModelRef!=void 0){e=g.mItem.mModelRef,e.setAreaPosition(this.mLocation),e.setAreaRotate(this.mRotation),e.mulScale(this.mBounds),e.setAddScale(this.mScale),e.set()}if(g.mText!=void 0&&g.mText.mRef!=void 0){e=g.mText.mRef,e.setAreaPosition(this.mLocation),e.setAreaRotate(this.mRotation),e.mulScale(this.mBounds),e.setAddScale(this.mScale),e.set()}e=g.mRef;e.setAreaPosition(this.mLocation);e.setAreaRotate(this.mRotation);e.mulScale(this.mBounds);e.setAddScale(this.mScale);e.set()}};function LayoutAreaCards(e,f){this.mApp=f;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=GameonWorld_Display.WORLD;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeH=this.mSizeW=this.mSize=0;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;this.mRandZ=this.mRandY=this.mRandX=this.mModifier=0;var g=e.charAt(e.length-1);if(g>="0"&&g<="9"){this.mModifier=(g-0)*1+1,this.mRandX=this.mModifier*0.01,this.mRandY=this.mModifier*0.01,this.mRandZ=this.mModifier*0.01}if(e.indexOf("deckback")==0){this.mSubType=LayoutAreaCards_SubType.DECKBACK}else{if(e.indexOf("deck")==0){this.mSubType=LayoutAreaCards_SubType.DECK}else{if(e.indexOf("hand")==0){this.mSubType=LayoutAreaCards_SubType.HAND}else{if(e.indexOf("inhand")==0){this.mSubType=LayoutAreaCards_SubType.INHAND}else{if(e.indexOf("cards")==0){this.mSubType=LayoutAreaCards_SubType.CARDS}}}}}this.mType=LayoutArea_Type.CARDS;this.mPageVisible=!1;this.mThickness=0.0005}LayoutAreaCards.prototype=new LayoutArea;LayoutAreaCards.prototype.constructor=LayoutAreaCards;LayoutAreaCards_SubType={NONE:0,DECK:1,DECKBACK:2,HAND:3,INHAND:4,CARDS:5};LayoutAreaCards.prototype.initLayout=function(){this.mSubType==LayoutAreaCards_SubType.DECK?this.initDeck(!1):this.mSubType==LayoutAreaCards_SubType.DECKBACK?this.initDeck(!0):this.mSubType==LayoutAreaCards_SubType.HAND?this.initHand():this.mSubType==LayoutAreaCards_SubType.INHAND?this.initInHand():this.mSubType==LayoutAreaCards_SubType.CARDS&&this.initCards()};LayoutAreaCards.prototype.initDeck=function(g){for(var k=0,l=0,j=null,h=0;h<this.mSize;h++){this.setField(h);j=this.mItemFields[l++];x=j.mGridx;y=j.mGridy;j.mX=0;j.mY=0;j.mW=1;j.mH=1;j.mZ=this.mThickness+h*this.mThickness;j.mRandX=this.mRandX;j.mRandY=this.mRandY;j.mRandRotZ=this.mRandZ*360;if(g){j.mItemRotY=180}k++}this.mLayout==LayoutArea_Layout.WEST_EAST?this.mRotation[2]=90:this.mLayout==LayoutArea_Layout.EAST_WEST?this.mRotation[2]=270:this.mLayout==LayoutArea_Layout.NORTH_SOUTH?this.mRotation[2]=0:this.mLayout==LayoutArea_Layout.SOUTH_NORTH&&(this.mRotation[2]=180)};LayoutAreaCards.prototype.initHand=function(){for(var j=0,o=this.mBounds[0],p=o-o/2.2,n=0,m=this.mThickness,l=0;l<this.mSize;l++){this.setField(l);var k=this.mItemFields[n++];k.mX=l*p+p/2-o/2+this.mRandX;k.mY=0+this.mRandY;k.mW=1-1/2.2;k.mH=1;k.mZ=0+l*m;if(this.mRandZ>0){k.mItemRotZ=(this.mRandZ-0.05)*360}k.mRef.setPosition(k.mX,0,k.mZ);k.mRef.setScale(p,1,1);j++}};LayoutAreaCards.prototype.initInHand=function(){for(var j=0,o=this.mBounds[0],p=o/this.mSize,n=o/this.mSizeW,m=0,l=0;l<this.mSize;l++){this.setField(l);var k=this.mItemFields[m++];k.mX=l*p+p/2-o/2;k.mW=1/this.mSizeW;k.mH=1;k.mZ=this.mThickness+l*this.mThickness;k.mY=0;k.mRandRotZ=this.mRandZ*360;k.mRef.setPosition(k.mX,0,k.mZ);k.mRef.setScale(n,1,1);j++}this.mLayout==LayoutArea_Layout.WEST_EAST?this.mRotation[0]=45:this.mLayout==LayoutArea_Layout.EAST_WEST?(this.mRotation[0]=45,this.mRotation[2]=180):this.mLayout==LayoutArea_Layout.NORTH_SOUTH?(this.mRotation[0]=90,this.mRotation[1]=90):this.mLayout==LayoutArea_Layout.SOUTH_NORTH&&(this.mRotation[0]=90,this.mRotation[1]=270)};LayoutAreaCards.prototype.initCards=function(){for(var t=0,r=this.mBounds[0],s=r/this.mSize,q=r/this.mSizeW,p=this.mBounds[1],o=0,n=this.mThickness,m=0;m<this.mSize;m++){this.setField(m);var k=this.mItemFields[o++];k.mX=m*s+s/2-r/2;k.mW=1/this.mSizeW;k.mH=1;k.mZ=0+n+m*this.mThickness;k.mY=0;if(this.mRandZ>0){k.mItemRotZ=(this.mRandZ-0.05)*360}k.mRef.setPosition(k.mX,0,k.mZ);k.mRef.setScale(q,p,1);t++}this.mLayout==LayoutArea_Layout.WEST_EAST?this.mRotation[2]=0:this.mLayout==LayoutArea_Layout.EAST_WEST?this.mRotation[2]=180:this.mLayout==LayoutArea_Layout.NORTH_SOUTH?this.mRotation[2]=90:this.mLayout==LayoutArea_Layout.SOUTH_NORTH&&(this.mRotation[2]=270)};function LayoutAreaLayout(c,e){this.mApp=e;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=GameonWorld_Display.WORLD;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeH=this.mSizeW=this.mSize=0;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;if(c=="grid"){this.mSubType=LayoutAreaLayout_SubType.GRID}else{if(c=="back"){this.mSubType=LayoutAreaLayout_SubType.BACK}}this.mType=LayoutArea_Type.LAYOUT;this.mPageVisible=!1}LayoutAreaLayout.prototype=new LayoutArea;LayoutAreaLayout.prototype.constructor=LayoutAreaLayout;LayoutAreaLayout_SubType={NONE:0,GRID:1,BACK:2};LayoutAreaLayout.prototype.initLayout=function(){this.mSubType==LayoutAreaLayout_SubType.GRID&&this.initGrid()};LayoutAreaLayout.prototype.initGrid=function(){for(var k=null,q=this.mBounds[0],r=this.mBounds[1],p=0,o=0,n=0,m=this.getDivX(this.mSizeW,q),l=this.getDivY(this.mSizeH,r);n<this.mSize;){this.setField(n),k=mItemFields[n++],k.mX=0+this.getX(p,this.mSizeW,q)-q/2,k.mY=0+this.getY(o,this.mSizeH,r)-r/2,k.mW=m,k.mH=l,k.mRef.setPosition(k.mX,k.mY,k.mZ),k.mRef.setScale(m,l,1),p++,p>=this.mSizeW&&(p=0,o++)}};function LayoutAreaTable(c,e){this.mApp=e;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=GameonWorld_Display.WORLD;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeH=this.mSizeW=this.mSize=0;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;if(c=="sgrid"){this.mSubType=LayoutAreaTable_SubType.SGRID}else{if(c=="cardt"){this.mSubType=LayoutAreaTable_SubType.CARDTABLE}else{if(c=="list"){this.mSubType=LayoutAreaTable_SubType.LIST}}}this.mType=LayoutArea_Type.TABLE;this.mPageVisible=!1}LayoutAreaTable.prototype=new LayoutArea;LayoutAreaTable.prototype.constructor=LayoutAreaTable;LayoutAreaTable_SubType={NONE:0,SGRID:1,CARDTABLE:2,LIST:3};LayoutAreaTable.prototype.initLayout=function(){this.mSubType==LayoutAreaTable_SubType.SGRID?this.initSquareGrid():this.mSubType!=LayoutAreaTable_SubType.CARDTABLE&&this.mSubType==LayoutAreaTable_SubType.LIST&&this.initList()};LayoutAreaTable.prototype.initSquareGrid=function(){for(var F=0,D=0,E=0,C=this.mBounds[0],B=this.mBounds[1],A=0,z=this.getDivX(this.mSizeW,C),w=1/this.mSizeW,u=this.getDivY(this.mSizeH,B),t=1/this.mSizeH,v=0,r=0,q=0;q<this.mSize;q++){this.setField(q);var s=this.mItemFields[A++];s.mGridx>=0?(D=s.mGridx,E=s.mGridy):(D=v,E=r);v++;v>=this.mSizeW&&(v=0,r++);s.mX=this.getX(D,this.mSizeW,C)+z/2-C/2;s.mY=this.getY(E,this.mSizeH,B)+u/2-B/2;s.mW=w*s.mGridSzX;s.mH=t*s.mGridSzY;s.mRef.setPosition(s.mX,s.mY,s.mZ);s.mRef.setScale(s.mW,s.mH,1);s.mZ=0.001;if(s.mFieldType==LayoutField_FieldType.EMPTY2){D=s.mW,E=s.mH,D*=0.33,E*=0.33,s.mW-=D,s.mH-=E,s.mX+=D/2,s.mY+=E/2}F++}};LayoutAreaTable.prototype.setTitle=function(){};LayoutAreaTable.prototype.initList=function(){for(var J=0,H=0,I=this.mBounds[0],G=this.mBounds[1],F=I/20,E=G/20,D=1-E,C=1-F,A=0,z=0,B=this.getDivX(1,C),v=this.getDivY(this.mSizeH,D),u=this.getDivX(1,C),w=this.getDivY(this.mSizeH,D),H=this.mSizeH-1,s=this.mSizeH-1;s>=0;s--){this.setField(A);var t=this.mItemFields[A++];t.mX=0+F/2+this.getX(J,1,C)+B/2-I/2;t.mY=0+E/2+this.getY(H,this.mSizeH,D)+v/2-G/2;t.mW=u*t.mGridSzX;t.mH=w*t.mGridSzY;t.mRef.setPosition(t.mX,t.mY,t.mZ);t.mRef.setScale(t.mW,t.mH,1);t.mMarginX=t.mW/10;t.mMarginY=t.mH/5;t.mZ=0;z++;J++;J>=1&&(J=0,H--)}};LayoutAreaText_SubType={MLINE:0,MLINEW:1,LABEL:2,BUTTON:3,BUTTON2:4,BUTTON3:5,NONE:6};function LayoutAreaText(e,f){this.mApp=f;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=GameonWorld_Display.WORLD;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeH=this.mSizeW=this.mSize=0;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;this.mModifier=0;var g=e.charAt(e.length-1);if(g>="0"&&g<="9"){this.mModifier=(g-0)*1+1}if(e.indexOf("mline")==0){this.mSubType=LayoutAreaText_SubType.MLINE}else{if(e.indexOf("mlinew")==0){this.mSubType=LayoutAreaText_SubType.MLINEW}else{if(e.indexOf("label")==0){this.mSubType=LayoutAreaText_SubType.LABEL}else{if(e.indexOf("button")==0){this.mSubType=LayoutAreaText_SubType.BUTTON}}}}this.mType=LayoutArea_Type.TEXT;this.mPageVisible=!1}LayoutAreaText.prototype=new LayoutArea;LayoutAreaText.prototype.constructor=LayoutAreaText;LayoutAreaText.prototype.getTextOnLine=function(c){if(this.mText==void 0){return""}var e=c*this.mSizeW,c=(c+1)*this.mSizeW;if(e>=this.mText.length){return""}if(c>=this.mText.length){c=this.mText.length}return this.mText.substring(e,c)};LayoutAreaText.prototype.getTextW=function(g,k){for(var l=new String,j=0;k.length>0;){var h=k[0];if(j+h.length+1>g){break}l+=" ";l+=h;j=l.length;k.slice(0,1)}return l};LayoutAreaText.prototype.initMLineW=function(){if(this.mText!=void 0){for(var j=this.mBounds[1],o=0,p=this.mText.split(" "),n=j/this.mSize,m=1/this.mSize,l=this.mSize-1;l>=0;l--){this.setField(o);var k=this.mItemFields[o];k.mX=0;k.mY=0-j/2+l*n+n/2;k.mZ=0;k.mW=0.95;k.mH=m-m/20;k.mRef.setPosition(k.mX,k.mY,k.mZ);k.mRef.setScale(k.mW,k.mH,1);k.setText(this.getTextW(this.mSizeW,p),this.mSizeW);o++}}};LayoutAreaText.prototype.initMLine=function(){for(var h=this.mBounds[1],m=0,n=h/this.mSize,l=1/this.mSize,k=this.mSize-1;k>=0;k--){this.setField(m);var j=this.mItemFields[m];j.mX=0;j.mY=0-h/2+k*n+n/2;j.mZ=0;j.mW=0.95;j.mH=l-l/20;if(this.mOwner.length>0){j.mOwner=this.mOwner[0]}j.mRef.setPosition(j.mX,j.mY,j.mZ);j.mRef.setScale(j.mW,j.mH,1);j.setText(this.getTextOnLine(m),this.mSizeW);m++}};LayoutAreaText.prototype.initLabel=function(){this.setField(0);var c=this.mItemFields[0];c.mH=1;c.mW=1;c.mX=0;c.mY=0;c.mZ=0;if(this.mOwner.length>0){c.mOwner=this.mOwner[0]}c.setText(this.mText,this.mSize)};LayoutAreaText.prototype.initButton=function(){this.setField(0);var g=this.mBounds[0],k=this.mBounds[0]/this.mBounds[1],l=1-(11-this.mModifier)/10,j=1-l,h=g*(0.5-j/2),l=g*(-0.5+l/2);this.mModifier==0&&(j=0.8,h=0,l=-g/2.1+1/k);g=this.mItemFields[0];g.mH=1-this.mModifier/10;g.mW=j;g.mX=h;g.mY=0;g.mZ=0;g.mRef.setPosition(g.mX,g.mY,g.mZ);g.mRef.setScale(g.mW,g.mH,1);g.setText(this.mText,this.mSize);this.setField(1);g=this.mItemFields[1];g.mH=1;g.mW=1/k;g.mX=l;g.mY=0;g.mZ=0;g.updateLocation();g.mRef.setPosition(g.mX,g.mY,g.mZ);g.mRef.setScale(g.mW,g.mH,1)};LayoutAreaText.prototype.initLayout=function(){this.mSubType==LayoutAreaText_SubType.LABEL?this.initLabel():this.mSubType==LayoutAreaText_SubType.MLINE?this.initMLine():this.mSubType==LayoutAreaText_SubType.MLINEW?this.initMLineW():this.mSubType==LayoutAreaText_SubType.BUTTON&&this.initButton()};LayoutAreaText.prototype.setText=function(f){this.setText_S(f);if(f.length==0&&this.mItemFields.length>0){for(f=0;f<this.mItemFields.length;f++){this.mItemFields[f].setText("",0)}}else{if(f.length>0&&this.mItemFields.length>0){if(this.mSubType==LayoutAreaText_SubType.LABEL||this.mSubType==LayoutAreaText_SubType.BUTTON){this.mItemFields[0].setText(f,this.mSize)}else{if(this.mSubType==LayoutAreaText_SubType.MLINE){for(var h=0,f=this.mSize-1;f>=0;f--){var j=this.mItemFields[h];j.setText(this.getTextOnLine(h),this.mSizeW);h++}}else{if(this.mSubType==LayoutAreaText_SubType.MLINEW){for(var h=0,g=this.mText.split(" "),f=this.mSize-1;f>=0;f--){j=this.mItemFields[h],j.setText(this.getTextW(this.mSizeW,g),this.mSizeW),h++}}}}}}};function GMath(){}GMath.tmpV1=Array(3);GMath.tmpV2=Array(3);GMath.tmpV3=Array(3);GMath.tmpV4=Array(3);GMath.tmpW=Array(3);GMath.tmpW0=Array(3);GMath.mPi=3.14159265;GMath.mIdentity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];GMath.multMatrixVec=function(f,h,j){for(var g=0;g<4;g+=1){j[g]=h[0]*f[0+g]+h[1]*f[4+g]+h[2]*f[8+g]+h[3]*f[12+g]}};GMath.matricesMultiply=function(j,o,p){var n,m,l;for(n=0;n<4;n++){for(m=0;m<4;m++){var k=4*n+m;for(l=p[k]=0;l<4;l++){p[k]+=j[4*n+l]*o[4*l+m]}}}};GMath.matrixVecMultiply=function(j,o,p){var n,m,l;for(n=0;n<4;n++){for(m=0;m<1;m++){var k=4*n+m;for(l=p[k]=0;l<4;l++){p[k]+=j[4*n+l]*o[4*l+m]}}}};GMath.matrixVecMultiply2=function(j,o,p,n,m){var l,k;for(l=0;l<4;l++){for(k=n[l+m]=0;k<4;k++){n[l+m]+=j[4*k+l]*o[k+p]}}};GMath.invertMatrix=function(g,k){var l=[];l[0]=g[5]*g[10]*g[15]-g[5]*g[11]*g[14]-g[9]*g[6]*g[15]+g[9]*g[7]*g[14]+g[13]*g[6]*g[11]-g[13]*g[7]*g[10];l[4]=-g[4]*g[10]*g[15]+g[4]*g[11]*g[14]+g[8]*g[6]*g[15]-g[8]*g[7]*g[14]-g[12]*g[6]*g[11]+g[12]*g[7]*g[10];l[8]=g[4]*g[9]*g[15]-g[4]*g[11]*g[13]-g[8]*g[5]*g[15]+g[8]*g[7]*g[13]+g[12]*g[5]*g[11]-g[12]*g[7]*g[9];l[12]=-g[4]*g[9]*g[14]+g[4]*g[10]*g[13]+g[8]*g[5]*g[14]-g[8]*g[6]*g[13]-g[12]*g[5]*g[10]+g[12]*g[6]*g[9];l[1]=-g[1]*g[10]*g[15]+g[1]*g[11]*g[14]+g[9]*g[2]*g[15]-g[9]*g[3]*g[14]-g[13]*g[2]*g[11]+g[13]*g[3]*g[10];l[5]=g[0]*g[10]*g[15]-g[0]*g[11]*g[14]-g[8]*g[2]*g[15]+g[8]*g[3]*g[14]+g[12]*g[2]*g[11]-g[12]*g[3]*g[10];l[9]=-g[0]*g[9]*g[15]+g[0]*g[11]*g[13]+g[8]*g[1]*g[15]-g[8]*g[3]*g[13]-g[12]*g[1]*g[11]+g[12]*g[3]*g[9];l[13]=g[0]*g[9]*g[14]-g[0]*g[10]*g[13]-g[8]*g[1]*g[14]+g[8]*g[2]*g[13]+g[12]*g[1]*g[10]-g[12]*g[2]*g[9];l[2]=g[1]*g[6]*g[15]-g[1]*g[7]*g[14]-g[5]*g[2]*g[15]+g[5]*g[3]*g[14]+g[13]*g[2]*g[7]-g[13]*g[3]*g[6];l[6]=-g[0]*g[6]*g[15]+g[0]*g[7]*g[14]+g[4]*g[2]*g[15]-g[4]*g[3]*g[14]-g[12]*g[2]*g[7]+g[12]*g[3]*g[6];l[10]=g[0]*g[5]*g[15]-g[0]*g[7]*g[13]-g[4]*g[1]*g[15]+g[4]*g[3]*g[13]+g[12]*g[1]*g[7]-g[12]*g[3]*g[5];l[14]=-g[0]*g[5]*g[14]+g[0]*g[6]*g[13]+g[4]*g[1]*g[14]-g[4]*g[2]*g[13]-g[12]*g[1]*g[6]+g[12]*g[2]*g[5];l[3]=-g[1]*g[6]*g[11]+g[1]*g[7]*g[10]+g[5]*g[2]*g[11]-g[5]*g[3]*g[10]-g[9]*g[2]*g[7]+g[9]*g[3]*g[6];l[7]=g[0]*g[6]*g[11]-g[0]*g[7]*g[10]-g[4]*g[2]*g[11]+g[4]*g[3]*g[10]+g[8]*g[2]*g[7]-g[8]*g[3]*g[6];l[11]=-g[0]*g[5]*g[11]+g[0]*g[7]*g[9]+g[4]*g[1]*g[11]-g[4]*g[3]*g[9]-g[8]*g[1]*g[7]+g[8]*g[3]*g[5];l[15]=g[0]*g[5]*g[10]-g[0]*g[6]*g[9]-g[4]*g[1]*g[10]+g[4]*g[2]*g[9]+g[8]*g[1]*g[6]-g[8]*g[2]*g[5];var j=g[0]*l[0]+g[1]*l[4]+g[2]*l[8]+g[3]*l[12];if(j===0){return !1}for(var j=1/j,h=0;h<16;h+=1){k[h]=l[h]*j}return !0};GMath.unProject=function(j,o,p,n,m,l,k){j=[j,o,p,1];o=[];GMath.matricesMultiply(n,m,o);if(!GMath.invertMatrix(o,o)){return !1}j[0]=(j[0]-l[0])/l[2];j[1]=(j[1]-l[1])/l[3];j[0]=j[0]*2-1;j[1]=j[1]*2-1;j[2]=j[2]*2-1;n=[];GMath.multMatrixVec(o,j,n);if(n[3]===0){return !1}n[0]/=n[3];n[1]/=n[3];n[2]/=n[3];k[0]=n[0];k[1]=n[1];k[2]=n[2];return !0};GMath.normalizeVector=function(c){var e=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],e=Math.sqrt(e);c[0]/=e;c[1]/=e;c[2]/=e};GMath.normalOfPlane=function(e,f,g){e[0]=f[1]*g[2]-g[1]*f[2];e[1]=f[2]*g[0]-g[2]*f[0];e[2]=f[0]*g[1]-g[0]*f[1]};GMath.matrixTranslate=function(f,h,j,g){h=[1,0,0,0,0,1,0,0,0,0,1,0,h,j,g,1];j=Array(16);for(g=0;g<16;g++){j[g]=f[g]}GMath.matricesMultiply(h,j,f)};GMath.project=function(k,q,r,p,o,n,m){var l=Array(8);l[0]=p[0]*k+p[4]*q+p[8]*r+p[12];l[1]=p[1]*k+p[5]*q+p[9]*r+p[13];l[2]=p[2]*k+p[6]*q+p[10]*r+p[14];l[3]=p[3]*k+p[7]*q+p[11]*r+p[15];l[4]=o[0]*l[0]+o[4]*l[1]+o[8]*l[2]+o[12]*l[3];l[5]=o[1]*l[0]+o[5]*l[1]+o[9]*l[2]+o[13]*l[3];l[6]=o[2]*l[0]+o[6]*l[1]+o[10]*l[2]+o[14]*l[3];l[7]=-l[2];if(l[7]==0){return 0}l[7]=1/l[7];l[4]*=l[7];l[5]*=l[7];l[6]*=l[7];m[0]=(l[4]*0.5+0.5)*n[2]+n[0];m[1]=(l[5]*0.5+0.5)*n[3]+n[1];m[2]=(1+l[6])*0.5;return 1};GMath.frustrum=function(h,m,n,l,k,j){return[2*k/(m-h),0,(m+h)/(m-h),0,0,2*k/(l-n),(l+n)/(l-n),0,0,0,-(j+k)/(j-k),-1,0,0,-2*j*k/(j-k),0]};GMath.lookAt=function(j,o,p,n){var m=[0,0,0],l=[0,0,0],k=[0,0,0];m[0]=p[0]-o[0];m[1]=p[1]-o[1];m[2]=p[2]-o[2];GMath.normalizeVector(m);GMath.normalOfPlane(l,m,n);GMath.normalizeVector(l);GMath.normalOfPlane(k,l,m);j[0]=l[0];j[4]=l[1];j[8]=l[2];j[12]=0;j[1]=k[0];j[5]=k[1];j[9]=k[2];j[13]=0;j[2]=-m[0];j[6]=-m[1];j[10]=-m[2];j[14]=0;j[3]=j[7]=j[11]=0;j[15]=1;GMath.matrixTranslate(j,-o[0],-o[1],-o[2])};GMath.matrixNullify=function(c){for(var e=0;e<16;e++){c[e]=0}};GMath.vecDot2=function(c,e){return c[0]*e[0]+c[1]*e[1]+c[2]*e[2]};GMath.vecDot=function(h,m,n,l,k,j){return h*l+m*k+n*j};GMath.vecCross1=function(j,o,p,n,m,l,k){k[0]=o*l-m*p;k[1]=p*n-l*j;k[2]=j*m-n*o};GMath.vecCross2=function(e,f,g){g[0]=e[1]*f[2]-f[1]*e[2];g[1]=e[2]*f[0]-f[2]*e[0];g[2]=e[0]*f[1]-f[0]*e[1]};GMath.vecSub=function(e,f,g){g[0]=e[0]-f[0];g[1]=e[1]-f[1];g[2]=e[2]-f[2]};GMath.vecSub2=function(g,k,l,j,h){h[0]=g[0+k]-l[0+j];h[1]=g[1+k]-l[1+j];h[2]=g[2+k]-l[2+j]};GMath.vecNull=function(c){return c[0]==0&&c[1]==0&&c[2]==0};GMath.rayIntersectsBounds=function(g,k,l,j){var h=GMath.rayIntersectsTriangle(g,k,l,j,0,4,8);return h>=0?h:h=GMath.rayIntersectsTriangle(g,k,l,j,12,4,8)};GMath.rayIntersectsTriangle=function(k,q,r,p,o,n,m){GMath.vecSub2(r,n,r,o,GMath.tmpV1);GMath.vecSub2(r,m,r,o,GMath.tmpV2);GMath.vecCross2(GMath.tmpV1,GMath.tmpV2,GMath.tmpV3);if(GMath.vecNull(GMath.tmpV3)){return -1}GMath.vecSub2(k,0,r,o,GMath.tmpW0);n=-GMath.vecDot2(GMath.tmpV3,GMath.tmpW0);m=GMath.vecDot2(GMath.tmpV3,q);if(Math.abs(m)<1e-7){return -1}n/=m;if(n<0){return -1}p[0]=k[0]+n*q[0];p[1]=k[1]+n*q[1];p[2]=k[2]+n*q[2];var l,q=GMath.vecDot2(GMath.tmpV1,GMath.tmpV1),n=GMath.vecDot2(GMath.tmpV1,GMath.tmpV2),m=GMath.vecDot2(GMath.tmpV2,GMath.tmpV2);GMath.tmpV3[0]=p[0]-r[o+0];GMath.tmpV3[1]=p[1]-r[o+1];GMath.tmpV3[2]=p[2]-r[o+2];r=GMath.vecDot2(GMath.tmpV3,GMath.tmpV1);o=GMath.vecDot2(GMath.tmpV3,GMath.tmpV2);l=n*n-q*m;m=(n*o-m*r)/l;if(m<0||m>1){return -1}r=(n*r-q*o)/l;return r<0||m+r>1?-1:Math.sqrt((p[0]-k[0])*(p[0]-k[0])+(p[1]-k[1])*(p[1]-k[1])+(p[2]-k[2])*(p[2]-k[2]))};GMath.dist=function(k,q){var r=k.matrix().getAsArray(),p=q.matrix().getAsArray(),o=r[12],n=r[13],r=r[14],m=p[12],l=p[13],p=p[14];return Math.sqrt((o-m)*(o-m)+(n-l)*(n-l)+(r-p)*(r-p))};function GameonCS(){this.mCanvasZ=this.mCanvasH=this.mCanvasW=0;this.mViewport=[0,0,0,0];this.mLookAt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.mLookAtHud=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.mProjection=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.mProjectionHud=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.mProjDataHud=[0,0,0,0];this.mProjData=[0,0,0,0];this.mCameraEye=[0,0,5];this.mCameraLookAt=[0,0,0];this.mCameraEyeHud=[0,0,5];this.mCameraLookAtHud=[0,0,0];this.mSpaceInit=this.mHudInit=!1;this.mHudBBox=[0,0,0,0,0,0,0,0];this.mWorldBBox=[0,0,0,0,0,0,0,0]}GameonCS.prototype.setGlu=function(){};GameonCS.prototype.saveViewport=function(c,e){this.mViewport[2]=c;this.mViewport[3]=e;this.mCameraEyeHud[2]==0&&(this.mCameraEyeHud[2]=5)};GameonCS.prototype.saveProjection=function(h,m,n,l,k,j){this.mProjection=GMath.frustrum(h,m,n,l,k,j);this.mProjectionHud=GMath.frustrum(h,m,n,l,k,j)};GameonCS.prototype.set=function(){this.mCameraEyeHud[2]=5};GameonCS.prototype.init=function(e,f,g){this.mCanvasW=e;this.mCanvasH=f;this.mCanvasZ=g};GameonCS.prototype.screen2space=function(h,m,n){var l=[3],k=[3],m=this.mViewport[3]-m;GMath.unProject(h,m,1,this.mLookAt,this.mProjection,this.mViewport,k);GMath.unProject(h,m,0,this.mLookAt,this.mProjection,this.mViewport,l);k[0]-=l[0];k[1]-=l[1];k[2]-=l[2];h=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);k[0]/=h;k[1]/=h;k[2]/=h;var j=m=h=0;h-=l[0];m-=l[1];j-=l[2];h=(0*h+0*m+-1*j)/(0*k[0]+0*k[1]+-1*k[2]);k[0]*=h;k[1]*=h;n[0]=k[0]+l[0];n[1]=k[1]+l[1]};GameonCS.prototype.saveLookAt=function(f,h,j){for(var g=0;g<16;g++){this.mLookAt[g]=0}GMath.lookAt(this.mLookAt,f,h,j)};GameonCS.prototype.saveLookAtHud=function(f,h,j){for(var g=0;g<16;g++){this.mLookAtHud[g]=0}GMath.lookAt(this.mLookAtHud,f,h,j)};GameonCS.prototype.screen2spaceVec=function(f,h,j){var g=[0,0,0],h=this.mViewport[3]-h;GMath.unProject(f,h,1,this.mLookAt,this.mProjection,this.mViewport,g);j[0]=g[0]-this.mCameraEye[0];j[1]=g[1]-this.mCameraEye[1];j[2]=g[2]-this.mCameraEye[2]};GameonCS.prototype.screen2spaceVecHud=function(f,h,j){var g=[0,0,0],h=this.mViewport[3]-h;GMath.unProject(f,h,1,this.mLookAtHud,this.mProjection,this.mViewport,g);j[0]=g[0]-this.mCameraEyeHud[0];j[1]=g[1]-this.mCameraEyeHud[1];j[2]=g[2]-this.mCameraEyeHud[2]};GameonCS.prototype.screen2spaceHud=function(h,m,n){var l=[0,0,0],k=[0,0,0],m=this.mViewport[3]-m;GMath.unProject(h,m,1,this.mLookAtHud,this.mProjection,this.mViewport,k);GMath.unProject(h,m,0,this.mLookAtHud,this.mProjection,this.mViewport,l);k[0]-=l[0];k[1]-=l[1];k[2]-=l[2];h=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);k[0]/=h;k[1]/=h;k[2]/=h;var j=m=h=0;h-=l[0];m-=l[1];j-=l[2];h=(0*h+0*m+-1*j)/(0*k[0]+0*k[1]+-1*k[2]);k[0]*=h;k[1]*=h;n[0]=k[0]+l[0];n[1]=k[1]+l[1]};GameonCS.prototype.snap_cam_z=function(j,o,p){for(var n=[16],m=[3],l=0;l<3;l++){m[l]=j[l]}for(j=1;j<100;j+=0.05){l=this.mCanvasW;m[2]=j;var k=[3];GMath.lookAt(n,m,o,p);if(GMath.project(l,0,0,n,this.mProjection,this.mViewport,k,0)&&k[0]>0&&k[0]<this.mViewport[2]){return this.mCameraEye[0]=0,this.mCameraEye[1]=0,this.mCameraEye[2]=j,this.saveLookAt(this.mCameraEye,this.mCameraLookAt,[0,1,0]),j}}return 0};GameonCS.prototype.snap_cam_z_hud=function(j,o,p){for(var n=[16],m=[3],l=0;l<3;l++){m[l]=j[l]}for(j=1;j<100;j+=0.05){l=this.mCanvasW;m[2]=j;var k=[3];GMath.lookAt(n,m,o,p);if(GMath.project(l,0,0,n,this.mProjection,this.mViewport,k,0)&&k[0]>0&&k[0]<this.mViewport[2]){return this.mCameraEyeHud[0]=0,this.mCameraEyeHud[1]=0,this.mCameraEyeHud[2]=j,this.saveLookAtHud(this.mCameraEyeHud,this.mCameraLookAtHud,[0,1,0]),j}}return 0};GameonCS.prototype.setCamera=function(c,e){this.mCameraEye[0]=e[0];this.mCameraEye[1]=e[1];this.mCameraEye[2]=e[2];this.mCameraLookAt[0]=c[0];this.mCameraLookAt[1]=c[1];this.mCameraLookAt[2]=c[2];this.saveLookAt(this.mCameraEye,this.mCameraLookAt,[0,1,0])};GameonCS.prototype.applyCamera=function(c){if(!this.mSpaceInit){this.mSpaceInit=!0,this.saveLookAt(this.mCameraEye,this.mCameraLookAt,[0,1,0])}c.perspectiveMatrix.makeIdentity();c.perspectiveMatrix.perspective(this.mProjData[0],this.mProjData[1],this.mProjData[2],this.mProjData[3]);var e=new J3DIMatrix4;e.load(this.mLookAt);c.perspectiveMatrix.multiply(e);c.perspectiveMatrix.setUniform(c,c.u_modelProjMatrixLoc,!1)};GameonCS.prototype.setCameraHud=function(c,e){this.mCameraEyeHud[0]=e[0];this.mCameraEyeHud[1]=e[1];this.mCameraEyeHud[2]=e[2];this.mCameraLookAtHud[0]=c[0];this.mCameraLookAtHud[1]=c[1];this.mCameraLookAtHud[2]=c[2];this.saveLookAtHud(this.mCameraEyeHud,this.mCameraLookAtHud,[0,1,0])};GameonCS.prototype.applyCameraHud=function(c){c.perspectiveMatrix.makeIdentity();c.perspectiveMatrix.perspective(this.mProjData[0],this.mProjData[1],this.mProjData[2],this.mProjData[3]);var e=new J3DIMatrix4;e.load(this.mLookAtHud);c.perspectiveMatrix.multiply(e);c.perspectiveMatrix.setUniform(c,c.u_modelProjMatrixLoc,!1);if(!this.mHudInit){this.mHudInit=!0,this.saveLookAtHud(this.mCameraEyeHud,this.mCameraLookAtHud,[0,1,0])}};GameonCS.prototype.getScreenBounds=function(e,f){var g=[2];this.screen2space(this.mViewport[0],this.mViewport[1],g);e[0]=g[0];e[1]=g[1];this.screen2space(this.mViewport[2],this.mViewport[1],g);e[2]=g[0];e[3]=g[1];this.screen2space(this.mViewport[2],this.mViewport[3],g);e[4]=g[0];e[5]=g[1];this.screen2space(this.mViewport[0],this.mViewport[3],g);e[6]=g[0];e[7]=g[1];this.screen2spaceHud(this.mViewport[0],this.mViewport[1],g);f[0]=g[0];f[1]=g[1];this.screen2spaceHud(this.mViewport[2],this.mViewport[1],g);f[2]=g[0];f[3]=g[1];this.screen2spaceHud(this.mViewport[2],this.mViewport[3],g);f[4]=g[0];f[5]=g[1];this.screen2spaceHud(this.mViewport[0],this.mViewport[3],g);f[6]=g[0];f[7]=g[1];for(g=0;g<8;g++){this.mWorldBBox[g]=e[g],this.mHudBBox[g]=f[g]}};GameonCS.prototype.getCanvasW=function(){return this.mViewport[2]-this.mViewport[0]};GameonCS.prototype.getCanvasH=function(){return this.mViewport[3]-this.mViewport[1]};GameonCS.prototype.saveProjHud=function(f,h,j,g){this.mProjDataHud[0]=f;this.mProjDataHud[1]=h;this.mProjDataHud[2]=j;this.mProjDataHud[3]=g};GameonCS.prototype.saveProj=function(f,h,j,g){this.mProjData[0]=f;this.mProjData[1]=h;this.mProjData[2]=j;this.mProjData[3]=g};GameonCS.prototype.getCanvasW=function(){return this.mViewport[2]-this.mViewport[0]};GameonCS.prototype.getCanvasH=function(){return this.mViewport[3]-this.mViewport[1]};GameonCS.prototype.worldWidth=function(){return this.mWorldBBox[2]-this.mWorldBBox[0]};GameonCS.prototype.worldHeight=function(){return this.mWorldBBox[2]-this.mWorldBBox[0]};GameonCS.prototype.worldCenterX=function(){return(this.mWorldBBox[2]+this.mWorldBBox[0])/2};GameonCS.prototype.worldCenterY=function(){return(this.mWorldBBox[1]+this.mWorldBBox[5])/2};GameonCS.prototype.hudWidth=function(){return this.mHudBBox[2]-this.mHudBBox[0]};GameonCS.prototype.hudHeight=function(){return this.mHudBBox[2]-this.mHudBBox[0]};GameonCS.prototype.hudCenterX=function(){return(this.mHudBBox[2]+this.mHudBBox[0])/2};GameonCS.prototype.hudCenterY=function(){return(this.mHudBBox[1]+this.mHudBBox[5])/2};GameonCS.prototype.eye=function(){return this.mCameraEye};GameonCS.prototype.eyeHud=function(){return this.mCameraEyeHud};function GameonModel(c,e){this.mName=c;this.mRefs=[];this.mVisibleRefs=[];this.mLoc=GameonWorld_Display.WORLD;this.mSubmodels=0;this.mModelTemplate=GameonModelData_Type.NONE;this.mIsModel=this.mHasAlpha=!1;this.mApp=e;this.mWorld=e.mWorld;this.mVisible=!0;this.mName="";this.mBBoxMin=Array(3);this.mBBoxMax=Array(3);this.mTextureOffset=0;this.mTextureH=this.mTextureW=1;this.mTextureHDiv=this.mTextureWDiv=0;this.mForceHalfTexturing=this.mEnabled=!1;this.mForcedOwner=0;this.mShapeList=[];this.mVertexList=[];this.mIndexCount=0;this.mTextureBuffer=this.mIndexBuffer=this.mColorBuffer=this.mVertexBuffer=void 0;this.mTextureID=this.mApp.textures().get(TextureFactory_Type.DEFAULT);this.mTransform=!1;this.mBBoxMin=[];this.mBBoxMax=[];this.mColorOffset=this.mVertexOffset=0;this.mGenerated=!1}GameonModel.inheritsFrom(GLModel);GameonModel.prototype.createPlane=function(k,q,r,p,o,n,m){var r=new GLShape(this),l=r.addVertex(k,q,n,0.01,0.99,m),q=r.addVertex(p,q,n,0.99,0.99,m),k=r.addVertex(k,o,n,0.01,0.01,m),p=r.addVertex(p,o,n,0.99,0.01,m);r.addFace(new GLFace(l,p,k));r.addFace(new GLFace(l,q,p));this.addShape(r)};GameonModel.prototype.createPlaneTex=function(B,z,A,w,v,u,t,s,q,p,r){var A=new GLShape(this),n=A.addVertex(B,z,u,t,p,r),z=A.addVertex(w,z,u,q,p,r),B=A.addVertex(B,v,u,t,s,r),w=A.addVertex(w,v,u,q,s,r);A.addFace(new GLFace(n,w,B));A.addFace(new GLFace(n,z,w));this.addShape(A)};GameonModel.prototype.createModel=function(P,N,O,M,L,K,J,I){for(var G=L-N,F=J-O,H=K-M,P=GameonModelData.getData(P),D=this.mApp.colors().white,C=P.length,E=new GLShape(this),N=(L+N)/2,O=(K+O)/2,M=(J+M)/2,J=0;J<C;J+=9){var K=P[J][0],L=P[J][1],A=P[J][2],B=P[J+2][0],z=1-P[J+2][1];K*=G;K+=N;L*=F;L+=O;A*=H;A+=M;var K=E.addVertex(K,L,A,B,z,D),L=P[J+3][0],A=P[J+3][1],B=P[J+3][2],z=P[J+5][0],w=1-P[J+5][1];L*=G;L+=N;A*=F;A+=O;B*=H;B+=M;var L=E.addVertex(L,A,B,z,w,D),A=P[J+6][0],B=P[J+6][1],z=P[J+6][2],w=P[J+8][0],v=1-P[J+8][1];A*=G;A+=N;B*=F;B+=O;z*=H;z+=M;A=E.addVertex(A,B,z,w,v,D);E.addFace(new GLFace(K,L,A))}this.addShape(E);this.mTextureID=I};GameonModel.prototype.createModel=function(v,t){for(var u=GameonModelData.getData(v),s=u.length,r=this.mApp.colors().white,q=new GLShape(this),p=0;p<s;p+=9){var o=q.addVertex(u[p][0],u[p][1],u[p][2],u[p+2][0],1-u[p+2][1],r),n=q.addVertex(u[p+3][0],u[p+3][1],u[p+3][2],u[p+5][0],1-u[p+5][1],r),k=q.addVertex(u[p+6][0],u[p+6][1],u[p+6][2],u[p+8][0],1-u[p+8][1],r);q.addFace(new GLFace(o,n,k))}this.addShape(q);this.mTextureID=t};GameonModel.prototype.createModel2=function(J,H,I,G,F,E,D,C){var A=F-H,z=D-I,B=E-G;if(C==void 0){C=this.mApp.colors().white}for(var J=GameonModelData.getData(J),v=J.length,u=new GLShape(this),H=(F+H)/2,I=(E+I)/2,G=(D+G)/2,D=0;D<v;D+=9){var E=J[D][0],F=J[D][1],w=J[D][2];E*=A;E+=H;F*=z;F+=I;w*=B;w+=G;var E=u.addVertex(E,F,w,J[D+2][0],1-J[D+2][1],C),F=J[D+3][0],w=J[D+3][1],s=J[D+3][2];F*=A;F+=H;w*=z;w+=I;s*=B;s+=G;var F=u.addVertex(F,w,s,J[D+5][0],1-J[D+5][1],C),w=J[D+6][0],s=J[D+6][1],t=J[D+6][2];w*=A;w+=H;s*=z;s+=I;t*=B;t+=G;w=u.addVertex(w,s,t,J[D+8][0],1-J[D+8][1],C);u.addFace(new GLFace(E,F,w))}this.addShape(u)};GameonModel.prototype.createOctogon=function(H,F,G,E,D,C,B){var G=new GLShape(this),A=(E-H)/4,w=(D-F)/4,v=G.addVertex(H+A,D,C,0,1,B),z=G.addVertex(H+3*A,D,C,0,1,B),t=G.addVertex(E,F+3*w,C,0,1,B),s=G.addVertex(E,F+w,C,0,1,B),u=G.addVertex(H+3*A,F,C,0,1,B),A=G.addVertex(H+A,F,C,0,1,B),q=G.addVertex(H,F+w,C,0,1,B),B=G.addVertex(H,F+3*w,C,0,1,B),H=G.addVertex((E+H)/2,(D+F)/2,C,0.5,0.5,this.mApp.colors().white);G.addFace(new GLFace(H,v,B));G.addFace(new GLFace(H,z,v));G.addFace(new GLFace(H,t,z));G.addFace(new GLFace(H,s,t));G.addFace(new GLFace(H,u,s));G.addFace(new GLFace(H,A,u));G.addFace(new GLFace(H,q,A));G.addFace(new GLFace(H,B,q));this.addShape(G)};GameonModel.prototype.createPlane=function(k,q,r,p,o,n,m){var r=new GLShape(this),l=r.addVertex(k,q,n,0,1,m),q=r.addVertex(p,q,n,1,1,m),k=r.addVertex(k,o,n,0,0,m),p=r.addVertex(p,o,n,1,0,m);r.addFace(new GLFace(l,p,k));r.addFace(new GLFace(l,q,p));this.addShape(r)};GameonModel.prototype.createPlane4=function(t,r,s,q,p,o,n,m){s=new GLShape(this);if(n==void 0){n=this.mApp.colors().white}if(m==void 0){m=this.mApp.colors().white}var k=s.addVertex(t,r,o,0,1,n),r=s.addVertex(q,r,o,1,1,n),t=s.addVertex(t,p,o,0,0,m),q=s.addVertex(q,p,o,1,0,m);s.addFace(new GLFace(k,q,t));s.addFace(new GLFace(k,r,q));this.addShape(s)};GameonModel.prototype.createPlaneForLetter=function(k,q,r,p,o,n,m){var r=new GLShape(this),l=r.addVertex(k,q,n,0.01,0.99,m),q=r.addVertex(p,q,n,0.99,0.99,m),k=r.addVertex(k,o,n,0.01,0.01,m),p=r.addVertex(p,o,n,0.99,0.01,m);r.addFace(new GLFace(l,p,k));r.addFace(new GLFace(l,q,p));this.addShape(r)};GameonModel.prototype.createPlane2=function(k,q,r,p,o,n,m){var r=new GLShape(this),l=r.addVertex(k,q,n,0,1,m),q=r.addVertex(p,q,n,1,1,m),k=r.addVertex(k,o,n,0,0,m),p=r.addVertex(p,o,n,1,0,m);r.addFace(new GLFace(l,p,k));r.addFace(new GLFace(l,q,p));this.addShape(r)};GameonModel.prototype.createPlane3=function(k,q,r,p,o,n,m){var r=new GLShape(this),l=r.addVertex(k,q,n,0,1,m),q=r.addVertex(p,q,n,1,1,this.mApp.colors().white),k=r.addVertex(k,o,n,0.1,0,m),p=r.addVertex(p,o,n,0.9,0,m);r.addFace(new GLFace(l,p,k));r.addFace(new GLFace(l,q,p));this.addShape(r)};GameonModel.prototype.createCube=function(D,B,C,A,z,w,v){var u=new GLShape(this),s=this.mApp.colors().white,r=u.addVertex(D,B,C,0,0,s),t=u.addVertex(A,B,C,0,0,s),q=u.addVertex(D,z,C,0,0,s),C=u.addVertex(A,z,C,0,0,s),n=u.addVertex(D,B,w,0,0,v),B=u.addVertex(A,B,w,0,0,v),D=u.addVertex(D,z,w,0,0,v),A=u.addVertex(A,z,w,0,0,s);u.addFace(new GLFace(r,B,n));u.addFace(new GLFace(r,t,B));u.addFace(new GLFace(n,A,D));u.addFace(new GLFace(n,B,A));u.addFace(new GLFace(r,D,q));u.addFace(new GLFace(r,n,D));u.addFace(new GLFace(t,A,B));u.addFace(new GLFace(t,C,A));u.addFace(new GLFace(r,C,t));u.addFace(new GLFace(r,q,C));u.addFace(new GLFace(q,A,C));u.addFace(new GLFace(q,D,A));this.addShape(u)};GameonModel.prototype.addref=function(c){if(this.mRefs.indexOf(c)<0){this.mRefs.push(c),c.set(),this.mEnabled=!0}c.setParent(this);c.getVisible()&&this.addVisibleRef(c)};GameonModel.prototype.draw=function(f,h){if(this.mEnabled&&this.mVisible&&this.mVisibleRefs.length>0){this.setupRef(f);for(var j=0;j<this.mVisibleRefs.length;j++){var g=this.mVisibleRefs[j];g.mLoc==h&&this.drawRef(f,g)}}};GameonModel.prototype.removeref=function(c){c=this.mRefs.indexOf(c);if(c>=0&&(this.mRefs.splice(c,1),this.mRefs.length==0)){this.mEnabled=!1}};GameonModel.prototype.setTexture=function(c){this.mTextureID=c};GameonModel.prototype.createCard=function(D,B,C,A,z,w,v){var C=new GLShape(this),u=C.addVertex(D,B,w+0.002,0,0,v),s=C.addVertex(A,B,w+0.002,1,0,v),r=C.addVertex(D,(B+z)/2,w+0.002,0,1,v),t=C.addVertex(A,(B+z)/2,w+0.002,1,1,v),q=C.addVertex(D,z,w+0.002,0,0,v),n=C.addVertex(A,z,w+0.002,1,0,v);C.addFace(new GLFace(r,n,q));C.addFace(new GLFace(r,t,n));C.addFace(new GLFace(u,t,r));C.addFace(new GLFace(u,s,t));u=C.addVertex(D,B,w-0.002,0,0,v);s=C.addVertex(A,B,w-0.002,1,0,v);r=C.addVertex(D,(B+z)/2,w-0.002,0,1,v);B=C.addVertex(A,(B+z)/2,w-0.002,1,1,v);D=C.addVertex(D,z,w-0.002,0,0,v);A=C.addVertex(A,z,w-0.002,1,0,v);C.addFace(new GLFace(r,D,A));C.addFace(new GLFace(r,A,B));C.addFace(new GLFace(B,u,r));C.addFace(new GLFace(s,u,B));this.addShape(C)};GameonModel.prototype.createCard2=function(B,z,A,w,v,u,t){var A=new GLShape(this),s=(w-B)/30,q=A.addVertex(B+s,z+s,u+0.002,0.01,0.99,t),p=A.addVertex(w-s,z+s,u+0.002,0.99,0.99,t),r=A.addVertex(B+s,v-s,u+0.002,0.01,0.01,t),n=A.addVertex(w-s,v-s,u+0.002,0.99,0.01,t);A.addFace(new GLFace(q,n,r));A.addFace(new GLFace(q,p,n));q=A.addVertex(B+s,z+s,u-0.002,0.01,0.99,t);z=A.addVertex(w-s,z+s,u-0.002,0.99,0.99,t);B=A.addVertex(B+s,v-s,u-0.002,0.01,0.01,t);w=A.addVertex(w-s,v-s,u-0.002,0.99,0.01,t);A.addFace(new GLFace(q,B,w));A.addFace(new GLFace(q,w,z));this.addShape(A)};GameonModel.prototype.setState=function(e){for(var f=0;f<this.mRefs.length;f++){var g=this.mRefs[f];e==LayoutArea_State.HIDDEN?g.setVisible(!1):g.setVisible(!0)}e==LayoutArea_State.HIDDEN?this.setVisible(!1):this.setVisible(!0)};GameonModel.prototype.createFrame=function(t,r,s,q,p,o,n,m,k){k==void 0&&this.mApp.colors();this.createPlane(t-n/2,r-m/2,o,t+n/2,p+m/2,o,k);this.createPlane(q-n/2,r-m/2,o,q+n/2,p+m/2,o,k);this.createPlane(t+n/2,r-m/2,o,q-n/2,r+m/2,o,k);this.createPlane(t+n/2,p-m/2,o,q-n/2,p+m/2,o,k)};GameonModel.prototype.createPlaneTex=function(F,D,E,C,B,A,z,w,u,t,v,r,q){var E=new GLShape(this),s=E.addVertex(F,D,A,z,t,this.mApp.colors().white),D=E.addVertex(C,D,A,u,t,this.mApp.colors().white),F=E.addVertex(F,B,A,z,w,this.mApp.colors().white),C=E.addVertex(C,B,A,u,w,this.mApp.colors().white),B=r*q,r=(r+1)*q;s.red=v[0].red+(v[2].red-v[0].red)*B;s.green=v[0].green+(v[2].green-v[0].green)*B;s.blue=v[0].blue+(v[2].blue-v[0].blue)*B;s.alpha=v[0].alpha+(v[2].alpha-v[0].alpha)*B;D.red=v[1].red+(v[3].red-v[1].red)*B;D.green=v[1].green+(v[3].green-v[1].green)*B;D.blue=v[1].blue+(v[3].blue-v[1].blue)*B;D.alpha=v[1].alpha+(v[3].alpha-v[1].alpha)*B;F.red=v[0].red+(v[2].red-v[0].red)*r;F.green=v[0].green+(v[2].green-v[0].green)*r;F.blue=v[0].blue+(v[2].blue-v[0].blue)*r;F.alpha=v[0].alpha+(v[2].alpha-v[0].alpha)*r;C.red=v[1].red+(v[3].red-v[1].red)*r;C.green=v[1].green+(v[3].green-v[1].green)*r;C.blue=v[1].blue+(v[3].blue-v[1].blue)*r;C.alpha=v[1].alpha+(v[3].alpha-v[1].alpha)*r;E.addFace(new GLFace(s,C,F));E.addFace(new GLFace(s,D,C));this.addShape(E)};GameonModel.prototype.createPlaneTex2=function(F,D,E,C,B,A,z,w,u,t,v,r,q){var E=new GLShape(this),s=E.addVertex(F,D,A,z,t,this.mApp.colors().white),D=E.addVertex(C,D,A,u,t,this.mApp.colors().white),F=E.addVertex(F,B,A,z,w,this.mApp.colors().white),C=E.addVertex(C,B,A,u,w,this.mApp.colors().white),B=r*q,r=(r+1)*q;s.red=v[0].red+(v[2].red-v[0].red)*B;s.green=v[0].green+(v[2].green-v[0].green)*B;s.blue=v[0].blue+(v[2].blue-v[0].blue)*B;s.alpha=v[0].alpha+(v[2].alpha-v[0].alpha)*B;D.red=v[0].red+(v[2].red-v[0].red)*r;D.green=v[0].green+(v[2].green-v[0].green)*r;D.blue=v[0].blue+(v[2].blue-v[0].blue)*r;D.alpha=v[0].alpha+(v[2].alpha-v[0].alpha)*r;F.red=v[1].red+(v[3].red-v[1].red)*B;F.green=v[1].green+(v[3].green-v[1].green)*B;F.blue=v[1].blue+(v[3].blue-v[1].blue)*B;F.alpha=v[1].alpha+(v[3].alpha-v[1].alpha)*B;C.red=v[1].red+(v[3].red-v[1].red)*r;C.green=v[1].green+(v[3].green-v[1].green)*r;C.blue=v[1].blue+(v[3].blue-v[1].blue)*r;C.alpha=v[1].alpha+(v[3].alpha-v[1].alpha)*r;E.addFace(new GLFace(s,C,F));E.addFace(new GLFace(s,D,C));this.addShape(E)};GameonModel.prototype.createAnimTrans=function(k,q,r,p){p==void 0&&(p=0);var o=new GameonModelRef(void 0);o.copy(this.mRefs[p]);o.copyMat(this.mRefs[p]);var n=new GameonModelRef(void 0);n.copy(o);var m,l;o.mLoc==GameonWorld_Display.WORLD?(m=this.mApp.mCS.mWorldBBox[2]-this.mApp.mCS.mHudBBox[0],l=this.mApp.mCS.mWorldBBox[1]-this.mApp.mCS.mHudBBox[5]):(m=this.mApp.mCS.mHudBBox[2]-this.mApp.mCS.mHudBBox[0],l=this.mApp.mCS.mHudBBox[1]-this.mApp.mCS.mHudBBox[5]);k=="left"?n.addAreaPosition(-m,0,0):k=="right"?n.addAreaPosition(m,0,0):k=="top"?n.addAreaPosition(0,+l,0):k=="tophigh"?n.addAreaPosition(0,+l+l,0):k=="bottom"?n.addAreaPosition(0,-l,0):k=="scaleout"?n.mulScale(30,30,30):k=="scalein"?n.mulScale(30,30,30):k=="swirlin"?(n.mulScale(30,30,30),n.addAreaRotate(0,0,720)):k=="swirlout"&&(n.mulScale(30,30,30),n.addAreaRotate(0,0,720));anim=r?this.mApp.anims().createAnim(o,n,this.mRefs[p],q,2,void 0,1,!0):this.mApp.anims().createAnim(n,o,this.mRefs[p],q,2,void 0,1,!1)};GameonModel.prototype.addVisibleRef=function(c){c.getVisible()&&this.mVisibleRefs.indexOf(c)<0&&(this.mVisibleRefs.length==0&&this.setVisible(!0),this.mVisibleRefs.push(c))};GameonModel.prototype.remVisibleRef=function(c){c.getVisible()==!1&&(c=this.mVisibleRefs.indexOf(c),c>=0&&(this.mVisibleRefs.splice(c,1),this.mVisibleRefs.length==0&&this.setVisible(!1)))};GameonModel.prototype.setVisible=function(c){c?(this.mVisible=!0,this.mWorld!=void 0&&this.mWorld.setVisible(this)):(this.mVisible=!1,this.mWorld!=void 0&&this.mWorld.remVisible(this))};GameonModel.prototype.ref=function(c){return c<0||c>=this.mRefs.length?void 0:this.mRefs[c]};GameonModel.prototype.findRef=function(c){return this.mRefs.indexOf(c)};GameonModel.prototype.unsetWorld=function(){this.mWorld=void 0};function GameonWorldView(c,e){this.mWorld=c;this.mDoOnce=!1;this.mApp=e;this.mLockedDraw=!1;this.mFov=45;this.mNear=0.1;this.mFar=8.7;this.mFovHud=45;this.mNearHud=0.1;this.mFarHud=8.7;this.mSplashLookat=new J3DIMatrix4}GameonWorldView.prototype.onDrawFrame=function(c){if(!this.mLockedDraw){c.colorMask(!0,!0,!0,!1),c.clearDepth(1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),this.mApp.cs().applyCamera(c),this.mWorld.mInDraw=!0,this.mWorld.draw(c),c.clear(c.DEPTH_BUFFER_BIT),this.mApp.cs().applyCameraHud(c),this.mWorld.drawHud(c),this.mWorld.mInDraw=!1,c.colorMask(!0,!0,!0,!0)}};GameonWorldView.prototype.onSurfaceChanged=function(e,f,g){this.mWidth=f;this.mHeight=g;this.mWorld.prepare(e);e.viewport(0,0,f,g);this.mApp.cs().saveViewport(f,g);e.perspectiveMatrix=new J3DIMatrix4};GameonWorldView.prototype.onSurfaceCreated=function(c){this.doOnce?this.mApp.textures().init(c):(this.mApp.textures().init(c),this.mApp.sounds().init(this.mApp),this.mApp.mSplashScreen!=void 0&&this.mApp.mSplashScreen.length>0&&this.mWorld.initSplash(c,this.mApp.mSplashScreen),this.doOnce=!0);this.perspective(c,45,this.mWidth/this.mHeight,0.1,8.7)};GameonWorldView.prototype.perspective=function(j,o,p,n,m){var l,k;k=n*Math.tan(o*Math.PI/360);l=-k;this.mApp.cs().saveProjection(l*p,k*p,l,k,n,m);this.mApp.cs().saveProj(o,p,n,m);this.mApp.cs().saveProjHud(o,p,n,m);j.perspectiveMatrix.perspective(o,p,n,m)};GameonWorldView.prototype.drawSplash=function(e){e.perspectiveMatrix.makeIdentity();e.perspectiveMatrix.perspective(this.mApp.cs().mProjData[0],this.mApp.cs().mProjData[1],this.mApp.cs().mProjData[2],this.mApp.cs().mProjData[3]);var f=new J3DIMatrix4,g=Array(16);GMath.lookAt(g,[0,0,5],[0,0,0],[0,1,0]);f.load(g);e.perspectiveMatrix.multiply(f);e.perspectiveMatrix.setUniform(e,e.u_modelProjMatrixLoc,!1);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);this.mWorld.drawSplash(e);return !0};GameonWorldView.prototype.lockDraw=function(c){this.mLockedDraw=c};GameonWorldView.prototype.setFov=function(e,f,g){this.mFar=g;this.mNear=f;this.mFov=e};GameonWorldView.prototype.setFovHud=function(e,f,g){this.mFarHud=g;this.mNearHud=f;this.mFovHud=e};function Areas(){this.areas=[];this.mVisible=!1}function LayoutGrid(c,e){this.mVisibleAreas=[];this.mAreas={};this.mAreasHud={};this.mPageIds={};this.mWorld=c;this.mApp=e;this.mPagePopup=""}LayoutGrid.prototype.getWorld=function(){return this.mWorld};LayoutGrid.prototype.initLayout2=function(g){var k;k=g.area;for(var l=0;l<k.length;l++){var j=this.processAreaData2(k[l]),h=g.pageid;this.addToPage(j,h);if(h=="*"){j.mPageVisible=!0,j.updateState("visible",!1)}}};LayoutGrid.prototype.processAreaData2=function(e){var f=e.type,g=this.getArea(e.id);g!=void 0&&this.removeArea(g);f=this.createArea(f);if(f!=void 0){f.mWorld=this.mWorld;f.mParent=this;f.mID=e.id;f.mParent=this;e.size!=void 0&&f.setSize(e.size);e.location!=void 0&&f.updateLocation(e.location);e.rotation!=void 0&&f.setRotation(e.rotation);e.bounds!=void 0&&f.updateBounds(e.bounds);e.state!=void 0&&f.updateState(e.state,!0);e.display!=void 0&&f.updateDisplay(e.display);e.layout!=void 0&&f.updateLayout(e.layout);e.text!=void 0&&f.setText(e.text);e.onclick!=void 0&&f.updateOnclick(e.onclick);e.onfocusgain!=void 0&&f.updateOnFocusGain(e.onfocusgain);e.onfocuslost!=void 0&&f.updateOnFocusLost(e.onfocuslost);if(e.data!=void 0){f.mData=e.data}e.background!=void 0&&f.updateBackground(e.background);e.foreground!=void 0&&f.updateForeground(e.foreground);e.colors!=void 0&&f.updateColors(e.colors);e.border!=void 0&&f.updateBorder(e.border);e.fields!=void 0&&f.createFields(e.fields);f.initLayout();e.items!=void 0&&f.createItems(e.items,!1);f.mDisplay==GameonWorld_Display.HUD?this.mAreasHud[f.mID]=f:this.mAreas[f.mID]=f;f.createWorldModel();f.updateModelsTransformation();return f}};LayoutGrid.prototype.createArea=function(e){var f=void 0,g=void 0,e=e.split(".");e.length>0&&(f=e[0]);e.length>1&&(g=e[1]);if(f!=void 0){if(f=="table"){return new LayoutAreaTable(g,this.mApp)}else{if(f=="text"){return new LayoutAreaText(g,this.mApp)}else{if(f=="layout"){return new LayoutAreaLayout(g,this.mApp)}else{if(f=="cards"){return new LayoutAreaCards(g,this.mApp)}}}}}};LayoutGrid.prototype.moveFigure=function(j,o,p,n){var m=void 0,l=void 0,k=void 0,l=this.getArea(j),k=this.getArea(p);l!=void 0&&(m=l.getItem(o),l.removeFigure(o));m!=void 0&&k!=void 0&&k.placeFigure(n,m,!1)};LayoutGrid.prototype.setAreaState=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateState(f,!1)};LayoutGrid.prototype.setAreaLocation=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateLocation(f)};LayoutGrid.prototype.setAreaRotation=function(e,f){var g=this.getArea(e);g!=void 0&&g.setRotation(f)};LayoutGrid.prototype.setAreaScale=function(e,f){var g=this.getArea(e);g!=void 0&&g.setScale(f)};LayoutGrid.prototype.setAreaSize=function(e,f){var g=this.getArea(e);g!=void 0&&g.setSize(f)};LayoutGrid.prototype.areaDataUpdate=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateData(f)};LayoutGrid.prototype.getArea=function(c){var e=this.mAreas[c];if(e!=void 0){return e}c=this.mAreasHud[c];if(c!=void 0){return c}};LayoutGrid.prototype.areaFieldSetItem=function(e,f,g){f=this.getArea(f);f!=void 0&&f.fieldSetItem(g,e)};LayoutGrid.prototype.areaUpdateItems=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateItems(f)};LayoutGrid.prototype.areaUpdateText=function(e,f){var g=this.getArea(e);g!=void 0&&g.setText(f)};LayoutGrid.prototype.areaUpdateTextColor=function(e,f){var g=this.getArea(e);g!=void 0&&g.setTextColor(f)};LayoutGrid.prototype.onAreaDelete=function(c){c=this.getArea(c);c!=void 0&&this.removeArea(c)};LayoutGrid.prototype.clearArea=function(c){if(c=="*"){for(c=this.mAreas.length-1;c>=0;c--){this.mAreas[c].clear()}}else{c=this.getArea(c),c!=void 0&&c.clear()}};LayoutGrid.prototype.areaUpdateForeground=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateForeground(f)};LayoutGrid.prototype.areaUpdateBackground=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateBackground(f,!0)};LayoutGrid.prototype.areaUpdateFields=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateFields(f)};LayoutGrid.prototype.areaUpdateLayout=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateLayout(f)};LayoutGrid.prototype.onAreaUpdateLocation=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateLocation(f)};LayoutGrid.prototype.removeFigure=function(e,f){var g=this.getArea(e);g!=void 0&&g.removeFigure(f)};LayoutGrid.prototype.onAreaUpdateOnclick=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateOnclick(f)};LayoutGrid.prototype.onAreaUpdateOnFocusLost=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateOnFocusLost(f)};LayoutGrid.prototype.onAreaUpdateOnFocusGain=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateOnFocusGain(f)};LayoutGrid.prototype.clearAll=function(){this.mAreas.clear();this.mAreasHud.clear()};LayoutGrid.prototype.onEvent2=function(e){var f=e.data,g=e.type;switch(parseInt(e.id)){case 2012:this.mPagePopup=g;case 2010:this.showPage(g,void 0);break;case 2013:this.mPagePopup=g;case 2011:this.showPage(g,f);break;case 2015:this.clearPage(g);case 2020:if(this.mPagePopup==g){this.mPagePopup=""}this.hidePage(g,void 0);break;case 2021:if(this.mPagePopup==g){this.mPagePopup=""}this.hidePage(g,f);break;case 2030:this.animScreen(g,f);break;case 2500:this.onCameraFit(g,f);break;case 2501:this.onCameraSet(g,f);break;case 2502:this.onCameraProj(g,f);break;case 2510:this.onCameraFitHud(g,f);break;case 2511:this.onCameraSetHud(g,f);break;case 2512:this.onCameraProjHud(g,f);break;case 3001:this.onAreaDelete(g,f);break;case 3002:this.onAreaClear(g,f,!0);break;case 3003:this.onAreaSwapId(g,f);break;case 3004:this.onAreaClear(g,f,!1);break;case 3050:this.onAreaFieldSetItem(g,f);break;case 3051:this.onAreaFieldMoveItem(g,f);break;case 3053:this.onAreaFieldMoveItemA(g,f);break;case 3054:this.onItemsAnim(g,f);break;case 3055:this.onItemAnim(g,f);break;case 3052:this.onAreaFieldRemoveItem(g,f);break;case 3110:this.setAreaState(g,f);break;case 3130:this.setAreaSize(g,f);break;case 3190:this.setAreaLocation(g,f);break;case 3191:this.setAreaScale(g,f);break;case 3195:this.setAreaRotation(g,f);break;case 3192:this.setAreaItemScale(g,f);break;case 3220:this.onAreaUpdateItems(g,f);break;case 3221:this.onAreaUpdateItemsA(g,f);break;case 3222:this.onAreaUpdateItem(g,f,!1);break;case 3223:this.onAreaInvertItem(g,f);break;case 3224:this.onAreaUpdateItem(g,f,!0);break;case 3225:this.onAreaPushFrontItem(g,f);break;case 3240:this.areaUpdateForeground(g,f);break;case 3250:this.areaUpdateBackground(g,f);break;case 3200:this.onAreaUpdateOnclick(g,f);break;case 3201:this.onAreaUpdateOnFocusGain(g,f);break;case 3202:this.onAreaUpdateOnFocusLost(g,f);break;case 3180:this.areaUpdateText(g,f);break;case 3120:this.areaUpdateTextColor(g,f)}};LayoutGrid.prototype.onAreaClear=function(c){c=this.getArea(c);c!=void 0&&c.clear(!1)};LayoutGrid.prototype.onItemsAnim=function(e,f){var g=this.getArea(e);g!=void 0&&g.itemsAnim(f)};LayoutGrid.prototype.onItemAnim=function(f,h){var j=this.getArea(f);if(j!=void 0){var g=h.split("|");j.itemAnim(g[0],g[1])}};LayoutGrid.prototype.onAreaPushFrontItem=function(e,f){var g=this.getArea(e);g!=void 0&&g.pushFrontItem(f)};LayoutGrid.prototype.onAreaUpdateItemsA=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateItemsA(f)};LayoutGrid.prototype.onAreaFieldSetItem=function(f,h){var j=h.split(","),g=j[0],j=parseInt(j[1]),g=this.getArea(g);g!=void 0&&g.fieldSetItem(j,f)};LayoutGrid.prototype.onAreaFieldMoveItem=function(h,m){var n=m.split(","),l=n[0],k=parseInt(n[1]),j=n[2],n=parseInt(n[3]);this.moveFigure(l,k,j,n)};LayoutGrid.prototype.onAreaFieldMoveItemA=function(B,z){for(var A=z.split(","),w=A[0],v=parseInt(A[1]),u=A[2],t=parseInt(A[3]),s=A[4],q=A[5],p=[],r=6;r<A.length;r+=2){var n=new AreaIndexPair;n.mArea=A[r];n.mIndex=parseInt(A[r+1]);p.push(n)}this.moveFigureA(w,v,u,t,s,q,p)};LayoutGrid.prototype.onAreaFieldRemoveItem=function(f,h){var j=parseInt(h),g=this.getArea(f);g!=void 0&&g.removeFigure(j)};LayoutGrid.prototype.onAreaUpdateItems=function(e,f){var g=this.getArea(e);g!=void 0&&g.updateItems(f)};LayoutGrid.prototype.onAreaInvertItem=function(e,f){var g=this.getArea(e);g!=void 0&&g.invertItem(f)};LayoutGrid.prototype.onAreaUpdateItem=function(e,f,g){e=this.getArea(e);e!=void 0&&e.updateItem(f,g)};LayoutGrid.prototype.moveFigureA=function(z,v,w,u,t,s){if(v<0||u<0){console.error("moveFigureA "+z+" "+v+" "+w+" "+u)}else{var r=void 0,q=void 0,o=void 0,n=void 0,p=void 0,n=this.getArea(z),p=this.getArea(w);if(n!=void 0){o=n.getItem(v);if(o==void 0){return}r=new GameonModelRef(void 0);r.copy(o.mModelRef);r.copyMat(o.mModelRef);n.removeFigure(v)}if(o!=void 0){if(p!=void 0){t=="walk2back"?p.placeFigure(u,o,!0):p.placeFigure(u,o,!1),q=o.mModelRef}r!=void 0&&q!=void 0&&this.mApp.anims().animRef(t,r,q,s)}}};LayoutGrid.prototype.pathRefsFromPath=function(h,m,n){for(var l,k=0;k<m.length;k++){if(l=this.getArea(m[k].mArea),l!=void 0){var j=new GameonModelRef(void 0);l.getModelRef(m[k].mIndex,j,n);h.push(j)}}};LayoutGrid.prototype.onDragNearest=function(c,e){return this.findNearest(c,e,!1)};LayoutGrid.prototype.onClickNearest=function(c,e){return this.findNearest(c,e,!0)};LayoutGrid.prototype.findNearest=function(j,o,p){for(var n=void 0,m=10000000,l=this.mVisibleAreas.length-1;l>=0;l--){var k=this.mVisibleAreas[l];if(p==!0){if(k.mOnclick==void 0||k.mOnclick.length==0){continue}}else{if((k.mOnFocusGain==void 0||k.mOnFocusGain.length==0)&&(k.mOnFocusLost==void 0||k.mOnFocusLost.length==0)){continue}}if(k.mDisplay==GameonWorld_Display.HUD&&(k=k.fieldClicked(this.mApp.cs().eyeHud(),o),k!=void 0&&k.mDist<=m)){n=k,m=k.mDist}}if(m!=10000000){return n}for(l=this.mVisibleAreas.length-1;l>=0;l--){k=this.mVisibleAreas[l];if(p==!0){if(k.mOnclick==void 0||k.mOnclick.length==0){continue}}else{if((k.mOnFocusGain==void 0||k.mOnFocusGain.length==0)&&(k.mOnFocusLost==void 0||k.mOnFocusLost.length==0)){continue}}if(k.mDisplay!=GameonWorld_Display.HUD&&(k=k.fieldClicked(this.mApp.cs().eye(),j),k!=void 0&&k.mDist<=m)){n=k,m=k.mDist}}if(m!=10000000){return n}};LayoutGrid.prototype.onCameraFit=function(g,k){if(g=="fit"){var l=k.split(","),j=0,h=0;l.length>1&&(j=parseFloat(l[0]),h=parseFloat(l[1]));this.mApp.cs().init(j/2,h/2,0);this.mApp.cs().snap_cam_z([0,0,1],[0,0,0],[0,1,0]);this.mApp.setScreenBounds()}};LayoutGrid.prototype.onCameraSet=function(g,k){var l=g.split(","),j=Array(3);l.length>0&&(j[0]=parseFloat(l[0]));l.length>1&&(j[1]=parseFloat(l[1]));l.length>2&&(j[2]=parseFloat(l[2]));var l=k.split(","),h=Array(3);l.length>0&&(h[0]=parseFloat(l[0]));l.length>1&&(h[1]=parseFloat(l[1]));l.length>2&&(h[2]=parseFloat(l[2]));this.mApp.cs().setCamera(j,h);this.mApp.setScreenBounds()};LayoutGrid.prototype.onCameraFitHud=function(g,k){if(g=="fit"){var l=k.split(","),j=0,h=0;l.length>1&&(j=parseFloat(l[0]),h=parseFloat(l[1]));this.mApp.cs().init(j/2,h/2,0);this.mApp.cs().snap_cam_z_hud([0,0,1],[0,0,0],[0,1,0]);this.mApp.setScreenBounds()}};LayoutGrid.prototype.onCameraSetHud=function(g,k){var l=g.split(","),j=Array(3);l.length>0&&(j[0]=parseFloat(l[0]));l.length>1&&(j[1]=parseFloat(l[1]));l.length>2&&(j[2]=parseFloat(l[2]));var l=k.split(","),h=Array(3);l.length>0&&(h[0]=parseFloat(l[0]));l.length>1&&(h[1]=parseFloat(l[1]));l.length>2&&(h[2]=parseFloat(l[2]));this.mApp.cs().setCameraHud(j,h);this.mApp.setScreenBounds()};LayoutGrid.prototype.onCameraProjHud=function(h,m){var n=parseFloat(h),l=m.split(","),k=0,j=0;l.length>0&&(j=parseFloat(l[0]));l.length>1&&(k=parseFloat(l[1]));this.mApp.view().setFovHud(n,k,j)};LayoutGrid.prototype.onCameraProj=function(h,m){var n=parseFloat(h),l=m.split(","),k=0,j=0;l.length>0&&(j=parseFloat(l[0]));l.length>1&&(k=parseFloat(l[1]));this.mApp.view().setFov(n,k,j)};LayoutGrid.prototype.setVisibleArea=function(e,f){var g=this.mPageIds[e.mPageId];if(g!=void 0){g=g.mVisible,f&&g?this.mVisibleAreas.indexOf(e)<0&&this.mVisibleAreas.push(e):f||(g=this.mVisibleAreas.indexOf(e),g>=0&&this.mVisibleAreas.splice(g,1))}};LayoutGrid.prototype.addToPage=function(e,f){if(e!=void 0){var g=this.mPageIds[f];g==void 0&&(g=new Areas,this.mPageIds[f]=g);e.mPageId=f;if(g.areas.indexOf(e)<0){g.areas.push(e),e.mPageVisible=g.mVisible}}};LayoutGrid.prototype.showPage=function(g,k){var l=this.mPageIds[g];if(l!=void 0){l.mVisible=!0;for(var j=0;j<l.areas.length;j++){var h=l.areas[j];k!=void 0&&h.initAnim(k,!1);h.mPageVisible=!0;h.setInitState()}}};LayoutGrid.prototype.hidePage=function(h,m){var n=this.mPageIds[h];if(n!=void 0){n.mVisible=!1;for(var l=0,k=0;k<n.areas.length;k++){var j=n.areas[k];m!=void 0?l=j.initAnim(m,!0):(j.mPageVisible=!1,j.setInitState())}m!=void 0&&this.mApp.sendExec(l,"Q.layout.hide_('"+h+"');")}};function array_removeElement(e,f){for(var g=0;g<e.length;g++){e[g]==f&&e.splice(g,1)}}LayoutGrid.prototype.removeArea=function(c){c.clear(!0);this.mVisibleAreas.indexOf(c)>=0&&array_removeElement(this.mVisibleAreas,c);this.mAreas[c.mID]!=void 0&&array_removeElement(this.mAreas,c);this.mAreasHud[c.mID]!=void 0&&array_removeElement(this.mAreasHud,c);var e=this.mPageIds[c.mPageId];e!=void 0&&array_removeElement(e.areas,c)};LayoutGrid.prototype.onAreaSwapId=function(g,k){var l=this.getArea(g),j=this.getArea(k);if(!(l==void 0||j==void 0)){this.mAreas[l.mID]!=void 0&&array_removeElement(this.mAreas,l);this.mAreas[j.mID]!=void 0&&array_removeElement(this.mAreas,j);var h=l.mID;l.mID=j.mID;j.mID=h;this.mAreas[l.mID]=l;this.mAreas[j.mID]=j}};LayoutGrid.prototype.animScreen=function(j,o){if(j=="color"){var p=o.split(","),n=this.mApp.colors().white,m=this.mApp.colors().black,l=void 0,k=parseInt(p[0]);p.length>1&&(n=this.mApp.colors().getColor(p[1]));p.length>2&&(m=this.mApp.colors().getColor(p[2]));p.length>3&&(l=this.mApp.colors().getColor(p[3]));this.mApp.anims().createAnimColor(k,n,m,l)}};LayoutGrid.prototype.clearPage=function(e){var f=this.mPageIds[e];if(f!=void 0){this.hidePage(e,void 0);for(var e=f.areas.length,g=0;g<e;g++){f.areas[g].clear(!0)}delete this.mPageIds[f]}};function ServerkoParse(c){this.mData=data;this.mApp=c;this.mUsername="Dembinjo";this.mOptions="";this.mLoadedScripts=[];this.mSocket=void 0;this.mRoot="10000";this.mCache=""}ServerkoParse.prototype.set=function(){this.showData(!0)};ServerkoParse.prototype.readJavascriptLogger=function(){var c=void 0;do{c=console.shift(),c instanceof String?print("JS :"+c+"\n"):c!=void 0&&print("JS :"+str(c)+"\n")}while(c!=void 0&&c.length>0);window.setTimeout("q_serverparser.readJavascriptLogger();",50)};var q_serverparser=void 0,q_serverConnected=!1;ServerkoParse.prototype.showData=function(c){q_serverparser=this;for(var e=void 0;(e=this.execScript("Q.serverko.getData();"))!=void 0&&e.length!=0;){if(e.length>0){this.onJSONData(e)}}c&&window.setInterval("q_serverparser.showData(false);",50)};ServerkoParse.prototype.execScript=function(b,d){if(d!=void 0){d==0&&(d=1),window.setTimeout(b,d)}else{var c=eval(b);if(c!=void 0){return c}}};ServerkoParse.prototype.execScriptFromFile=function(c){var e="res/";e+=c;q_getScript(e)};ServerkoParse.prototype.execQScriptFromFile=function(c){var e="qres/";e+=c;q_getScript(e)};ServerkoParse.prototype.startScript=function(c,e){this.mUsername=c;this.mOptions=e};ServerkoParse.prototype.sendUserData=function(c){this.execScript("Q.handlers.script_userData('"+this.mUsername+"', '"+c+"');")};ServerkoParse.prototype.stop=function(){};ServerkoParse.prototype.loadFramework=function(){};ServerkoParse.prototype.loadScript=function(c,e){GameonApp.lock=!0;window.setTimeout("q_serverparser.execLoadModule2('"+c+"');",e)};ServerkoParse.prototype.loadModule2=function(c){GameonApp.lock=!0;window.setTimeout("q_serverparser.execLoadModule2('"+c+"');",0)};ServerkoParse.prototype.loadModule=function(c){GameonApp.lock=!0;window.setTimeout("q_serverparser.execLoadModule('"+c+"');",0)};ServerkoParse.prototype.execLoadModule=function(c){this.mLoadedScripts.indexOf(c)<0&&(this.mLoadedScripts.push(c),this.execScriptFromFile(c))};ServerkoParse.prototype.execLoadModule2=function(c){this.execScriptFromFile(c)};ServerkoParse.prototype.onJSONData=function(b){b=eval("("+b+")");b!=void 0&&this.mApp.queueResponse(b)};var q_script_reqs=[],q_req_working=!1;function q_getScript(f){console.log(" get script "+f);var h=document.getElementsByTagName("head")[0],j=document.createElement("script");j.src=f;var g=!1;GameonApp.lock=!0;j.onload=j.onreadystatechange=function(){if(!g&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){g=!0,j.onload=j.onreadystatechange=null,GameonApp.lock=!1}};h.appendChild(j)}function q_onLoadScript(c){q_serverparser.execScript(c.response,10);q_req_working=!1;q_script_reqs.length>0&&(c=q_script_reqs.shift(),q_req_working=True,c.send(null))}ServerkoParse.prototype.sendConnect=function(c){this.execScript(this.mConnectScript+"("+c+",'"+this.mServerAddr+"');")};ServerkoParse.prototype.onSocketData=function(c){this.mCache+=c;do{console.log("data cache: "+this.mCache);var e=this.mCache.indexOf("\r\n\r\n");if(e>=0){c=this.mCache.substr(0,e+4),this.mCache=this.mCache.substr(e+4),this.onData(c)}}while(e>=0)};ServerkoParse.prototype.onData=function(e){console.log("rec -> ",e);if(this.mWaitingForContent){this.onJSONData(e),this.mWaitingForContent=!1}else{for(var e=e.split("\r\n"),f=0;f<e.length;f++){var g=e[f];if(g.indexOf("HTTP/1.0 300")==0){this.sendJoin(-1);break}else{if(g.indexOf("HTTP/1.0 202")==0){if(this.mWaitingForJoin){this.mWaitingForJoin=!1,this.sendJoin(1)}}else{if(g.indexOf("Content-length")==0){this.mWaitingForContent=!0;break}}}}}};ServerkoParse.prototype.connect=function(c,e){q_serverConnected==!0&&this.disconnect();q_serverConnected=!1;c.split(":");this.mSocket=io.connect("http://"+c);this.mServerAddr=c;this.mConnectScript=e;this.mSocket.on("connect",function(){q_serverConnected=!0;q_serverparser.sendConnect(1)});this.mSocket.on("message",function(d){console.log(" MESSAGE ="+d);d=base64_decode(d);console.log(" MESSAGE "+d);q_serverparser.onSocketData(d)});this.mSocket.on("disconnect",function(){q_serverConnected=!1;q_serverparser.sendConnect(-1)})};ServerkoParse.prototype.disconnect=function(){this.mCache="";if(this.mSocket!=void 0){this.mSocket.disconnect(),q_serverConnected=!1,this.mSocket=void 0}};ServerkoParse.prototype.sendJoin=function(c){this.execScript(this.mJoinScript+"("+c+",'"+this.mServerAddr+"');")};ServerkoParse.prototype.join=function(e,f,g){if(this.mSocket!=void 0&&q_serverConnected!=!1){this.mRoom=e,this.mUser=f,this.mJoinScript=g,this.mWaitingForJoin=!0,e="POST "+("/"+this.mRoot+"/"+this.mRoom+"/"+this.mUser)+" HTTP/1.1\r\n",e+="Host: qframework\r\n",e+="User-Agent: webgl\r\n",e+="\r\n",console.log("send -> ",e),this.mSocket.send(base64_encode(e))}};ServerkoParse.prototype.send=function(c){if(q_serverConnected!=!1){var e="PUT "+("/"+this.mRoot+"/"+this.mRoom+"/"+this.mUser)+" HTTP/1.1\r\n";e+="Host: qframework\r\n";e+="User-Agent: jogampapp\r\n";e+="Data: "+c+"\r\n";e+="\r\n";console.log("send -> ",e);this.mSocket.send(base64_encode(e))}};ServerkoParse.parseFloatArray=function(g,k){if(k==void 0||k==""){return 0}for(var l=0,j=k.split(","),h=0;h<j.length;h++){g[l++]=parseFloat(j[h])}return l};ServerkoParse.parseIntArray=function(g,k){if(k==void 0||k==""){return 0}for(var l=0,j=k.split(","),h=0;h<j.length;h++){g[l++]=parseInt(j[h])}return l};function Q_Settings(c){this.mApp=c;this.mPrefsName="";this.mParser=void 0;this.mSettings={};this.storage=void 0}Q_Settings.prototype.init=function(e,f,g){this.mPrefsName=g+"_prefs_";this.mParser=e;this.mSettings={};if("localStorage" in window&&window.localStorage!==null){this.storage=window.localStorage}};Q_Settings.prototype.setParser=function(c){mParser=c};Q_Settings.prototype.open=function(){this.mSettings={}};Q_Settings.prototype.save=function(){};Q_Settings.prototype.writeInt=function(c,e){this.storage!=void 0?this.storage.setItem(this.mPrefsName+c,e):this.mSettings[c]=e};Q_Settings.prototype.writeStr=function(c,e){this.storage!=void 0?this.storage.setItem(this.mPrefsName+c,e):this.mSettings[c]=e};Q_Settings.prototype.loadInt=function(e,f){var g="0";this.storage!=void 0?g=this.storage.getItem(this.mPrefsName+e):this.mSettings[e]!=void 0&&(g=this.mSettings[e]);g==void 0&&(g="0");this.mParser.execScript(f+"="+g+";")};Q_Settings.prototype.loadStr=function(e,f){var g="";this.storage!=void 0?g=this.storage.getItem(this.mPrefsName+e):this.mSettings[e]!=void 0&&(g=this.mSettings.get(e));g==void 0&&(g="");this.mParser.execScript(f+"='"+g+"';")};Q_Settings.prototype.loadArray=function(e,f){var g="";this.storage!=void 0?g=this.storage.getItem(this.mPrefsName+e):this.mSettings[e]!=void 0&&(g=this.mSettings.get(e));g==void 0||g.length==0||this.mParser.execScript(f+"=eval(["+g+"]);")};function GameonApp(c,e){this.mWorld=new GameonWorld(this);this.mView=new GameonWorldView(this.mWorld,this);this.mDataGrid=new LayoutGrid(this.mWorld,this);this.mScript=new ServerkoParse(this);this.mPreExec=void 0;this.mUsername="Dembinjo";this.mContext=c;this.mAppName=e;this.mResponsesQueue=[];this.mScreenb=Array(8);this.mHudb=Array(8);this.mSplashScreen="";this.mSplashTimeStart=this.mSplashTime=0;this.mSplashOutStart=this.mDrawSPlash=!1;this.mFocused=void 0;this.mAnims=new AnimFactory(this);this.mItems=new ItemFactory(this);this.mTextures=new TextureFactory(this);this.mColors=new ColorFactory;this.mSounds=new SoundFactory;this.mSettings=new Q_Settings(this);this.mObjectsFact=new ObjectsFactory(this);this.mCS=new GameonCS;this.mFrameLastTime=this.mFrameDeltaTime=-1;this.mLock=!1;this.mSettings.init(this.mScript,c,e);this.gl=void 0;this.mRendering=this.mDataChange=this.mCameraSet=!1}GameonApp.prototype.processData=function(c,e){this.mAnims.process(e);this.execResponses(c);this.mWorld.addModels(c)};GameonApp.prototype.hasData=function(){if(this.mDrawSPlash){return !0}if(this.mDataChange==!0){return this.mDataChange=!1,!0}if(this.mRendering){return !1}return this.mResponsesQueue.length==0&&this.mAnims.getCount()==0?(this.mFrameLastTime=-1,!1):!0};GameonApp.prototype.drawFrame=function(c){if(!this.mRendering){this.mRendering=!0;this.calcFrameDelay();this.gl=c;this.processData(c,this.mFrameDeltaTime);if(this.mDrawSPlash){this.mSplashTimeStart+=this.mFrameDeltaTime;if(this.mSplashTimeStart>this.mSplashTime-500&&this.mSplashOutStart==!1){this.mDataGrid.animScreen("color","500,FFFFFFFF,00000000"),this.mSplashOutStart=!0}this.mSplashTimeStart>this.mSplashTime?(this.mDrawSPlash=!1,this.mView.lockDraw(!1),this.mDataGrid.animScreen("color","500,00000000,FFFFFFFF")):(this.mView.lockDraw(!0),this.mView.drawSplash(c))}else{this.mView.onDrawFrame(c)}if(!this.mCameraSet){this.mDataGrid.onCameraFit("fit","4.0,0"),this.mDataGrid.onCameraFitHud("fit","4.0,0"),this.mCameraSet=!0}this.mRendering=!1}};GameonApp.prototype.surfaceChanged=function(e,f,g){this.mCS.init(f,g,1);this.mView.onSurfaceChanged(e,f,g);this.mView.onSurfaceCreated(e,f,g)};GameonApp.prototype.context=function(){return this.mContext};GameonApp.prototype.view=function(){return this.mView};GameonApp.prototype.onJSONData=function(h,m){for(var n=m.gs.room,l=0;l<n.length;l++){var k=n[l],j=k.res;if(j=="event"){this.onEvent2(h,k)}else{j=="layout"?this.mDataGrid.initLayout2(k):j=="texts"?this.mTextures.initTextures(k):j=="objs"?this.mObjectsFact.initObjects(k):j=="models"?this.mItems.initModels(k):j=="animation"&&this.mAnims.initAnimation(k)}}};GameonApp.prototype.execResponses=function(c){if(GameonApp.lock!=!0){if(this.mCameraSet==!1){this.mDataGrid.onCameraSet("0,0,0","0,0,5"),this.mDataGrid.onCameraSetHud("0,0,0","0,0,5"),this.mCameraSet=!0}for(;this.mResponsesQueue.length>0;){var e=this.mResponsesQueue[0];this.mDataChanged=!0;this.onJSONData(c,e);this.mResponsesQueue.splice(0,1);if(GameonApp.lock==!0){break}}}};GameonApp.prototype.queueResponse=function(c){this.mResponsesQueue.push(c)};GameonApp.prototype.start=function(c,e){this.mPreExec=e;this.mSettings.setParser(this.mScript);this.mPreExec!=void 0&&this.mScript.execScript(this.mPreExec);this.mScript.loadScript(c,100)};GameonApp.prototype.onClick=function(f,h){var j=this.mDataGrid.onClickNearest(f,h);if(j!=void 0&&j.mOnclick!=void 0){var g=j.mOnclick;g.indexOf("js:")==0?g.indexOf(";")==g.length-1?this.mScript.execScript(g.substring(3)):(g=g.substring(3),g+="('"+j.mArea+"',"+j.mIndex+");",this.mScript.execScript(g)):(g+=","+j.mArea+","+j.mIndex,this.mScript.sendUserData(g))}if(this.mFocused!=void 0){this.onFocusLost(this.mFocused),this.mFocused=void 0}};GameonApp.prototype.endScript=function(){};GameonApp.prototype.startScripts=function(){};GameonApp.prototype.init=function(){this.mScript.loadFramework();this.mScript.set()};GameonApp.prototype.setScreenBounds=function(){this.mCS.getScreenBounds(this.mScreenb,this.mHudb);var c="Q.layout.canvasw =";c+=this.mCS.getCanvasW();c+=";Q.layout.canvash = ";c+=this.mCS.getCanvasH();c+=";Q.layout.worldxmin = ";c+=this.mScreenb[0];c+=";Q.layout.worldxmax = ";c+=this.mScreenb[2];c+=";Q.layout.worldymin = ";c+=this.mScreenb[5];c+=";Q.layout.worldymax = ";c+=this.mScreenb[3];c+=";Q.layout.hudxmin = ";c+=this.mHudb[0];c+=";Q.layout.hudxmax = ";c+=this.mHudb[2];c+=";Q.layout.hudymin = ";c+=this.mHudb[5];c+=";Q.layout.hudymax = ";c+=this.mHudb[3];c+=";";this.mScript.execScript(c)};GameonApp.prototype.onTextInput=function(e,f){var g=prompt("",e);g!=void 0?(g=g.replace("[^A-Za-z0-9 ]",""),g=f+"('"+g+"' , 1);"):g=f+"(undefined, 1);";this.mScript.execScript(g)};GameonApp.prototype.sendEvent=function(e,f){var g=parseInt(e);this.mScript.execScript(f,g)};GameonApp.prototype.sendExec=function(e,f){var g=parseInt(e);this.mScript.execScript(f,g)};GameonApp.prototype.onPause=function(){};GameonApp.prototype.loadModule=function(c){this.mScript.loadModule(c)};GameonApp.prototype.loadModule2=function(c){this.mScript.loadModule2(c)};GameonApp.prototype.execScript=function(c){this.mScript.execScript(c,10)};GameonApp.prototype.goUrl=function(){};GameonApp.prototype.mouseClicked=function(f,h){var j=[0,0,0],g=[0,0,0];this.mCS.screen2spaceVec(f,h,j);this.mCS.screen2spaceVecHud(f,h,g);this.onClick(j,g)};GameonApp.prototype.connect=function(c,e){this.mScript.connect(c,e)};GameonApp.prototype.disconnect=function(){this.mScript.disconnect()};GameonApp.prototype.join=function(g,k){var l=g.split("|"),j=void 0,h=void 0;l.length>0&&(j=l[0]);l.length>1&&(h=l[1]);this.mScript.join(j,h,k)};GameonApp.prototype.send=function(c){this.mScript.send(c)};GameonApp.prototype.stop=function(){this.mScript.disconnect()};GameonApp.prototype.mouseDragged=function(f,h){var j=[0,0,0],g=[0,0,0];this.mCS.screen2spaceVec(f,h,j);this.mCS.screen2spaceVecHud(f,h,g);j=this.mDataGrid.onDragNearest(j,g);if(j!=void 0&&this.mFocused!=void 0){if(j.mArea==this.mFocused.mArea&&j.mIndex==this.mFocused.mIndex){return}else{this.onFocusLost(this.mFocused),this.mFocused=void 0}}else{if(this.mFocused!=void 0){this.onFocusLost(this.mFocused),this.mFocused=void 0}}this.mFocused=j;if(j!=void 0){this.onFocusGain(j)}};GameonApp.prototype.onFocusGain=function(c){if(!(c==void 0||c.mOnFocusGain==void 0)){var e=c.mOnFocusGain;e.indexOf("js:")==0?e.indexOf(";")==e.length-1?this.mScript.execScript(e.substring(3)):(e=e.substring(3),e+="('"+c.mArea+"',"+c.mIndex+");",this.mScript.execScript(e)):(e+=","+c.mArea+","+c.mIndex,this.mScript.sendUserData(e))}};GameonApp.prototype.onFocusLost=function(c){if(c!=void 0&&!(c==void 0||c.mOnFocusLost==void 0)){var e=c.mOnFocusLost;e.indexOf("js:")==0?e.indexOf(";")==e.length?this.mScript.execScript(e.substring(3)):(e=e.substring(3),e+="('"+c.mArea+"',"+c.mIndex+");",this.mScript.execScript(e)):(e+=","+c.mArea+","+c.mIndex,this.mScript.sendUserData(e))}};GameonApp.prototype.onFocusProbe=function(c,e){this.mouseDragged(c,e)};GameonApp.prototype.setSplash=function(c,e){this.mSplashTime=e;this.mSplashScreen=c;this.mSplashTimeStart=0;if(this.mSplashScreen!=void 0&&this.mSplashScreen.length>0){this.mDrawSPlash=!0}};GameonApp.prototype.setEnv=function(f,h){if(f=="textparam"){var j=h.split(","),g=0;j.length==5&&(g=parseFloat(j[4]));this.mTextures.setParam(parseFloat(j[0]),parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3]),g)}};GameonApp.prototype.onEvent2=function(h,m){var n=m.data,l=m.data2,k=m.data3,j=m.type;switch(parseInt(m.id)){case 100:this.sendEvent(j,n);break;case 101:this.sendExec(j,n);break;case 102:this.loadModule(j,n);break;case 103:this.loadModule2(j,n);break;case 200:this.setEnv(j,n);break;case 1002:this.onTextInput(j,n);break;case 1200:this.goUrl(j,n);break;case 2600:this.mSettings.open();break;case 2601:this.mSettings.save();break;case 2610:this.mSettings.writeInt(j,n);break;case 2611:this.mSettings.writeStr(j,n);break;case 2620:this.mSettings.loadInt(j,n);break;case 2621:this.mSettings.loadStr(j,n);break;case 2622:this.mSettings.loadArray(j,n);break;case 4000:this.mTextures.newTexture(h,j,n,!0);break;case 4100:this.mObjectsFact.create(j,n);break;case 4110:this.mObjectsFact.place(j,n);break;case 4120:this.mObjectsFact.scale(j,n);break;case 4130:this.mObjectsFact.texture(j,n);break;case 4140:this.mObjectsFact.state(j,n);break;case 4150:this.mObjectsFact.remove(j,n);break;case 4200:this.mAnims.move(j,n,l,k);break;case 4210:this.mAnims.rotate(j,n,l,k);break;case 5000:this.mSounds.newSound(j,n);break;case 5010:this.mSounds.onPlaySound(j,n);break;case 5011:this.mSounds.setVolume(parseFloat(j));break;case 5012:this.mSounds.setMute(parseInt(n));break;case 6001:this.mItems.newFromTemplate(j,n);break;case 6002:this.mItems.setTexture(j,n);break;case 6003:this.mItems.createModel(j,n);break;case 6004:this.mItems.setSubmodels(j,n);break;case 7000:this.connect(j,n);break;case 7001:this.join(j,n);break;case 7002:this.send(j);break;case 7003:this.disconnect();break;default:this.mDataGrid.onEvent2(m)}};GameonApp.prototype.calcFrameDelay=function(){this.mFrameLastTime==-1?(this.mFrameLastTime=(new Date).getTime(),this.mFrameDeltaTime=0):(this.mFrameDeltaTime=(new Date).getTime()-this.mFrameLastTime,this.mFrameLastTime+=this.mFrameDeltaTime)};GameonApp.prototype.anims=function(){return this.mAnims};GameonApp.prototype.colors=function(){return this.mColors};GameonApp.prototype.items=function(){return this.mItems};GameonApp.prototype.textures=function(){return this.mTextures};GameonApp.prototype.sounds=function(){return this.mSounds};GameonApp.prototype.settings=function(){return this.mSettings};GameonApp.prototype.objects=function(){return this.mObjectsFact};GameonApp.prototype.cs=function(){return this.mCS};GameonApp.prototype.world=function(){return this.mWorld};GameonApp.prototype.grid=function(){return this.mDataGrid};GameonApp.prototype.script=function(){return this.mScript};GameonApp.prototype.view=function(){return this.mView};GameonApp.prototype.frameDelta=function(){return this.mFrameDeltaTime};function color_get(c){c=c.toLowerCase();c=colors.color[c];return c==void 0?"000000":c}function Colors(){this.color=[];this.color.aliceblue="F0F8FF";this.color.antiquewhite="FAEBD7";this.color.aqua="00FFFF";this.color.aquamarine="7FFFD4";this.color.azure="F0FFFF";this.color.beige="F5F5DC";this.color.bisque="FFE4C4";this.color.black="000000";this.color.blanchedalmond="FFEBCD";this.color.blue="0000FF";this.color.blueviolet="8A2BE2";this.color.brown="A52A2A";this.color.burlywood="DEB887";this.color.cadetblue="5F9EA0";this.color.chartreuse="7FFF00";this.color.chocolate="D2691E";this.color.coral="FF7F50";this.color.cornflowerblue="6495ED";this.color.cornsilk="FFF8DC";this.color.crimson="DC143C";this.color.cyan="00FFFF";this.color.darkblue="00008B";this.color.darkcyan="008B8B";this.color.darkgoldenrod="B8860B";this.color.darkgray="A9A9A9";this.color.darkgreen="006400";this.color.darkkhaki="BDB76B";this.color.darkmagenta="8B008B";this.color.darkolivegreen="556B2F";this.color.darkorange="FF8C00";this.color.darkorchid="9932CC";this.color.darkred="8B0000";this.color.darksalmon="E9967A";this.color.darkseagreen="8FBC8F";this.color.darkslateblue="483D8B";this.color.darkslategray="2F4F4F";this.color.darkturquoise="00CED1";this.color.darkviolet="9400D3";this.color.deeppink="FF1493";this.color.deepskyblue="00BFFF";this.color.dimgray="696969";this.color.dodgerblue="1E90FF";this.color.firebrick="B22222";this.color.floralwhite="FFFAF0";this.color.forestgreen="228B22";this.color.fuchsia="FF00FF";this.color.gainsboro="DCDCDC";this.color.ghostwhite="F8F8FF";this.color.gold="FFD700";this.color.goldenrod="DAA520";this.color.gray="808080";this.color.green="008000";this.color.greenyellow="ADFF2F";this.color.honeydew="F0FFF0";this.color.hotpink="FF69B4";this.color["indianred "]="CD5C5C";this.color["indigo "]="4B0082";this.color.ivory="FFFFF0";this.color.khaki="F0E68C";this.color.lavender="E6E6FA";this.color.lavenderblush="FFF0F5";this.color.lawngreen="7CFC00";this.color.lemonchiffon="FFFACD";this.color.lightblue="ADD8E6";this.color.lightcoral="F08080";this.color.lightcyan="E0FFFF";this.color.lightgoldenrodyellow="FAFAD2";this.color.lightgrey="D3D3D3";this.color.lightgreen="90EE90";this.color.lightpink="FFB6C1";this.color.lightsalmon="FFA07A";this.color.lightseagreen="20B2AA";this.color.lightskyblue="87CEFA";this.color.lightslategray="778899";this.color.lightsteelblue="B0C4DE";this.color.lightyellow="FFFFE0";this.color.lime="00FF00";this.color.limegreen="32CD32";this.color.linen="FAF0E6";this.color.magenta="FF00FF";this.color.maroon="800000";this.color.mediumaquamarine="66CDAA";this.color.mediumblue="0000CD";this.color.mediumorchid="BA55D3";this.color.mediumpurple="9370D8";this.color.mediumseagreen="3CB371";this.color.mediumslateblue="7B68EE";this.color.mediumspringgreen="00FA9A";this.color.mediumturquoise="48D1CC";this.color.mediumvioletred="C71585";this.color.midnightblue="191970";this.color.mintcream="F5FFFA";this.color.mistyrose="FFE4E1";this.color.moccasin="FFE4B5";this.color.navajowhite="FFDEAD";this.color.navy="000080";this.color.oldlace="FDF5E6";this.color.olive="808000";this.color.olivedrab="6B8E23";this.color.orange="FFA500";this.color.orangered="FF4500";this.color.orchid="DA70D6";this.color.palegoldenrod="EEE8AA";this.color.palegreen="98FB98";this.color.paleturquoise="AFEEEE";this.color.palevioletred="D87093";this.color.papayawhip="FFEFD5";this.color.peachpuff="FFDAB9";this.color.peru="CD853F";this.color.pink="FFC0CB";this.color.plum="DDA0DD";this.color.powderblue="B0E0E6";this.color.purple="800080";this.color.red="FF0000";this.color.rosybrown="BC8F8F";this.color.royalblue="4169E1";this.color.saddlebrown="8B4513";this.color.salmon="FA8072";this.color.sandybrown="F4A460";this.color.seagreen="2E8B57";this.color.seashell="FFF5EE";this.color.sienna="A0522D";this.color.silver="C0C0C0";this.color.skyblue="87CEEB";this.color.slateblue="6A5ACD";this.color.slategray="708090";this.color.snow="FFFAFA";this.color.springgreen="00FF7F";this.color.steelblue="4682B4";this.color.tan="D2B48C";this.color.teal="008080";this.color.thistle="D8BFD8";this.color.tomato="FF6347";this.color.turquoise="40E0D0";this.color.violet="EE82EE";this.color.wheat="F5DEB3";this.color.white="FFFFFF";this.color.whitesmoke="F5F5F5";this.color.yellow="FFFF00";this.color.yellowgreen="9ACD32";this.get=color_get}var colors=new Colors;function Room(c){this.qapp=c;this.onInit=[];this.onInfo=[];this.onStart=[];this.onEnd=[];this.onEvent=[];this.onUserJoined=[];this.onUserLeft=[];this.onData=[];this.script_init=function(){var d,e;for(e=0;e<this.onInit.length;e++){d=this.onInit[e],d()}};this.script_start=function(){var d,e;for(e=0;e<this.onStart.length;e++){d=this.onStart[e],d()}};this.script_info=function(){var d,g,f="";for(g=0;g<this.onInfo.length;g++){d=this.onInfo[g],f+=d()}return f};this.script_end=function(){var d,e;for(e=0;e<this.onEnd.length;e++){d=this.onEnd[e],d()}};this.script_onEvent=function(d,j){var h,g;for(g=0;g<this.onEvent.length;g++){h=this.onEvent[g],h(d,j)}};this.script_userJoined=function(d){var g,f;for(f=0;f<this.onUserJoined.length;f++){g=this.onUserJoined[f],g(d)}};this.script_userData=function(d,j){var h,g;for(h=0;h<this.onData.length;h++){g=this.onData[h],g(d,j)}};this.script_userLeft=function(d){var g,f;for(g=0;g<this.onUserLeft.length;g++){f=this.onUserLeft[g],f(d)}}}function LayoutArea(){this.colors=this.border=this.background=this.foreground=this.fields=this.items=this.onfocusgain=this.onfocuslost=this.onclick=this.scale=this.rotation=this.location=this.text=this.items=this.display=this.size=this.bounds=this.state=this.layout=this.id=this.type=void 0}function Layout(c){this.qapp=c;this.pageid="";this.areacount=this.hudymax=this.hudymin=this.hudxmax=this.hudxmin=this.worldymax=this.worldymin=this.worldxmax=this.worldxmin=this.canvash=this.canvasw=0;this.createLayout=function(d,j,h){var g;h==1&&this.qapp.serverko.startData();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","layout");this.qapp.serverko.addSeparator();this.qapp.serverko.appendTag("pageid",d);this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("area");for(g=0;g<j.length;g++){if(j[g].type!=""){g>0&&this.qapp.serverko.addSeparator();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("type",j[g].type);this.qapp.serverko.addSeparator();if(j[g].id==""||j[g].id==void 0){j[g].id="temparea"+this.areacount,this.areacount++}this.qapp.serverko.appendTag("id",j[g].id);j[g].layout!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("layout",j[g].layout));j[g].state!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("state",j[g].state));j[g].bounds!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("bounds",j[g].bounds));j[g].size!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("size",j[g].size));j[g].display!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("display",j[g].display));j[g].items!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("items",j[g].items));j[g].text!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("text",j[g].text));j[g].location!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("location",j[g].location));j[g].onclick!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("onclick",j[g].onclick));j[g].onfocuslost!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("onfocuslost",j[g].onfocuslost));j[g].onfocusgain!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("onfocusgain",j[g].onfocusgain));j[g].foreground!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("foreground",j[g].foreground));j[g].background!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("background",j[g].background));j[g].border!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("border",j[g].border));j[g].fields!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("fields",j[g].fields));j[g].colors!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("colors",j[g].colors));j[g].translation!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("translation",j[g].translation));j[g].rotation!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("rotation",j[g].rotation));j[g].scale!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("scale",j[g].scale));this.qapp.serverko.endTag("area")}}this.qapp.serverko.endTags("area");this.qapp.serverko.endTag();h==1&&this.qapp.serverko.sendData(d)};this.println=function(d){this.qapp.serverko.appendEvent_(3180,"stdout",d)};this.print_=function(d){this.qapp.serverko.appendEvent_(3180,"stdout",d)};this.print=function(d){this.qapp.serverko.appendEvent(3180,"stdout",d)};this.scriptEnd=function(){this.qapp.serverko.appendEvent(2000,"","")};this.areaDelete=function(d){this.qapp.serverko.appendEvent(3001,d,"")};this.clientAreaDelete=function(d,e){this.qapp.serverko.clientAppendEvent(d,3001,e,"")};this.areaDelete_=function(d){this.qapp.serverko.appendEvent_(3001,d,"")};this.clientAreaDelete_=function(d,e){this.qapp.serverko.clientAppendEvent_(d,3001,e,"")};this.areaClear=function(d){this.qapp.serverko.appendEvent(3002,d,"")};this.areaClear_=function(d){this.qapp.serverko.appendEvent_(3002,d,"")};this.clientAreaClear=function(d,e){this.qapp.serverko.clientAppendEvent(d,3002,e,"")};this.clientAreaClear_=function(d,e){this.qapp.serverko.clientAppendEvent_(d,3002,e,"")};this.areaClearItems=function(d){this.qapp.serverko.appendEvent(3004,d,"")};this.clientAreaClearItems=function(d,e){this.qapp.serverko.clientAppendEvent(d,3004,e,"")};this.areaClearItems_=function(d){this.qapp.serverko.appendEvent_(3004,d,"")};this.clientAreaClearItems_=function(d,e){this.qapp.serverko.clientAppendEvent_(d,3004,e,"")};this.itemPlace=function(d,l,k,j,h){this.qapp.serverko.appendEvent(3050,d+"."+l+"|"+h,k+","+j)};this.clientItemPlace=function(d,n,m,l,k,j){this.qapp.serverko.clientAppendEvent(d,3050,n+"."+m+"|"+j,l+","+k)};this.itemPlace_=function(d,l,k,j,h){this.qapp.serverko.appendEvent_(3050,d+"."+l+"|"+h,k+","+j)};this.clientItemPlace_=function(d,n,m,l,k,j){this.qapp.serverko.clientAppendEvent_(d,3050,n+"."+m+"|"+j,l+","+k)};this.itemMove=function(d,j,h,g){this.qapp.serverko.appendEvent(3051,"",d+","+j+","+h+","+g)};this.clientItemMove=function(d,l,k,j,h){this.qapp.serverko.clientAppendEvent(d,3051,"",l+","+k+","+j+","+h)};this.itemMove_=function(d,j,h,g){this.qapp.serverko.appendEvent_(3051,"",d+","+j+","+h+","+g)};this.clientItemMove_=function(d,l,k,j,h){this.qapp.serverko.clientAppendEvent_(d,3051,"",l+","+k+","+j+","+h)};this.itemRemove=function(d,e){this.qapp.serverko.appendEvent(3052,d,e)};this.clientItemRemove=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3052,g,f)};this.itemRemove_=function(d,e){this.qapp.serverko.appendEvent_(3052,d,e)};this.clientItemRemove_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3052,g,f)};this.itemMoveA=function(d,p,o,n,m,l,k){this.qapp.serverko.appendEvent(3053,"",d+","+p+","+o+","+n+","+m+","+l+","+k)};this.clientItemMoveA=function(d,r,q,p,o,n,m,k){this.qapp.serverko.clientAppendEvent(d,3053,"",r+","+q+","+p+","+o+","+n+","+m+","+k)};this.itemMoveA_=function(d,p,o,n,m,l,k){this.qapp.serverko.appendEvent_(3053,"",d+","+p+","+o+","+n+","+m+","+l+","+k)};this.clientItemMoveA_=function(d,r,q,p,o,n,m,k){this.qapp.serverko.clientAppendEvent_(d,3053,"",r+","+q+","+p+","+o+","+n+","+m+","+k)};this.itemsAnim=function(d,g,f){this.qapp.serverko.appendEvent(3054,d,g+","+f)};this.clientItemsAnim=function(d,j,h,g){this.qapp.serverko.clientAppendEvent(d,3054,j,h+","+g)};this.itemsAnim_=function(d,g,f){this.qapp.serverko.appendEvent_(3054,d,g+","+f)};this.clientItemsAnim_=function(d,j,h,g){this.qapp.serverko.clientAppendEvent_(d,3054,j,h+","+g)};this.itemAnim=function(d,j,h,g){this.qapp.serverko.appendEvent(3055,d,j+"|"+h+","+g)};this.clientItemAnim=function(d,l,k,j,h){this.qapp.serverko.clientAppendEvent(d,3055,l,k+"|"+j+","+h)};this.itemAnim_=function(d,j,h,g){this.qapp.serverko.appendEvent_(3055,d,j+"|"+h+","+g)};this.clientItemAnim_=function(d,l,k,j,h){this.qapp.serverko.clientAppendEvent_(d,3055,l,k+"|"+j+","+h)};this.areaSetState=function(d,e){this.qapp.serverko.appendEvent(3110,d,e)};this.areaSetState_=function(d,e){this.qapp.serverko.appendEvent_(3110,d,e)};this.clientAreaSetState=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3110,g,f)};this.clientAreaSetState_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3110,g,f)};this.areaSetBounds=function(d,e){this.qapp.serverko.appendEvent(3120,d,e)};this.clientAreaSetBounds=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3120,g,f)};this.areaSetBounds_=function(d,e){this.qapp.serverko.appendEvent_(3120,d,e)};this.clientAreaSetBounds_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3120,g,f)};this.areaSetText=function(d,e){this.qapp.serverko.appendEvent(3180,d,e)};this.areaSetText_=function(d,e){this.qapp.serverko.appendEvent_(3180,d,e)};this.clientAreaSetText=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3180,g,f)};this.clientAreaSetText_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3180,g,f)};this.areaSetLocation=function(d,e){this.qapp.serverko.appendEvent(3190,d,e)};this.clientAreaSetLocation=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3190,g,f)};this.areaSetLocation_=function(d,e){this.qapp.serverko.appendEvent_(3190,d,e)};this.clientAreaSetLocation_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3190,g,f)};this.areaSetScale=function(d,e){this.qapp.serverko.appendEvent(3191,d,e)};this.clientAreaSetScale=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3191,g,f)};this.areaSetScale_=function(d,e){this.qapp.serverko.appendEvent_(3191,d,e)};this.clientAreaSetScale_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3191,g,f)};this.areaSetItemScale=function(d,g,f){this.qapp.serverko.appendEvent(3192,d,g+","+f)};this.areaSetItemScale_=function(d,g,f){this.qapp.serverko.appendEvent_(3192,d,g+","+f)};this.clientAreaSetItemScale_=function(d,j,h,g){this.qapp.serverko.clientAppendEvent_(d,3192,j,h+","+g)};this.clientAreaSetItemScale_=function(d,j,h,g){this.qapp.serverko.clientAppendEvent_(d,3192,j,h+","+g)};this.areaSetRotation=function(d,e){this.qapp.serverko.appendEvent(3195,d,e)};this.clientAreaSetRotation=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3195,g,f)};this.areaSetRotation_=function(d,e){this.qapp.serverko.appendEvent_(3195,d,e)};this.clientAreaSetRotation_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3195,g,f)};this.areaSetItemScale=function(d,g,f){this.qapp.serverko.appendEvent(3192,d,g+","+f)};this.clientAreaSetItemScale=function(d,j,h,g){this.qapp.serverko.clientAppendEvent(d,3192,j,h+","+g)};this.areaSetItemScale_=function(d,g,f){this.qapp.serverko.appendEvent_(3192,d,g+","+f)};this.clientAreaSetItemScale_=function(d,j,h,g){this.qapp.serverko.clientAppendEvent_(d,3192,j,h+","+g)};this.areaSetOnclick=function(d,e){this.qapp.serverko.appendEvent(3200,d,e)};this.clientAreaSetOnclick=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3200,g,f)};this.areaSetOnclick_=function(d,e){this.qapp.serverko.appendEvent_(3200,d,e)};this.clientAreaSetOnclick_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3200,g,f)};this.areaSetOnFocusGain=function(d,e){this.qapp.serverko.appendEvent(3201,d,e)};this.clientAreaSetOnFocusGain=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3201,g,f)};this.areaSetOnFocusGain_=function(d,e){this.qapp.serverko.appendEvent_(3201,d,e)};this.clientAreaSetOnFocusGain_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3201,g,f)};this.areaSetOnFocusLost=function(d,e){this.qapp.serverko.appendEvent(3202,d,e)};this.clientAreaSetOnFocusLost=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3202,g,f)};this.areaSetOnFocusLost_=function(d,e){this.qapp.serverko.appendEvent_(3202,d,e)};this.clientAreaSetOnFocusLost_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3202,g,f)};this.areaSetItems=function(d,e){this.qapp.serverko.appendEvent(3220,d,e)};this.clientAreaSetItems=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3220,g,f)};this.areaSetItems_=function(d,e){this.qapp.serverko.appendEvent_(3220,d,e)};this.clientAreaSetItems_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3220,g,f)};this.areaSetItem=function(d,g,f){this.qapp.serverko.appendEvent(3222,d,g+","+f)};this.areaSetItem_=function(d,g,f){this.qapp.serverko.appendEvent_(3222,d,g+","+f)};this.clientAreaSetItem=function(d,j,h,g){this.qapp.serverko.clientAppendEvent(d,3222,j,h+","+g)};this.clientAreaSetItem_=function(d,j,h,g){this.qapp.serverko.clientAppendEvent_(d,3222,j,h+","+g)};this.clientAreaInvertItem=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3223,g,f)};this.areaInvertItem=function(d,e){this.qapp.serverko.appendEvent(3223,d,e)};this.clientAreaSetItemB=function(d,j,h,g){this.qapp.serverko.clientAppendEvent(d,3224,j,h+","+g)};this.areaSetItemB=function(d,g,f){this.qapp.serverko.appendEvent(3224,d,g+","+f)};this.areaSetBackground=function(d,e){this.qapp.serverko.appendEvent(3250,d,e)};this.areaSetBackground_=function(d,e){this.qapp.serverko.appendEvent_(3250,d,e)};this.clientAreaSetBackground=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3250,g,f)};this.clientAreaSetBackground_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3250,g,f)};this.areaSetFields=function(d,e){this.qapp.serverko.appendEvent(3270,d,e)};this.cilentAreaSetFields=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,3270,g,f)};this.areaSetFields_=function(d,e){this.qapp.serverko.appendEvent_(3270,d,e)};this.cilentAreaSetFields_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,3270,g,f)};this.updateBack=function(d,j,h,g){this.areaSetBackground(d,h);h="Q.startUpdate();Q.layout.areaSetBackground(";h+="'"+d+"','"+g+"'";h+=");Q.sendUpdate();";this.qapp.exec_(j,h)};this.updateBack_=function(d,j,h,g){this.startUpdate();this.areaSetBackground(d,h);this.sendUpdate();h="Q.startUpdate();Q.layout.areaSetBackground(";h+="'"+d+"','"+g+"'";h+=");Q.sendUpdate();";this.qapp.exec_(j,h)};this.add=function(d,e){this.createLayout(d,e,0)};this.clientAdd=function(d,g,f){this.createLayout(g,f,0)};this.add_=function(d,e){this.createLayout(d,e,1)};this.clientAdd_=function(d,g,f){this.createLayout(g,f,1)};this.show=function(d){this.qapp.serverko.appendEvent(2010,d,"")};this.clientShow=function(d,e){this.qapp.serverko.clientAppendEvent(d,2010,e,"")};this.show_=function(d){this.qapp.serverko.appendEvent_(2010,d,"")};this.clientShow_=function(d,e){this.qapp.serverko.clientAppendEvent_(d,2010,e,"")};this.showAnim=function(d,e){this.qapp.serverko.appendEvent(2011,d,e)};this.showAnim_=function(d,e){this.qapp.serverko.appendEvent_(2011,d,e)};this.clientShowAnim=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,2011,g,f)};this.popup=function(d){this.qapp.serverko.appendEvent(2012,d,"")};this.clientPopup=function(d,e){this.qapp.serverko.clientAppendEvent(d,2012,e,"")};this.popup_=function(d){this.qapp.serverko.appendEvent_(2012,d,"")};this.clientPopup_=function(d,e){this.qapp.serverko.clientAppendEvent_(d,2012,e,"")};this.popupAnim=function(d,e){this.qapp.serverko.appendEvent(2013,d,e)};this.popupAnim_=function(d,e){this.qapp.serverko.appendEvent_(2013,d,e)};this.clientPopupAnim=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,2013,g,f)};this.clientPopupAnim_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,2013,g,f)};this.clear=function(d){this.qapp.serverko.appendEvent(2015,d,"")};this.clear_=function(d){this.qapp.serverko.appendEvent_(2015,d,"")};this.clientClear=function(d,e){this.qapp.serverko.clientAppendEvent(d,2015,e,"")};this.clientClear_=function(d,e){this.qapp.serverko.clientAppendEvent_(d,2015,e,"")};this.hide=function(d){this.qapp.serverko.appendEvent(2020,d,"")};this.hide_=function(d){this.qapp.serverko.appendEvent_(2020,d,"")};this.clientHide=function(d,e){this.qapp.serverko.clientAppendEvent(d,2020,e,"")};this.clientHide_=function(d,e){this.qapp.serverko.clientAppendEvent_(d,2020,e,"")};this.hideAnim=function(d,e){this.qapp.serverko.appendEvent(2021,d,e)};this.hideAnim_=function(d,e){this.qapp.serverko.appendEvent_(2021,d,e)};this.clientHideAnim=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,2021,g,f)};this.clientHideAnim_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,2021,g,f)};this.editText=function(d,e){this.qapp.serverko.appendEvent(1002,d,e)};this.editText_=function(d,e){this.qapp.serverko.appendEvent_(1002,d,e)};this.anim=function(d,e){this.qapp.serverko.appendEvent(2030,d,e)};this.anim_=function(d,e){this.qapp.serverko.appendEvent_(2030,d,e)};this.clientAnim=function(d,g,f){this.qapp.serverko.clientAppendEvent(d,2030,g,f)};this.clientAnim_=function(d,g,f){this.qapp.serverko.clientAppendEvent_(d,2030,g,f)};this.startUpdate=function(){this.qapp.startUpdate()};this.sendUpdate=function(){this.qapp.sendUpdate()}}function Textures(c){this.qapp=c;this.newFromFile=function(d,e){this.qapp.serverko.appendEvent(4000,d,e)};this.newFromFile_=function(d,e){this.qapp.serverko.appendEvent_(4000,d,e)};this.createTextures=function(d,g){var f;g==1&&this.qapp.serverko.startData();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","texts");this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("texture");for(f=0;f<d.length;f++){f>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),d[f].name!=void 0&&this.qapp.serverko.appendTag("name",d[f].name),d[f].file!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("file",d[f].file)),this.qapp.serverko.endTag("texture")}this.qapp.serverko.endTags("texture");this.qapp.serverko.endTag();g==1&&this.qapp.serverko.sendData()};this.add=function(d){this.createTextures(d,0)};this.clientAdd=function(d,e){this.createTextures(e,0)};this.add_=function(d){this.createTextures(d,1)};this.clientAdd_=function(d,e){this.createTextures(e,1)}}function Texture(){this.file=this.name=void 0}function Sounds(c){this.qapp=c;this.newFromFile=function(d,e){this.qapp.serverko.appendEvent(5000,d,e)};this.newFromFile_=function(d,e){this.qapp.serverko.appendEvent_(5000,d,e)};this.play=function(d){this.qapp.serverko.appendEvent(5010,"play",d)};this.play_=function(d){this.qapp.serverko.appendEvent_(5010,"play",d)};this.volume=function(d){this.qapp.serverko.appendEvent(5011,d,"")};this.volume_=function(d){this.qapp.serverko.appendEvent_(5011,d,"")};this.mute=function(d){this.qapp.serverko.appendEvent(5012,"mute",d)};this.mute_=function(d){this.qapp.serverko.appendEvent_(5012,"mute",d)}}function Model(){this.submodels=this.texture=this.template=this.name=void 0}function Models(c){this.qapp=c;this.newFromTemplate=function(d,e){this.qapp.serverko.appendEvent(6001,d,e)};this.newFromTemplate_=function(d,e){this.qapp.serverko.appendEvent_(6001,d,e)};this.setTexture=function(d,g,f){this.qapp.serverko.appendEvent(6002,d,g+";"+f)};this.setTexture_=function(d,g,f){this.qapp.serverko.appendEvent_(6002,d,g+";"+f)};this.create=function(d){this.qapp.serverko.appendEvent(6003,d,"")};this.create_=function(d){this.qapp.serverko.appendEvent_(6003,d,"")};this.setSubmodels=function(d,e){this.qapp.serverko.appendEvent(6004,d,e)};this.setSubmodels_=function(d,e){this.qapp.serverko.appendEvent_(6004,d,e)};this.createModels=function(d,g){var f;g==1&&this.qapp.serverko.startData();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","models");this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("model");for(f=0;f<d.length;f++){f>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),d[f].name!=void 0&&this.qapp.serverko.appendTag("name",d[f].name),d[f].template!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("template",d[f].template)),d[f].texture!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("texture",d[f].texture)),d[f].submodels!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("submodels",d[f].submodels)),this.qapp.serverko.endTag("model")}this.qapp.serverko.endTags("model");this.qapp.serverko.endTag();g==1&&this.qapp.serverko.sendData()};this.add=function(d){this.createModels(d,0)};this.clientAdd=function(d,e){this.createModels(e,0)};this.add_=function(d){this.createModels(d,1)};this.clientAdd_=function(d,e){this.createModels(e,1)}}function PadDigits2(g,k,l){g=g.toString();g.length>k&&(g=g.slice(0,k));var j="",h="";if(k>g.length){for(i=0;i<(k-g.length)/2;i++){j+=l,h+=l}}return j+g.toString()+h}function PadDigits(e,f){e=e.toString();e.length>f&&(e=e.slice(0,f));var g="";if(f>e.length){for(i=0;i<f-e.length;i++){g+="0"}}return g+e.toString()}function PadStringC(g,k,l){var g=g.toString(),j="",h="";if(k>g.length){for(i=0;i<k-g.length;i++){i%2==0?j+=l:h+=l}}return j+g.toString()+h}function PadString(f,h,j){f=f.toString();f.length>h&&(f=f.slice(0,h));var g=f;if(h>f.length){for(i=0;i<h-f.length;i++){g+=j}}return g}var qsupportold=0;function print(c){console.log(c+"\n\r")}function Serverko(){this.databuffer=[];this.clientbuffer=[];this.sendbuffer=[];this.startData=function(){this.databuffer.length>300&&console.log("ERROR: data push large "+this.databuffer[3]);this.databuffer.push("")};this.appendEvent_=function(h,m,n,l,k,j){this.startData();this.databuffer[this.databuffer.length-1].length!=0&&(this.databuffer[this.databuffer.length-1]+=",");this.databuffer[this.databuffer.length-1]+='{"res":"event","id":"'+h+'","type":"'+m;n!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data":"'+n);l!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data2":"'+l);k!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data3":"'+k);j!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data4":"'+j);this.databuffer[this.databuffer.length-1]+='"}';this.sendData()};this.appendEvent=function(h,m,n,l,k,j){this.databuffer.length==0?console.log("ERROR: data append "+h+" "+m+" "+n):(this.databuffer[this.databuffer.length-1].length!=0&&(this.databuffer[this.databuffer.length-1]+=","),this.databuffer[this.databuffer.length-1]+='{"res":"event","id":"'+h+'","type":"'+m,n!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data":"'+n),l!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data2":"'+l),k!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data3":"'+k),j!=void 0&&(this.databuffer[this.databuffer.length-1]+='","data4":"'+j),this.databuffer[this.databuffer.length-1]+='"}')};this.sendData=function(){this.databuffer.length==0?console.error("ERROR: data length 0"):(data=this.databuffer.shift(),this.sendbuffer.push('{"gs":{"room":['+data+"]}}\r\n"))};this.clientStartData=function(){this.clientbuffer.length>300&&console.error("ERROR: client data push large "+this.clientbuffer[3]);this.clientbuffer.push("")};this.clientAppendEvent=function(j,o,p,n,m,l,k){this.clientbuffer.length==0?console.log("ERROR: client data append "+o+" "+p+" "+n):(this.clientbuffer[this.clientbuffer.length-1].length!=0&&(this.clientbuffer[this.clientbuffer.length-1]+=","),this.clientbuffer[this.clientbuffer.length-1]+='{"res":"event","id":"'+o+'","type":"'+p+'","data":"'+n+'"}',m!=void 0&&(this.clientbuffer[this.clientbuffer.length-1]+='","data2":"'+m),l!=void 0&&(this.clientbuffer[this.clientbuffer.length-1]+='","data3":"'+l),k!=void 0&&(this.clientbuffer[this.clientbuffer.length-1]+='","data4":"'+k))};this.clientAppendEvent_=function(j,o,p,n,m,l,k){this.clientStartData(j);this.clientbuffer[this.clientbuffer.length-1].length!=0&&(this.clientbuffer[this.clientbuffer.length-1]+=",");this.clientbuffer[this.clientbuffer.length-1]+='{"res":"event","id":"'+o+'","type":"'+p+'","data":"'+n+'"}';m!=void 0&&(this.clientbuffer[this.clientbuffer.length-1]+='","data2":"'+m);l!=void 0&&(this.clientbuffer[this.clientbuffer.length-1]+='","data3":"'+l);k!=void 0&&(this.clientbuffer[this.clientbuffer.length-1]+='","data4":"'+k);this.clientSendData(j)};this.clientSendData=function(){this.clientbuffer.length==0?console.log("ERROR: client data length 0"):(data=this.clientbuffer.shift(),this.sendbuffer.push('{"gs":{"room":['+data+"]}}\r\n"))};this.startTag=function(c){this.databuffer[this.databuffer.length-1]+=c!=void 0?'{"'+c+'": ':"{"};this.startTags=function(c){this.databuffer[this.databuffer.length-1]+='"'+c+'": ['};this.appendTag=function(c,e){this.databuffer[this.databuffer.length-1]+='"'+c+'": "'+e+'"'};this.endTag=function(){this.databuffer[this.databuffer.length-1]+="}"};this.endTags=function(){this.databuffer[this.databuffer.length-1]+="]"};this.addSeparator=function(){this.databuffer[this.databuffer.length-1]+=","};this.loadModule=function(c){this.appendEvent(102,c)};this.loadModule2=function(c){this.appendEvent(103,c,"")};this.trace=function(c){console.log(c)};this.sendEvent=function(e,f,g){this.appendEvent(100,f,"Q.handlers.script_onEvent("+e+",'"+g+"');")};this.clientSpectate=function(){};this.getData=function(){return this.sendbuffer.length>0?this.sendbuffer.shift():""}}console.log(" serverko bridge load ok");function Camera(c){this.qapp=c;this.fit_=function(d,e){this.qapp.appendEvent_(2500,"fit",d+","+e)};this.fit=function(d,e){this.qapp.appendEvent(2500,"fit",d+","+e)};this.set_=function(d,n,m,l,k,j){this.qapp.appendEvent_(2501,d+","+n+","+m,l+","+k+","+j)};this.set=function(d,n,m,l,k,j){this.qapp.appendEvent(2501,d+","+n+","+m,l+","+k+","+j)};this.proj_=function(d,g,f){this.qapp.appendEvent_(2502,d,g+","+f)};this.proj=function(d,g,f){this.qapp.appendEvent(2502,d,g+","+f)};this.projHud_=function(d,g,f){this.qapp.appendEvent_(2512,d,g+","+f)};this.projHud=function(d,g,f){this.qapp.appendEvent(2512,d,g+","+f)};this.fitHud_=function(d,e){this.qapp.appendEvent_(2510,"fit",d+","+e)};this.fitHud=function(d,e){this.qapp.appendEvent(2510,"fit",d+","+e)};this.setHud_=function(d,n,m,l,k,j){this.qapp.appendEvent_(2511,d+","+n+","+m,l+","+k+","+j)};this.setHud=function(d,n,m,l,k,j){this.qapp.appendEvent(2511,d+","+n+","+m,l+","+k+","+j)}}function Connect(c){this.qapp=c;this.connect=function(d,e){this.qapp.appendEvent(7000,d,e)};this.connect_=function(d,e){this.qapp.appendEvent_(7000,d,e)};this.disconnect_=function(){this.qapp.appendEvent_(7003,"","")};this.disconnect=function(){this.qapp.appendEvent(7003,"","")};this.join_=function(d,g,f){this.qapp.appendEvent_(7001,d+"|"+g,f)};this.join=function(d,g,f){this.qapp.appendEvent(7001,d+"|"+g,f)};this.send_=function(d){this.qapp.appendEvent_(7002,d,"")};this.send=function(d){this.qapp.appendEvent(7002,d,"")}}function Env(c){this.qapp=c;this.set=function(d,e){this.qapp.appendEvent(200,d,e)};this.set_=function(d,e){this.qapp.appendEvent_(200,d,e)}}function Settings(c){this.qapp=c;this.open=function(){this.qapp.appendEvent(2600,"","")};this.open_=function(){this.qapp.appendEvent_(2600,"","")};this.save=function(){this.qapp.appendEvent(2601,"","")};this.save_=function(){this.qapp.appendEvent_(2601,"","")};this.writeInt=function(d,e){this.qapp.appendEvent(2610,d,e)};this.writeInt_=function(d,e){this.qapp.appendEvent_(2610,d,e)};this.writeString=function(d,e){this.qapp.appendEvent(2611,d,e)};this.writeString_=function(d,e){this.qapp.appendEvent_(2611,d,e)};this.loadInt=function(d,e){this.qapp.appendEvent(2620,d,e)};this.loadInt_=function(d,e){this.qapp.appendEvent_(2620,d,e)};this.loadString=function(d,e){this.qapp.appendEvent(2621,d,e)};this.loadString_=function(d,e){this.qapp.appendEvent_(2621,d,e)};this.loadArray=function(d,e){this.qapp.appendEvent(2622,d,e)};this.loadArray_=function(d,e){this.qapp.appendEvent_(2622,d,e)}}function Client(c){this.qapp=c;this.allexec_=function(d,e){this.qapp.appendEvent_(101,d,e)};this.allexec=function(d,e){this.qapp.appendEvent(101,d,e)};this.exec_=function(d,g,f){this.qapp.clientAppendEvent_(d,101,g,f)};this.exec=function(d,g,f){this.qapp.clientAppendEvent(d,101,g,f)}}function Env(c){this.qapp=c;this.set=function(d,e){this.qapp.appendEvent(200,d,e)};this.set_=function(d,e){this.qapp.appendEvent_(200,d,e)}}function Util(c){this.qapp=c;this.touchonoff=function(d){d==void 0&&(d=1000);this.qapp.env.set("touch","off");this.qapp.exec(d,"Q.env.set_('touch','on');")};this.touchonoff_=function(d){d==void 0&&(d=1000);this.qapp.env.set_("touch","off");this.qapp.exec_(d,"Q.env.set_('touch','on');")};this.indexOf=function(d,j,h){for(var g=d.length,h=h==null?0:h;h<g;h++){if(d[h]==j){return h}}return -1};this.arrayRemove=function(d,g){for(var f=0;f<d.length;f++){d[f]==g&&d.splice(f,1)}};this.tob64=function(d){return"#64#"+Base64.encode(d)}}function Anim(c){this.qapp=c;this.move=function(d,j,h,g){this.qapp.appendEvent(4200,d,j,h,g)};this.move_=function(d,j,h,g){this.qapp.appendEvent_(4200,d,j,h,g)};this.rotate=function(d,j,h,g){this.qapp.appendEvent(4210,d,j,h,g)};this.rotate_=function(d,j,h,g){this.qapp.appendEvent_(4210,d,j,h,g)};this.object=function(d,j,h,g){this.qapp.appendEvent3(4300,d,j,h,g)}}function WorldObject(){this.state=this.texture=this.bounds=this.location=this.template=this.name=void 0}function Objects(c){this.qapp=c;this.create=function(d,e){this.qapp.appendEvent(4100,d,e)};this.create_=function(d,e){this.qapp.appendEvent_(4100,d,e)};this.place=function(d,e){this.qapp.appendEvent(4110,d,e)};this.place_=function(d,e){this.qapp.appendEvent_(4110,d,e)};this.remove=function(d,e){this.qapp.appendEvent(4150,d,e)};this.remove_=function(d,e){this.qapp.appendEvent_(4150,d,e)};this.scale=function(d,e){this.qapp.appendEvent(4120,d,e)};this.scale_=function(d,e){this.qapp.appendEvent_(4120,d,e)};this.texture=function(d,e){this.qapp.appendEvent(4130,d,e)};this.texture_=function(d,e){this.qapp.appendEvent_(4130,d,e)};this.state=function(d,e){this.qapp.appendEvent(4140,d,e)};this.state_=function(d,e){this.qapp.appendEvent_(4140,d,e)};this.createObjects=function(d,g){var f;g==1&&this.qapp.serverko.startData();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","objs");this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("object");for(f=0;f<d.length;f++){f>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),d[f].name!=void 0&&this.qapp.serverko.appendTag("name",d[f].name),d[f].template!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("template",d[f].template)),d[f].location!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("location",d[f].location)),d[f].bounds!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("bounds",d[f].bounds)),d[f].texture!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("texture",d[f].texture)),d[f].state!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("state",d[f].state)),this.qapp.serverko.endTag("object")}this.qapp.serverko.endTags("object");this.qapp.serverko.endTag();g==1&&this.qapp.serverko.sendData()};this.add=function(d){this.createObjects(d,0)};this.clientAdd=function(d,e){this.createObjects(e,0)};this.add_=function(d){this.createObjects(d,1)};this.clientAdd_=function(d,e){this.createObjects(e,1)}}function AnimFrame(){this.operation=this.offset=this.translate2=this.scale2=this.rotate2=this.translate=this.scale=this.rotate=void 0}function AnimType(){this.id=void 0;this.frames=[];this.repeat=this.delay=void 0}function Animations(c){this.qapp=c;this.add=function(d){this.createAnim(d,0)};this.add_=function(d){this.createAnim(d,1)};this.createAnim=function(d,g){var f;g==1&&this.qapp.serverko.startData();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","animation");this.qapp.serverko.addSeparator();this.qapp.serverko.appendTag("id",d.id);d.delay!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("delay",d.delay));d.repeat!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("repeat",d.repeat));this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("frames");for(f=0;f<d.frames.length;f++){d.frames[f].id!=""&&(f>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),this.qapp.serverko.appendTag("id",d.frames[f].id),d.frames[f].rotate!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("rotate",d.frames[f].rotate)),d.frames[f].scale!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("scale",d.frames[f].scale)),d.frames[f].translate!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("translate",d.frames[f].translate)),d.frames[f].rotate2!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("rotate2",d.frames[f].rotate2)),d.frames[f].scale2!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("scale2",d.frames[f].scale2)),d.frames[f].translate2!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("translate2",d.frames[f].translate2)),d.frames[f].operation!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("operation",d.frames[f].operation)),this.qapp.serverko.endTag())}this.qapp.serverko.endTags("frames");this.qapp.serverko.endTag();g==1&&this.qapp.serverko.sendData()}}function Scores(){this.login=function(c){serverko.appendEvent(500,"",c)};this.login_=function(c){serverko.appendEvent_(500,"",c)};this.submit=function(c,e){serverko.appendEvent(510,c,e)};this.submit_=function(c,e){serverko.appendEvent_(510,c,e)};this.showscores=function(c,e){serverko.appendEvent(520,c,e)};this.showscores_=function(c,e){serverko.appendEvent_(520,c,e)};this.reload=function(c,e){serverko.appendEvent(521,c,e)};this.reload_=function(c,e){serverko.appendEvent_(521,c,e)}}function QApp(){this.exec=function(c,e){this.appendEvent(101,c,e)};this.exec_=function(c,e){this.appendEvent_(101,c,e)};this.goUrl=function(c,e){this.appendEvent(1200,c,e)};this.goUrl_=function(c,e){this.appendEvent_(1200,c,e)};this.serverko=new Serverko;this.layout=new Layout(this);this.textures=new Textures(this);this.sounds=new Sounds(this);this.models=new Models(this);this.settings=new Settings(this);this.camera=new Camera(this);this.env=new Env(this);this.connect=new Connect(this);this.handlers=new Room(this);this.util=new Util(this);this.client=new Client(this);this.objects=new Objects(this);this.anim=new Anim(this);this.animations=new Animations(this);this.scores=new Scores(this);this.startUpdate=function(){this.serverko.startData()};this.sendUpdate=function(){this.serverko.sendData()};this.appendEvent=function(h,m,n,l,k,j){this.serverko.appendEvent(h,m,n,l,k,j)};this.clientAppendEvent=function(j,o,p,n,m,l,k){this.serverko.clientAppendEvent(j,o,p,n,m,l,k)};this.appendEvent_=function(h,m,n,l,k,j){this.serverko.appendEvent_(h,m,n,l,k,j)};this.clientAppendEvent_=function(j,o,p,n,m,l,k){this.serverko.clientAppendEvent_(j,o,p,n,m,l,k)};this.clientStartUpdate=function(c){this.serverko.clientStartData(c)};this.clientSendUpdate=function(c){this.serverko.clientSendData(c)};this.print=function(c){this.layout.print(c)};this.print_=function(c){this.layout.print_(c)};this.event=function(e,f,g){this.serverko.sendEvent(e,f,g)};this.event_=function(e,f,g){this.startUpdate();this.serverko.sendEvent(e,f,g);this.sendUpdate()};this.include=function(c){this.serverko.loadModule(c)};this.include_=function(c){this.startUpdate();this.serverko.loadModule(c);this.sendUpdate()};this.load=function(c){this.serverko.loadModule2(c)};this.load_=function(c){this.startUpdate();this.serverko.loadModule2(c);this.sendUpdate()}}var Q=new QApp;console.log(" q ok");var sysareas=[];areaStdOut=new LayoutArea;areaStdOut.type="text.mline";areaStdOut.id="stdout";areaStdOut.location="0,0,2,2";areaStdOut.size="10,10,10";areaStdOut.text="";areaStdOut.display="hud";sysareas.push(areaStdOut);Q.layout.add_("*",sysareas);var frame=new AnimFrame;frame.translate="0,0,0";var anim=new AnimType;anim.id="move";anim.frames.push(frame);Q.animations.add_(anim);frame=new AnimFrame;frame.rotate="0,0,0";anim=new AnimType;anim.id="rotate";anim.frames.push(frame);Q.animations.add_(anim);var frame1=new AnimFrame;frame1.scale="0.001,0.001,0.001";var frame2=new AnimFrame;frame2.scale="1.0,1.0,1.0";anim=new AnimType;anim.id="spawn";anim.frames.push(frame1);anim.frames.push(frame2);Q.animations.add_(anim);frame1=new AnimFrame;frame1.scale="1.0,1.0,1.0";frame2=new AnimFrame;frame2.scale="1000.0,1000.0,1000.0";frame2.scale="0.0,100.0,0.0";anim=new AnimType;anim.id="away";anim.frames.push(frame1);anim.frames.push(frame2);Q.animations.add_(anim);frame=new AnimFrame;frame.translate="0,0,0";frame.rotate="0,0,0";frame.scale="0,0,0";frame.translate2="0,0,0";frame.rotate2="0,0,0";frame.scale2="0,0,0";anim=new AnimType;anim.id="transform";anim.frames.push(frame);Q.animations.add_(anim);anim=new AnimType;anim.id="walk";anim.frames.push(frame);Q.animations.add_(anim);frame1=new AnimFrame;frame1.scale="1.0,1.0,1.0";frame2=new AnimFrame;frame2.scale="1000.0,1000.0,1000.0";frame2.scale="0.0,100.0,0.0";anim=new AnimType;anim.frames.push(frame1);anim.frames.push(frame2);Q.animations.add_(anim);anim=new AnimType;anim.id="walkhigh";for(var div=0.628,a=0;a<6;a++){frame=new AnimFrame,frame.translate2="0,0,"+0.5*Math.sin(a*div),frame.operation="pdist",anim.frames.push(frame)}Q.animations.add_(anim);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){for(var r="",s,q,p,o,n,m,k=0,t=Base64._utf8_encode(t);k<t.length;){s=t.charCodeAt(k++),q=t.charCodeAt(k++),p=t.charCodeAt(k++),o=s>>2,s=(s&3)<<4|q>>4,n=(q&15)<<2|p>>6,m=p&63,isNaN(q)?n=m=64:isNaN(p)&&(m=64),r=r+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(n)+this._keyStr.charAt(m)}return r},decode:function(k){for(var q="",r,p,o,n,m,l=0,k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<k.length;){r=this._keyStr.indexOf(k.charAt(l++)),p=this._keyStr.indexOf(k.charAt(l++)),n=this._keyStr.indexOf(k.charAt(l++)),m=this._keyStr.indexOf(k.charAt(l++)),r=r<<2|p>>4,p=(p&15)<<4|n>>2,o=(n&3)<<6|m,q+=String.fromCharCode(r),n!=64&&(q+=String.fromCharCode(p)),m!=64&&(q+=String.fromCharCode(o))}return q=Base64._utf8_decode(q)},_utf8_encode:function(f){for(var f=f.replace(/\r\n/g,"\n"),h="",j=0;j<f.length;j++){var g=f.charCodeAt(j);g<128?h+=String.fromCharCode(g):(g>127&&g<2048?h+=String.fromCharCode(g>>6|192):(h+=String.fromCharCode(g>>12|224),h+=String.fromCharCode(g>>6&63|128)),h+=String.fromCharCode(g&63|128))}return h},_utf8_decode:function(f){for(var h="",j=0,g=c1=c2=0;j<f.length;){g=f.charCodeAt(j),g<128?(h+=String.fromCharCode(g),j++):g>191&&g<224?(c2=f.charCodeAt(j+1),h+=String.fromCharCode((g&31)<<6|c2&63),j+=2):(c2=f.charCodeAt(j+1),c3=f.charCodeAt(j+2),h+=String.fromCharCode((g&15)<<12|(c2&63)<<6|c3&63),j+=3)}return h}};if(qsupportold==1){serverko=Q.serverko,serverko.sendEvent=function(e,f,g){Q.serverko.startData();Q.serverko.appendEvent(100,f,"Q.handlers.script_onEvent("+e+",'"+g+"');");Q.serverko.sendData()},Q.layout.areaSetOwner=function(c,e){Q.serverko.appendEvent(3120,c,e)},Q.layout.clientAreaSetOwner=function(e,f,g){Q.serverko.clientAppendEvent(e,3120,f,g)},Q.layout.add=Q.layout.add_,Q.layout.clientAdd=Q.layout.clientAdd_,Q.event=Q.event_,Q.load=Q.load_,Q.include=Q.include_,layout=Q.layout}function getPositionX(e){var f=new Number,g=document.getElementById("qappcanvas"),f=e.x!=void 0?e.x:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;f-=g.offsetLeft;return f}function getPositionY(e){var f=new Number,g=document.getElementById("qappcanvas"),f=e.y!=void 0?e.y:e.clientY+document.body.scrollTop+document.documentElement.scrollTop;f-=g.offsetTop;return f}function QStarter(){this.mApp=new GameonApp;this.height=this.width=-1;this.leftCoord=this.topCoord=0;this.lastTime=(new Date).getTime();this.lastTime2=(new Date).getTime();this.start=function(){if(gl=initWebGL("qappcanvas","vshader","fshader",["vColor","vTexCoord","vPosition"],[0.1,0.1,0.1,1],1)){gl.uniform1i(gl.getUniformLocation(gl.program,"sampler2d"),0);gl.uniform2f(gl.getUniformLocation(gl.program,"texOffset"),0,0);gl.uniform2f(gl.getUniformLocation(gl.program,"texOffsetF"),0,0);gl.enable(gl.TEXTURE_2D);gl.mvMatrix=new J3DIMatrix4;gl.u_modelViewMatrixLoc=gl.getUniformLocation(gl.program,"u_modelViewMatrix");gl.u_modelProjMatrixLoc=gl.getUniformLocation(gl.program,"u_modelProjMatrix");gl.enableVertexAttribArray(0);gl.enableVertexAttribArray(1);gl.enableVertexAttribArray(2);this.dragging=!1;this.mApp.init();var c=document.getElementById("qappcanvas");this.mApp.mPreExec="CanvasW = "+c.width+";CanvasH = "+c.height+";";this.mApp.start("main.js");this.reshape(gl);return gl}};this.handleMouseUp=function(c){qstart.mApp.mouseClicked(getPositionX(c),getPositionY(c));qstart.dragging=!1};this.handleMouseDown=function(c){qstart.dragging=!0;qstart.mApp.onFocusProbe(getPositionX(c),getPositionY(c))};this.handleMouseMove=function(c){qstart.dragging&&qstart.mApp.mouseDragged(getPositionX(c),getPositionY(c))};this.reshape=function(c){var e=document.getElementById("qappcanvas");if(!(e.width==this.width&&e.height==this.height)){if(e.clientTop!=void 0){this.topCoord=e.clientTop,this.leftCoord=e.clientLeft}c.viewportWidth=e.width;c.viewportHeight=e.height;e.addEventListener("mousedown",this.handleMouseDown,!1);e.addEventListener("mouseup",this.handleMouseUp,!1);e.addEventListener("mousemove",this.handleMouseMove,!1);this.width=e.width;this.height=e.height;this.mApp.surfaceChanged(c,this.width,this.height)}}}function drawFrame(){qstart.mApp.hasData()==!0&&(qstart.reshape(gl),gl.clearColor(0,0,0,1),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),qstart.mApp.drawFrame(gl),gl.flush());requestAnimFrame(drawFrame)}function qstart(){qstart=new QStarter;(gl=qstart.start())&&drawFrame(gl)};